"use client";var Fo=Object.create;var ht=Object.defineProperty,Ho=Object.defineProperties,Go=Object.getOwnPropertyDescriptor,Qo=Object.getOwnPropertyDescriptors,$o=Object.getOwnPropertyNames,Lt=Object.getOwnPropertySymbols,Wo=Object.getPrototypeOf,da=Object.prototype.hasOwnProperty,Ja=Object.prototype.propertyIsEnumerable;var Ya=(e,t,a)=>t in e?ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,d=(e,t)=>{for(var a in t||(t={}))da.call(t,a)&&Ya(e,a,t[a]);if(Lt)for(var a of Lt(t))Ja.call(t,a)&&Ya(e,a,t[a]);return e},R=(e,t)=>Ho(e,Qo(t));var G=(e,t)=>{var a={};for(var r in e)da.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&Lt)for(var r of Lt(e))t.indexOf(r)<0&&Ja.call(e,r)&&(a[r]=e[r]);return a};var Ko=(e,t)=>{for(var a in t)ht(e,a,{get:t[a],enumerable:!0})},Za=(e,t,a,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of $o(t))!da.call(e,n)&&n!==a&&ht(e,n,{get:()=>t[n],enumerable:!(r=Go(t,n))||r.enumerable});return e};var D=(e,t,a)=>(a=e!=null?Fo(Wo(e)):{},Za(t||!e||!e.__esModule?ht(a,"default",{value:e,enumerable:!0}):a,e)),Yo=e=>Za(ht({},"__esModule",{value:!0}),e);var w=(e,t,a)=>new Promise((r,n)=>{var s=l=>{try{o(a.next(l))}catch(c){n(c)}},i=l=>{try{o(a.throw(l))}catch(c){n(c)}},o=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,i);o((a=a.apply(e,t)).next())});var Ii={};Ko(Ii,{OstClient:()=>mi});module.exports=Yo(Ii);var Sa=require("react"),er=require("react/jsx-runtime"),ba=(0,Sa.createContext)({}),Xa=({children:e,repoOwner:t,repoSlug:a,repoBranch:r,contentPath:n,monorepoPath:s,session:i,collections:o,pages:l,addPage:c,removePage:u,hasOpenAIKey:M,hasChanges:m,setHasChanges:S,basePath:y})=>(0,er.jsx)(ba.Provider,{value:{repoOwner:t||"",repoSlug:a||"",repoBranch:r||"main",contentPath:n||"outstatic/content",monorepoPath:s||"",session:i,collections:o,pages:l,addPage:c,removePage:u,hasOpenAIKey:M,hasChanges:m,setHasChanges:S,basePath:y||""},children:e}),Ye=(0,Sa.createContext)({});var Ze=require("@apollo/client"),tr=require("@apollo/client/link/context"),ma=D(require("cross-fetch")),ar=require("react");var Je,Jo=new Ze.InMemoryCache({typePolicies:{}});function Zo(e=""){return w(this,null,function*(){return(yield(0,ma.default)(e+"/api/outstatic/user")).json()})}function Xo(e,t){let a=(0,Ze.createHttpLink)({uri:"https://api.github.com/graphql",fetch:(...n)=>(typeof window!="undefined"&&typeof window.fetch=="function"?window.fetch:ma.default)(...n)}),r=(0,tr.setContext)((i,o)=>w(this,[i,o],function*(n,{headers:s}){var u;let l=e?{session:e}:yield Zo(t);return{headers:R(d({},s),{authorization:(u=l.session)!=null&&u.access_token?`Bearer ${l.session.access_token}`:""})}}));return new Ze.ApolloClient({ssrMode:typeof window=="undefined",link:(0,Ze.from)([r,a]),cache:Jo})}function es(e=null,t,a=""){let r=Je!=null?Je:Xo(t,a);return e&&r.cache.restore(e),typeof window=="undefined"?r:(Je=Je!=null?Je:r,Je)}function kt(e=null,t,a){return(0,ar.useMemo)(()=>es(e,t,a),[e,t,a])}var qo=require("@apollo/client"),xt=require("react");var Z=require("react/jsx-runtime");function Ia(){return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)("div",{id:"outstatic",children:[(0,Z.jsx)("div",{className:"absolute bottom-10 w-full left-0 overflow-hidden z-0 md:-top-10 bg-white",children:(0,Z.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 1200 365",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Z.jsx)("path",{d:"M-276.32 159.182C-232.477 130.613 -193.037 95.4797 -149.142 66.8773C-123.398 50.1026 -99.0091 30.5473 -69.5694 19.7442C-38.5686 8.36831 -2.85928 -3.31376 37.4064 4.54405C65.5725 10.0406 93.927 20.2194 125.473 43.3305C150.292 61.5127 166.609 84.5943 185.936 114.255C220.569 167.405 225.81 223.228 224.615 265.934C223.2 316.536 198.5 341.652 158.621 340.382C121.027 339.185 71.9868 320.328 45.0005 250.638C8.63388 156.723 111.095 159.937 149.344 159.325C235.509 157.945 334.997 185.056 433.145 218.102C547.034 256.448 651.041 336.753 780 356C940 384.5 1235.5 330.311 1237.95 70.5232",stroke:"#1E293B",className:"stroke-2 md:stroke-1",strokeLinecap:"round"})})}),(0,Z.jsxs)("main",{className:"relative flex h-screen flex-col items-center justify-center z-10 p-4",children:[(0,Z.jsx)("h1",{className:"mb-8 text-center text-xl font-semibold text-white",children:(0,Z.jsx)("svg",{fill:"none",height:"32",viewBox:"0 0 775 135",width:"200",xmlns:"http://www.w3.org/2000/svg","aria-label":"Outstatic",children:(0,Z.jsxs)("g",{fill:"#1e293b",children:[(0,Z.jsx)("path",{d:"m63.9963 134.869c-11.3546 0-21.0957-1.913-29.2232-5.738-8.008-3.824-14.522-8.904-19.5419-15.239-5.02-6.454-8.72517-13.565-11.11562-21.3344-2.39045-7.769-3.585673-15.5379-3.585673-23.3069 0-7.5299 1.254983-15.1196 3.764953-22.769 2.62949-7.769 6.51394-14.8805 11.65344-21.3347 5.259-6.4543 11.773-11.6535 19.5419-15.59772 7.8885-3.94424 17.0917-5.91636 27.6097-5.91636 10.996 0 20.4383 1.97212 28.3268 5.91636 8.008 3.94422 14.5813 9.20322 19.7213 15.77692 5.139 6.4542 8.964 13.5061 11.474 21.1555 2.63 7.6494 3.944 15.2391 3.944 22.769 0 7.4104-1.314 15.0001-3.944 22.769-2.51 7.6495-6.394 14.7613-11.653 21.3343-5.14 6.455-11.5941 11.654-19.363 15.598-7.769 3.944-16.9722 5.917-27.6097 5.917zm.8964-9.323c6.9323 0 12.9084-1.554 17.9284-4.662 5.1394-3.107 9.3227-7.231 12.5498-12.37 3.3467-5.259 5.7971-10.9962 7.3511-17.2114 1.553-6.3347 2.33-12.6096 2.33-18.8248 0-7.6494-.896-15-2.689-22.0519-1.793-7.1713-4.5419-13.5658-8.2471-19.1833-3.5856-5.7371-8.0677-10.2192-13.4462-13.4463-5.3785-3.3466-11.5937-5.0199-18.6455-5.0199-6.9323 0-12.9682 1.6135-18.1077 4.8406-5.1394 3.2271-9.3227 7.4702-12.5498 12.7292-3.2271 5.1394-5.6773 10.8765-7.3506 17.2112-1.5538 6.2152-2.3307 12.4901-2.3307 18.8248 0 6.2151.8366 12.7889 2.5099 19.7212 1.6734 6.9323 4.2431 13.3865 7.7092 19.3626 3.4662 5.976 7.8885 10.817 13.267 14.522 5.4981 3.705 12.0718 5.558 19.7212 5.558z"}),(0,Z.jsx)("path",{d:"m179.299 134.869c-6.693 0-12.251-1.255-16.673-3.765-4.303-2.51-7.53-6.634-9.681-12.371-2.152-5.857-3.227-13.566-3.227-23.1276v-28.1475c0-2.0319 0-4.1235 0-6.2749.119-2.271.358-4.4821.717-6.6335-2.032.1195-4.183.239-6.454.3585-2.271 0-4.303.0598-6.096.1793v-9.502h4.303c5.976 0 10.458-.5379 13.446-1.6136s5.08-2.2111 6.275-3.4064h6.813v54.6815c0 9.4422 1.314 16.4942 3.944 21.1552 2.629 4.662 7.052 6.933 13.267 6.813 4.064 0 7.948-1.195 11.653-3.586 3.825-2.39 6.933-5.199 9.323-8.426v-42.4901c0-2.6295.06-5.0797.179-7.3507.12-2.3904.359-4.6613.718-6.8127-2.152.1195-4.363.239-6.634.3585-2.271 0-4.363.0598-6.275.1793v-9.502h5.199c5.259 0 9.383-.5379 12.371-1.6136s5.139-2.2111 6.454-3.4064h6.813l-.179 65.9767c0 1.912-.06 4.542-.18 7.888-.119 3.227-.298 6.096-.538 8.606 2.032-.12 4.124-.239 6.275-.359 2.271-.119 4.363-.179 6.275-.179v9.502h-28.506c-.239-1.912-.478-3.705-.717-5.379-.119-1.673-.299-3.286-.538-4.84-3.705 3.466-8.008 6.514-12.908 9.143-4.901 2.63-10.04 3.945-15.419 3.945z"}),(0,Z.jsx)("path",{d:"m283.918 134.869c-2.988 0-5.976-.419-8.964-1.255-2.988-.718-5.797-2.212-8.426-4.483-2.51-2.39-4.482-5.796-5.916-10.219-1.435-4.422-2.152-10.279-2.152-17.57l.359-48.9439h-13.267v-10.0399c3.227-.1196 6.514-1.3148 9.86-3.5857 3.347-2.2709 6.275-5.3187 8.785-9.1435 2.51-3.8247 4.243-7.9482 5.199-12.3705h8.427v25.0997h27.609v9.3227l-27.609.3586-.359 47.8687c0 4.5418.359 8.5458 1.076 12.0118.837 3.347 2.151 5.976 3.944 7.889 1.913 1.793 4.482 2.689 7.709 2.689 2.749 0 5.558-.837 8.427-2.51 2.988-1.673 5.796-4.422 8.426-8.247l6.096 5.378c-2.869 4.184-5.737 7.471-8.606 9.861-2.868 2.39-5.618 4.124-8.247 5.199-2.629 1.195-5.02 1.913-7.171 2.152-2.152.358-3.885.538-5.2.538z"}),(0,Z.jsx)("path",{d:"m358.946 134.869c-5.618 0-10.817-.777-15.598-2.331-4.781-1.434-8.605-3.168-11.474-5.199l.538 5.916h-9.502l-.897-30.837h7.53c.239 4.423 1.614 8.427 4.124 12.012 2.51 3.586 5.737 6.395 9.681 8.427 4.064 2.031 8.426 3.047 13.088 3.047 2.749 0 5.438-.418 8.068-1.255 2.629-.956 4.84-2.33 6.633-4.123 1.793-1.913 2.689-4.243 2.689-6.992 0-2.988-.956-5.439-2.868-7.351-1.793-2.032-4.303-3.825-7.53-5.378-3.108-1.5542-6.693-3.108-10.757-4.6618-3.586-1.4342-7.231-2.9282-10.936-4.482-3.586-1.5538-6.933-3.4064-10.04-5.5578-3.108-2.1514-5.558-4.7809-7.351-7.8885-1.793-3.2271-2.689-7.1714-2.689-11.8327 0-2.749.538-5.6773 1.613-8.7849 1.076-3.2271 2.809-6.1554 5.2-8.7849 2.39-2.749 5.617-4.9602 9.681-6.6335 4.064-1.7928 9.084-2.6893 15.06-2.6893 3.227 0 6.812.5379 10.757 1.6136 4.063 1.0757 7.828 2.9283 11.295 5.5578l-.18-6.2749h9.502v31.5539h-7.709c-.358-4.1833-1.494-8.0678-3.406-11.6535-1.793-3.5856-4.363-6.5139-7.709-8.7849-3.347-2.2709-7.411-3.4064-12.192-3.4064-4.661 0-8.486 1.1953-11.474 3.5857-2.868 2.2709-4.303 5.1395-4.303 8.6056 0 3.4662 1.076 6.275 3.227 8.4264 2.271 2.1514 5.2 4.004 8.785 5.5578 3.586 1.5537 7.47 3.1075 11.654 4.6613 5.02 2.0319 9.741 4.2431 14.163 6.6335 4.422 2.3905 8.008 5.3785 10.757 8.9642s4.124 8.1273 4.124 13.6253c0 5.976-1.554 10.996-4.662 15.06-2.988 3.944-6.872 6.873-11.653 8.785s-9.861 2.869-15.239 2.869z"}),(0,Z.jsx)("path",{d:"m439.216 134.869c-2.988 0-5.976-.419-8.964-1.255-2.988-.718-5.797-2.212-8.427-4.483-2.51-2.39-4.482-5.796-5.916-10.219-1.434-4.422-2.151-10.279-2.151-17.57l.358-48.9439h-13.267v-10.0399c3.227-.1196 6.514-1.3148 9.861-3.5857 3.346-2.2709 6.275-5.3187 8.785-9.1435 2.51-3.8247 4.243-7.9482 5.199-12.3705h8.426v25.0997h27.61v9.3227l-27.61.3586-.358 47.8687c0 4.5418.358 8.5458 1.075 12.0118.837 3.347 2.152 5.976 3.945 7.889 1.912 1.793 4.482 2.689 7.709 2.689 2.749 0 5.558-.837 8.426-2.51 2.988-1.673 5.797-4.422 8.426-8.247l6.096 5.378c-2.869 4.184-5.737 7.471-8.606 9.861-2.868 2.39-5.617 4.124-8.247 5.199-2.629 1.195-5.02 1.913-7.171 2.152-2.151.358-3.884.538-5.199.538z"}),(0,Z.jsx)("path",{d:"m528.944 132c-.239-1.912-.418-3.586-.537-5.02-.12-1.434-.299-2.928-.538-4.482-4.064 4.064-8.427 7.171-13.088 9.323-4.661 2.032-9.502 3.048-14.522 3.048-8.606 0-15.119-2.092-19.542-6.275-4.303-4.303-6.454-9.622-6.454-15.957 0-5.498 1.614-10.279 4.841-14.3423 3.227-4.0638 7.47-7.3507 12.729-9.8606 5.259-2.6295 10.996-4.5419 17.211-5.7371 6.215-1.3148 12.311-1.9721 18.287-1.9721v-10.5778c0-3.8247-.359-7.3506-1.076-10.5777-.717-3.3466-2.211-6.0359-4.482-8.0678-2.151-2.1514-5.558-3.2271-10.219-3.2271-3.108-.1195-6.215.4781-9.323 1.7929-3.107 1.1952-5.498 3.2271-7.171 6.0956.956.9562 1.554 2.0917 1.793 3.4064.358 1.1952.538 2.3307.538 3.4064 0 1.6733-.718 3.5857-2.152 5.7371-1.434 2.0318-3.884 2.988-7.35 2.8685-2.869 0-5.08-.9562-6.634-2.8685-1.434-2.0319-2.151-4.3626-2.151-6.9921 0-4.3028 1.553-8.1275 4.661-11.4741 3.227-3.3467 7.59-5.9762 13.088-7.8885 5.498-1.9124 11.653-2.8686 18.466-2.8686 10.279 0 17.928 2.6893 22.948 8.0678 5.14 5.3785 7.709 13.8646 7.709 25.4583v12.3705c0 3.9443-.059 7.8885-.179 11.8328v12.55c0 1.793-.06 3.825-.179 6.095-.12 2.271-.299 4.662-.538 7.172 2.032-.12 4.124-.239 6.275-.359 2.151-.119 4.183-.179 6.096-.179v9.502zm-1.613-43.0281c-3.825.2391-7.769.7769-11.833 1.6136-3.944.8366-7.53 2.0916-10.757 3.7649s-5.856 3.8247-7.888 6.4546c-1.913 2.629-2.869 5.796-2.869 9.502.239 4.063 1.554 7.051 3.944 8.964 2.51 1.912 5.439 2.868 8.785 2.868 4.184 0 7.889-.777 11.116-2.33 3.227-1.674 6.394-3.945 9.502-6.813-.12-1.315-.179-2.63-.179-3.944 0-1.435 0-2.929 0-4.482 0-1.076 0-3.048 0-5.9168.119-2.988.179-6.2151.179-9.6813z"}),(0,Z.jsx)("path",{d:"m602.217 134.869c-2.988 0-5.976-.419-8.964-1.255-2.988-.718-5.797-2.212-8.427-4.483-2.51-2.39-4.482-5.796-5.916-10.219-1.434-4.422-2.151-10.279-2.151-17.57l.358-48.9439h-13.267v-10.0399c3.227-.1196 6.514-1.3148 9.861-3.5857 3.346-2.2709 6.275-5.3187 8.785-9.1435 2.51-3.8247 4.243-7.9482 5.199-12.3705h8.426v25.0997h27.61v9.3227l-27.61.3586-.358 47.8687c0 4.5418.358 8.5458 1.075 12.0118.837 3.347 2.152 5.976 3.945 7.889 1.912 1.793 4.482 2.689 7.709 2.689 2.749 0 5.558-.837 8.426-2.51 2.988-1.673 5.797-4.422 8.426-8.247l6.096 5.378c-2.868 4.184-5.737 7.471-8.606 9.861-2.868 2.39-5.617 4.124-8.247 5.199-2.629 1.195-5.02 1.913-7.171 2.152-2.151.358-3.884.538-5.199.538z"}),(0,Z.jsx)("path",{d:"m639.057 124.47c3.585 0 6.095-.837 7.53-2.51 1.434-1.673 2.271-4.004 2.51-6.992.358-2.988.538-6.454.538-10.398v-37.1121c0-2.0319.059-4.0638.179-6.0957.119-2.1514.299-4.4223.538-6.8127-2.032.1195-4.184.239-6.455.3585-2.27 0-4.362.0598-6.275.1793v-9.502c5.379 0 9.622-.2391 12.73-.7172 3.227-.5976 5.677-1.2549 7.35-1.9721 1.793-.7171 3.108-1.494 3.945-2.3307h6.812v69.2037c0 2.151-.059 4.362-.179 6.633-.119 2.152-.299 4.363-.538 6.634 1.913-.12 3.825-.179 5.737-.179 2.032-.12 3.885-.24 5.558-.359v9.502h-39.98zm19.183-100.3988c-3.107 0-5.737-1.1354-7.888-3.4063-2.152-2.3905-3.227-5.259-3.227-8.6057 0-3.34658 1.135-6.15536 3.406-8.42628 2.271-2.39045 4.841-3.5856788 7.709-3.5856788 3.108 0 5.677 1.1952288 7.709 3.5856788 2.152 2.27092 3.227 5.0797 3.227 8.42628 0 3.3467-1.075 6.2152-3.227 8.6057-2.032 2.2709-4.601 3.4063-7.709 3.4063z"}),(0,Z.jsx)("path",{d:"m735.314 134.869c-8.008 0-15.359-1.793-22.052-5.379-6.693-3.705-12.072-8.964-16.136-15.777-3.944-6.813-5.916-15.0598-5.916-24.7411 0-6.4542 1.136-12.6096 3.407-18.4662 2.27-5.9761 5.438-11.2949 9.502-15.9562 4.183-4.6614 9.083-8.3068 14.701-10.9363 5.737-2.7491 12.072-4.1236 19.004-4.1236 7.052 0 13.088 1.0757 18.108 3.2271 5.019 2.1514 8.844 4.9602 11.474 8.4264 2.749 3.4661 4.123 7.2311 4.123 11.2948 0 2.8686-.837 5.3785-2.51 7.5299-1.673 2.1515-4.064 3.2272-7.171 3.2272-3.466.1195-5.917-.8965-7.351-3.0479-1.434-2.2709-2.151-4.3625-2.151-6.2749 0-1.0757.179-2.2709.538-3.5857.358-1.4342 1.016-2.6892 1.972-3.7649-.956-2.51-2.51-4.3626-4.662-5.5578-2.151-1.1952-4.362-1.9721-6.633-2.3307s-4.183-.5379-5.737-.5379c-7.291.1196-13.446 3.2869-18.466 9.5021-4.901 6.0956-7.351 14.9403-7.351 26.5339 0 7.4104 1.076 14.0439 3.227 19.9008 2.271 5.856 5.558 10.518 9.861 13.984s9.442 5.259 15.418 5.378c5.379 0 10.578-1.374 15.598-4.123 5.02-2.869 9.083-6.454 12.191-10.757l5.737 5.02c-3.466 5.378-7.47 9.621-12.012 12.729-4.422 3.107-8.964 5.319-13.625 6.633-4.542 1.315-8.905 1.973-13.088 1.973z"})]})})}),(0,Z.jsx)("div",{className:"text-center mb-20 flex max-w-2xl flex-col items-center p-8 px-4 md:p-8 text-black bg-white rounded-lg border border-gray-200 shadow-md",children:(0,Z.jsx)("p",{className:"text-2xl",children:"404 - Nothing here..."})})]})]})})}var rr=require("react");function N(){return(0,rr.useContext)(ba)}var nr=D(require("next/link")),or=require("next/navigation"),sr=require("react");var ir=require("react/jsx-runtime"),ts=n=>{var s=n,{href:e,onClick:t,children:a}=s,r=G(s,["href","onClick","children"]);let i=(0,or.useRouter)(),{hasChanges:o,setHasChanges:l}=N(),c=(0,sr.useCallback)(u=>{u.preventDefault(),t&&t(u),o?window.confirm("You have unsaved changes. Are you sure you wish to leave this page?")&&(l(!1),i.push(e.toString())):i.push(e.toString())},[o,t,l,i,e]);return(0,ir.jsx)(nr.default,R(d({href:e,onClick:c},r),{children:a}))},St=ts;var Ma=require("next/navigation"),lr=require("react"),cr=D(require("swr"));var as=e=>fetch(e).then(t=>t.json()).then(t=>t||null),Xe=({redirectTo:e,redirectIfFound:t}={})=>{let{basePath:a}=N(),{data:r,error:n}=(0,cr.default)((a||"")+"/api/outstatic/user",as),s=r==null?void 0:r.session,i=!!r,o=!!s,l=(0,Ma.useRouter)();return(0,lr.useEffect)(()=>{!e||!i||(e&&!t&&!o||t&&o)&&l.push(e)},[e,t,i,o]),r?r&&!o||n?{session:null,status:"unauthenticated"}:{session:s,status:"authenticated"}:{session:null,status:"loading"}};function pr(){let e=(0,Ma.useRouter)();return{signOut:()=>{e.push("/api/outstatic/signout")}}}var mr=require("lucide-react"),Ir=require("react");var dr=require("@radix-ui/react-slot"),Sr=require("class-variance-authority"),br=D(require("react"));var yr=require("clsx"),ur=require("tailwind-merge");function we(...e){return(0,ur.twMerge)((0,yr.clsx)(e))}var vt=require("react/jsx-runtime"),rs=(0,Sr.cva)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",select:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground appearance-none"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),U=br.forwardRef((i,s)=>{var o=i,{className:e,variant:t,size:a,asChild:r=!1}=o,n=G(o,["className","variant","size","asChild"]);return(0,vt.jsx)(vt.Fragment,{children:(0,vt.jsx)(r?dr.Slot:"button",d({className:we(rs({variant:t,size:a,className:e})),ref:s},n))})});U.displayName="Button";var L=require("react/jsx-runtime"),ns=({name:e,email:t,image:a,status:r,toggleSidebar:n})=>{let[s,i]=(0,Ir.useState)(!1),{signOut:o}=pr();return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)("nav",{className:"relative border-b border-gray-200 bg-white px-2 py-2.5 sm:px-4 h-14",children:(0,L.jsxs)("div",{className:"mx-auto flex flex-wrap items-center justify-between",children:[(0,L.jsxs)(U,{variant:"ghost",size:"icon",className:"flex lg:hidden items-center justify-center","data-collapse-toggle":"mobile-menu-2",type:"button","aria-controls":"mobile-menu-2","aria-expanded":"false",onClick:n,children:[(0,L.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,L.jsx)(mr.Menu,{})]}),(0,L.jsx)(St,{href:"/outstatic","aria-label":"Outstatic",children:(0,L.jsx)("div",{className:"cursor-pointer flex items-center",children:(0,L.jsx)("svg",{fill:"none",height:"20",viewBox:"0 0 775 135",width:"115",xmlns:"http://www.w3.org/2000/svg",children:(0,L.jsxs)("g",{fill:"#1e293b",children:[(0,L.jsx)("path",{d:"m63.9963 134.869c-11.3546 0-21.0957-1.913-29.2232-5.738-8.008-3.824-14.522-8.904-19.5419-15.239-5.02-6.454-8.72517-13.565-11.11562-21.3344-2.39045-7.769-3.585673-15.5379-3.585673-23.3069 0-7.5299 1.254983-15.1196 3.764953-22.769 2.62949-7.769 6.51394-14.8805 11.65344-21.3347 5.259-6.4543 11.773-11.6535 19.5419-15.59772 7.8885-3.94424 17.0917-5.91636 27.6097-5.91636 10.996 0 20.4383 1.97212 28.3268 5.91636 8.008 3.94422 14.5813 9.20322 19.7213 15.77692 5.139 6.4542 8.964 13.5061 11.474 21.1555 2.63 7.6494 3.944 15.2391 3.944 22.769 0 7.4104-1.314 15.0001-3.944 22.769-2.51 7.6495-6.394 14.7613-11.653 21.3343-5.14 6.455-11.5941 11.654-19.363 15.598-7.769 3.944-16.9722 5.917-27.6097 5.917zm.8964-9.323c6.9323 0 12.9084-1.554 17.9284-4.662 5.1394-3.107 9.3227-7.231 12.5498-12.37 3.3467-5.259 5.7971-10.9962 7.3511-17.2114 1.553-6.3347 2.33-12.6096 2.33-18.8248 0-7.6494-.896-15-2.689-22.0519-1.793-7.1713-4.5419-13.5658-8.2471-19.1833-3.5856-5.7371-8.0677-10.2192-13.4462-13.4463-5.3785-3.3466-11.5937-5.0199-18.6455-5.0199-6.9323 0-12.9682 1.6135-18.1077 4.8406-5.1394 3.2271-9.3227 7.4702-12.5498 12.7292-3.2271 5.1394-5.6773 10.8765-7.3506 17.2112-1.5538 6.2152-2.3307 12.4901-2.3307 18.8248 0 6.2151.8366 12.7889 2.5099 19.7212 1.6734 6.9323 4.2431 13.3865 7.7092 19.3626 3.4662 5.976 7.8885 10.817 13.267 14.522 5.4981 3.705 12.0718 5.558 19.7212 5.558z"}),(0,L.jsx)("path",{d:"m179.299 134.869c-6.693 0-12.251-1.255-16.673-3.765-4.303-2.51-7.53-6.634-9.681-12.371-2.152-5.857-3.227-13.566-3.227-23.1276v-28.1475c0-2.0319 0-4.1235 0-6.2749.119-2.271.358-4.4821.717-6.6335-2.032.1195-4.183.239-6.454.3585-2.271 0-4.303.0598-6.096.1793v-9.502h4.303c5.976 0 10.458-.5379 13.446-1.6136s5.08-2.2111 6.275-3.4064h6.813v54.6815c0 9.4422 1.314 16.4942 3.944 21.1552 2.629 4.662 7.052 6.933 13.267 6.813 4.064 0 7.948-1.195 11.653-3.586 3.825-2.39 6.933-5.199 9.323-8.426v-42.4901c0-2.6295.06-5.0797.179-7.3507.12-2.3904.359-4.6613.718-6.8127-2.152.1195-4.363.239-6.634.3585-2.271 0-4.363.0598-6.275.1793v-9.502h5.199c5.259 0 9.383-.5379 12.371-1.6136s5.139-2.2111 6.454-3.4064h6.813l-.179 65.9767c0 1.912-.06 4.542-.18 7.888-.119 3.227-.298 6.096-.538 8.606 2.032-.12 4.124-.239 6.275-.359 2.271-.119 4.363-.179 6.275-.179v9.502h-28.506c-.239-1.912-.478-3.705-.717-5.379-.119-1.673-.299-3.286-.538-4.84-3.705 3.466-8.008 6.514-12.908 9.143-4.901 2.63-10.04 3.945-15.419 3.945z"}),(0,L.jsx)("path",{d:"m283.918 134.869c-2.988 0-5.976-.419-8.964-1.255-2.988-.718-5.797-2.212-8.426-4.483-2.51-2.39-4.482-5.796-5.916-10.219-1.435-4.422-2.152-10.279-2.152-17.57l.359-48.9439h-13.267v-10.0399c3.227-.1196 6.514-1.3148 9.86-3.5857 3.347-2.2709 6.275-5.3187 8.785-9.1435 2.51-3.8247 4.243-7.9482 5.199-12.3705h8.427v25.0997h27.609v9.3227l-27.609.3586-.359 47.8687c0 4.5418.359 8.5458 1.076 12.0118.837 3.347 2.151 5.976 3.944 7.889 1.913 1.793 4.482 2.689 7.709 2.689 2.749 0 5.558-.837 8.427-2.51 2.988-1.673 5.796-4.422 8.426-8.247l6.096 5.378c-2.869 4.184-5.737 7.471-8.606 9.861-2.868 2.39-5.618 4.124-8.247 5.199-2.629 1.195-5.02 1.913-7.171 2.152-2.152.358-3.885.538-5.2.538z"}),(0,L.jsx)("path",{d:"m358.946 134.869c-5.618 0-10.817-.777-15.598-2.331-4.781-1.434-8.605-3.168-11.474-5.199l.538 5.916h-9.502l-.897-30.837h7.53c.239 4.423 1.614 8.427 4.124 12.012 2.51 3.586 5.737 6.395 9.681 8.427 4.064 2.031 8.426 3.047 13.088 3.047 2.749 0 5.438-.418 8.068-1.255 2.629-.956 4.84-2.33 6.633-4.123 1.793-1.913 2.689-4.243 2.689-6.992 0-2.988-.956-5.439-2.868-7.351-1.793-2.032-4.303-3.825-7.53-5.378-3.108-1.5542-6.693-3.108-10.757-4.6618-3.586-1.4342-7.231-2.9282-10.936-4.482-3.586-1.5538-6.933-3.4064-10.04-5.5578-3.108-2.1514-5.558-4.7809-7.351-7.8885-1.793-3.2271-2.689-7.1714-2.689-11.8327 0-2.749.538-5.6773 1.613-8.7849 1.076-3.2271 2.809-6.1554 5.2-8.7849 2.39-2.749 5.617-4.9602 9.681-6.6335 4.064-1.7928 9.084-2.6893 15.06-2.6893 3.227 0 6.812.5379 10.757 1.6136 4.063 1.0757 7.828 2.9283 11.295 5.5578l-.18-6.2749h9.502v31.5539h-7.709c-.358-4.1833-1.494-8.0678-3.406-11.6535-1.793-3.5856-4.363-6.5139-7.709-8.7849-3.347-2.2709-7.411-3.4064-12.192-3.4064-4.661 0-8.486 1.1953-11.474 3.5857-2.868 2.2709-4.303 5.1395-4.303 8.6056 0 3.4662 1.076 6.275 3.227 8.4264 2.271 2.1514 5.2 4.004 8.785 5.5578 3.586 1.5537 7.47 3.1075 11.654 4.6613 5.02 2.0319 9.741 4.2431 14.163 6.6335 4.422 2.3905 8.008 5.3785 10.757 8.9642s4.124 8.1273 4.124 13.6253c0 5.976-1.554 10.996-4.662 15.06-2.988 3.944-6.872 6.873-11.653 8.785s-9.861 2.869-15.239 2.869z"}),(0,L.jsx)("path",{d:"m439.216 134.869c-2.988 0-5.976-.419-8.964-1.255-2.988-.718-5.797-2.212-8.427-4.483-2.51-2.39-4.482-5.796-5.916-10.219-1.434-4.422-2.151-10.279-2.151-17.57l.358-48.9439h-13.267v-10.0399c3.227-.1196 6.514-1.3148 9.861-3.5857 3.346-2.2709 6.275-5.3187 8.785-9.1435 2.51-3.8247 4.243-7.9482 5.199-12.3705h8.426v25.0997h27.61v9.3227l-27.61.3586-.358 47.8687c0 4.5418.358 8.5458 1.075 12.0118.837 3.347 2.152 5.976 3.945 7.889 1.912 1.793 4.482 2.689 7.709 2.689 2.749 0 5.558-.837 8.426-2.51 2.988-1.673 5.797-4.422 8.426-8.247l6.096 5.378c-2.869 4.184-5.737 7.471-8.606 9.861-2.868 2.39-5.617 4.124-8.247 5.199-2.629 1.195-5.02 1.913-7.171 2.152-2.151.358-3.884.538-5.199.538z"}),(0,L.jsx)("path",{d:"m528.944 132c-.239-1.912-.418-3.586-.537-5.02-.12-1.434-.299-2.928-.538-4.482-4.064 4.064-8.427 7.171-13.088 9.323-4.661 2.032-9.502 3.048-14.522 3.048-8.606 0-15.119-2.092-19.542-6.275-4.303-4.303-6.454-9.622-6.454-15.957 0-5.498 1.614-10.279 4.841-14.3423 3.227-4.0638 7.47-7.3507 12.729-9.8606 5.259-2.6295 10.996-4.5419 17.211-5.7371 6.215-1.3148 12.311-1.9721 18.287-1.9721v-10.5778c0-3.8247-.359-7.3506-1.076-10.5777-.717-3.3466-2.211-6.0359-4.482-8.0678-2.151-2.1514-5.558-3.2271-10.219-3.2271-3.108-.1195-6.215.4781-9.323 1.7929-3.107 1.1952-5.498 3.2271-7.171 6.0956.956.9562 1.554 2.0917 1.793 3.4064.358 1.1952.538 2.3307.538 3.4064 0 1.6733-.718 3.5857-2.152 5.7371-1.434 2.0318-3.884 2.988-7.35 2.8685-2.869 0-5.08-.9562-6.634-2.8685-1.434-2.0319-2.151-4.3626-2.151-6.9921 0-4.3028 1.553-8.1275 4.661-11.4741 3.227-3.3467 7.59-5.9762 13.088-7.8885 5.498-1.9124 11.653-2.8686 18.466-2.8686 10.279 0 17.928 2.6893 22.948 8.0678 5.14 5.3785 7.709 13.8646 7.709 25.4583v12.3705c0 3.9443-.059 7.8885-.179 11.8328v12.55c0 1.793-.06 3.825-.179 6.095-.12 2.271-.299 4.662-.538 7.172 2.032-.12 4.124-.239 6.275-.359 2.151-.119 4.183-.179 6.096-.179v9.502zm-1.613-43.0281c-3.825.2391-7.769.7769-11.833 1.6136-3.944.8366-7.53 2.0916-10.757 3.7649s-5.856 3.8247-7.888 6.4546c-1.913 2.629-2.869 5.796-2.869 9.502.239 4.063 1.554 7.051 3.944 8.964 2.51 1.912 5.439 2.868 8.785 2.868 4.184 0 7.889-.777 11.116-2.33 3.227-1.674 6.394-3.945 9.502-6.813-.12-1.315-.179-2.63-.179-3.944 0-1.435 0-2.929 0-4.482 0-1.076 0-3.048 0-5.9168.119-2.988.179-6.2151.179-9.6813z"}),(0,L.jsx)("path",{d:"m602.217 134.869c-2.988 0-5.976-.419-8.964-1.255-2.988-.718-5.797-2.212-8.427-4.483-2.51-2.39-4.482-5.796-5.916-10.219-1.434-4.422-2.151-10.279-2.151-17.57l.358-48.9439h-13.267v-10.0399c3.227-.1196 6.514-1.3148 9.861-3.5857 3.346-2.2709 6.275-5.3187 8.785-9.1435 2.51-3.8247 4.243-7.9482 5.199-12.3705h8.426v25.0997h27.61v9.3227l-27.61.3586-.358 47.8687c0 4.5418.358 8.5458 1.075 12.0118.837 3.347 2.152 5.976 3.945 7.889 1.912 1.793 4.482 2.689 7.709 2.689 2.749 0 5.558-.837 8.426-2.51 2.988-1.673 5.797-4.422 8.426-8.247l6.096 5.378c-2.868 4.184-5.737 7.471-8.606 9.861-2.868 2.39-5.617 4.124-8.247 5.199-2.629 1.195-5.02 1.913-7.171 2.152-2.151.358-3.884.538-5.199.538z"}),(0,L.jsx)("path",{d:"m639.057 124.47c3.585 0 6.095-.837 7.53-2.51 1.434-1.673 2.271-4.004 2.51-6.992.358-2.988.538-6.454.538-10.398v-37.1121c0-2.0319.059-4.0638.179-6.0957.119-2.1514.299-4.4223.538-6.8127-2.032.1195-4.184.239-6.455.3585-2.27 0-4.362.0598-6.275.1793v-9.502c5.379 0 9.622-.2391 12.73-.7172 3.227-.5976 5.677-1.2549 7.35-1.9721 1.793-.7171 3.108-1.494 3.945-2.3307h6.812v69.2037c0 2.151-.059 4.362-.179 6.633-.119 2.152-.299 4.363-.538 6.634 1.913-.12 3.825-.179 5.737-.179 2.032-.12 3.885-.24 5.558-.359v9.502h-39.98zm19.183-100.3988c-3.107 0-5.737-1.1354-7.888-3.4063-2.152-2.3905-3.227-5.259-3.227-8.6057 0-3.34658 1.135-6.15536 3.406-8.42628 2.271-2.39045 4.841-3.5856788 7.709-3.5856788 3.108 0 5.677 1.1952288 7.709 3.5856788 2.152 2.27092 3.227 5.0797 3.227 8.42628 0 3.3467-1.075 6.2152-3.227 8.6057-2.032 2.2709-4.601 3.4063-7.709 3.4063z"}),(0,L.jsx)("path",{d:"m735.314 134.869c-8.008 0-15.359-1.793-22.052-5.379-6.693-3.705-12.072-8.964-16.136-15.777-3.944-6.813-5.916-15.0598-5.916-24.7411 0-6.4542 1.136-12.6096 3.407-18.4662 2.27-5.9761 5.438-11.2949 9.502-15.9562 4.183-4.6614 9.083-8.3068 14.701-10.9363 5.737-2.7491 12.072-4.1236 19.004-4.1236 7.052 0 13.088 1.0757 18.108 3.2271 5.019 2.1514 8.844 4.9602 11.474 8.4264 2.749 3.4661 4.123 7.2311 4.123 11.2948 0 2.8686-.837 5.3785-2.51 7.5299-1.673 2.1515-4.064 3.2272-7.171 3.2272-3.466.1195-5.917-.8965-7.351-3.0479-1.434-2.2709-2.151-4.3625-2.151-6.2749 0-1.0757.179-2.2709.538-3.5857.358-1.4342 1.016-2.6892 1.972-3.7649-.956-2.51-2.51-4.3626-4.662-5.5578-2.151-1.1952-4.362-1.9721-6.633-2.3307s-4.183-.5379-5.737-.5379c-7.291.1196-13.446 3.2869-18.466 9.5021-4.901 6.0956-7.351 14.9403-7.351 26.5339 0 7.4104 1.076 14.0439 3.227 19.9008 2.271 5.856 5.558 10.518 9.861 13.984s9.442 5.259 15.418 5.378c5.379 0 10.578-1.374 15.598-4.123 5.02-2.869 9.083-6.454 12.191-10.757l5.737 5.02c-3.466 5.378-7.47 9.621-12.012 12.729-4.422 3.107-8.964 5.319-13.625 6.633-4.542 1.315-8.905 1.973-13.088 1.973z"})]})})})}),r==="loading"||(0,L.jsxs)("div",{className:"flex items-center md:order-2",children:[(0,L.jsxs)("button",{type:"button",className:"mr-3 flex items-center rounded-full bg-gray-800 text-sm focus:ring-4 focus:ring-gray-300 dark:focus:ring-gray-600 md:mr-0",id:"user-menu-button","aria-expanded":"false","data-dropdown-toggle":"dropdown",onClick:()=>i(!s),children:[(0,L.jsx)("span",{className:"sr-only",children:"Open user menu"}),(0,L.jsx)("img",{className:"h-8 w-8 rounded-full",src:a||"",alt:"user"})]}),(0,L.jsxs)("div",{className:`right-0 top-[60px] z-50 my-4 w-full list-none divide-y divide-gray-100 rounded-br rounded-bl bg-white text-base shadow md:-right-0 md:top-[52px] md:w-auto ${s?"block":"hidden"}`,id:"dropdown",style:{position:"absolute",margin:"0px"},children:[(0,L.jsxs)("div",{className:"py-3 px-4",children:[(0,L.jsx)("span",{className:"block text-sm text-gray-900",children:e}),(0,L.jsx)("span",{className:"block truncate text-sm font-medium text-gray-500",children:t})]}),(0,L.jsx)("ul",{className:"py-1","aria-labelledby":"dropdown",children:(0,L.jsx)("li",{children:(0,L.jsx)("a",{className:"block cursor-pointer py-2 px-4 text-sm text-gray-700 hover:bg-gray-100",onClick:o,children:"Sign out"})})})]})]})]})})})},ga=ns;var Mr="1.4.8";var et="images/",gt="api/outstatic/images/";function os(a){return w(this,arguments,function*({repoOwner:e,repoSlug:t}){let n=new TextEncoder().encode(e+t),s=yield window.crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(s)).map(l=>l.toString(16).padStart(2,"0")).join("")})}var gr=os;var Ra=D(require("js-cookie")),Cr=require("lucide-react"),Vt=require("react");var Ar=D(require("react")),Fe=D(require("@radix-ui/react-tooltip"));var Pr=require("react/jsx-runtime"),Rr=Fe.Provider,fr=Fe.Root,Er=Fe.Trigger,Aa=Ar.forwardRef((n,r)=>{var s=n,{className:e,sideOffset:t=4}=s,a=G(s,["className","sideOffset"]);return(0,Pr.jsx)(Fe.Content,d({ref:r,sideOffset:t,className:we("z-50 overflow-hidden rounded-md bg-white px-3 py-1.5 text-xs text-primary animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 border",e)},a))});Aa.displayName=Fe.Content.displayName;var xr=require("pluralize");var f=require("react/jsx-runtime"),ss=()=>{let e=Ra.default.get("ost_broadcast");return e?JSON.parse(e):null},is=({isOpen:e=!1})=>{let[t,a]=(0,Vt.useState)(ss()),{collections:r,repoOwner:n,repoSlug:s}=N();return(0,Vt.useEffect)(()=>{t||(()=>w(void 0,null,function*(){let o=new URL("https://analytics.outstatic.com/"),l=Intl.DateTimeFormat().resolvedOptions().timeZone,c=yield gr({repoOwner:n,repoSlug:s});o.searchParams.append("timezone",l),o.searchParams.append("unique_id",c),o.searchParams.append("version",Mr),yield fetch(o.toString()).then(u=>u.json()).then(u=>{u!=null&&u.title&&(a(u),Ra.default.set("ost_broadcast",JSON.stringify(u),{expires:1}))}).catch(u=>{console.log(u)})}))()},[]),(0,f.jsxs)("aside",{className:`absolute top-[53px] z-20 h-full w-full md:relative md:top-0 md:w-64 md:min-w-[16rem] lg:block ${e?"block":"hidden"}`,"aria-label":"Sidebar",children:[(0,f.jsxs)("div",{className:"scrollbar-hide flex h-full max-h-[calc(100vh-96px)] flex-col justify-between overflow-y-scroll bg-gray-50 py-4 px-3",children:[(0,f.jsxs)("ul",{className:"space-y-2",children:[(0,f.jsx)("li",{children:(0,f.jsx)(St,{href:"/outstatic",children:(0,f.jsxs)("div",{className:"flex cursor-pointer items-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100",children:[(0,f.jsxs)("svg",{className:"h-6 w-6 shrink-0 text-gray-500 transition duration-75 group-hover:text-gray-900",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[(0,f.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,f.jsx)("path",{fill:"currentColor",d:"M13 21V11h8v10h-8zM3 13V3h8v10H3zm6-2V5H5v6h4zM3 21v-6h8v6H3zm2-2h4v-2H5v2zm10 0h4v-6h-4v6zM13 3h8v6h-8V3zm2 2v2h4V5h-4z"})]}),(0,f.jsx)("span",{className:"ml-3",children:"Collections"})]})})}),(0,f.jsx)(f.Fragment,{children:r.map(i=>(0,f.jsx)("li",{children:(0,f.jsxs)("div",{className:"group w-full flex cursor-pointer items-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100",children:[(0,f.jsxs)(St,{href:`/outstatic/${i}`,className:"flex flex-grow items-center",children:[(0,f.jsx)("svg",{className:"h-6 w-6 shrink-0 text-gray-500 transition duration-75 group-hover:text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,f.jsx)("span",{className:"ml-3 capitalize",children:i})]}),(0,f.jsx)(Rr,{children:(0,f.jsxs)(fr,{children:[(0,f.jsx)(Er,{asChild:!0,children:(0,f.jsx)("div",{className:"z-10",children:(0,f.jsx)(St,{href:`/outstatic/${i}/new`,className:"hidden group-hover:block bg-white p-1 border border-gray-200 text-gray-500 rounded-sm hover:text-gray-700","aria-label":'Create new item in collection "collection"',children:(0,f.jsx)(Cr.Plus,{strokeWidth:3,size:14})})})}),(0,f.jsx)(Aa,{children:(0,f.jsxs)("p",{children:["Create new"," ",(0,f.jsx)("span",{className:"inline-block first-letter:uppercase",children:(0,xr.singular)(i)})]})})]})})]})},i))}),(0,f.jsx)("li",{children:(0,f.jsx)(St,{href:"/outstatic/settings",children:(0,f.jsxs)("div",{className:"flex cursor-pointer items-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100",children:[(0,f.jsx)("svg",{className:"h-6 w-6 shrink-0 text-gray-500 transition duration-75 group-hover:text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),(0,f.jsx)("span",{className:"ml-3 flex-1 whitespace-nowrap",children:"Settings"})]})})})]}),t?(0,f.jsxs)("div",{className:"border-gray mt-6 rounded-lg border bg-white p-4",role:"alert",children:[(0,f.jsx)("div",{className:"mb-3 flex items-center",children:(0,f.jsx)("span",{className:"mr-2 rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-800",children:t.title})}),(0,f.jsx)("p",{className:"text-sm",children:t.content}),t!=null&&t.link?(0,f.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",children:(0,f.jsx)("span",{className:"mt-3 text-xs font-medium underline",children:"Learn more"})}):null]}):null]}),(0,f.jsxs)("div",{className:"flex h-10 w-full items-center justify-between border-t bg-gray-50 py-2 px-4 text-xs",children:[(0,f.jsx)("a",{className:"font-semibold text-gray-500 hover:text-gray-900 hover:underline",href:"https://outstatic.com/docs",target:"_blank",rel:"noreferrer",children:"Documentation"}),(0,f.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,f.jsx)("a",{href:"https://github.com/avitorio/outstatic",target:"_blank","aria-label":"GitHub",rel:"noreferrer",className:"group",children:(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none","aria-label":"GitHub logo",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z",transform:"scale(1.2)",className:"fill-gray-400 group-hover:fill-gray-900"})})}),(0,f.jsx)("a",{href:"https://x.com/outstatic",target:"_blank","aria-label":"X.com",rel:"noreferrer",className:"group flex h-5 w-5 items-center justify-center",children:(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 300 300.251",width:"17",height:"17",fill:"none",children:(0,f.jsx)("path",{className:"fill-gray-400 group-hover:fill-gray-900",d:"M178.57 127.15 290.27 0h-26.46l-97.03 110.38L89.34 0H0l117.13 166.93L0 300.25h26.46l102.4-116.59 81.8 116.59h89.34M36.01 19.54H76.66l187.13 262.13h-40.66"})})}),(0,f.jsx)("a",{href:"https://discord.gg/myn4qgfXaG",target:"_blank","aria-label":"Discord",rel:"noreferrer",className:"group flex h-5 w-5 items-center justify-center",children:(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",width:"18",height:"18",viewBox:"0 -28.5 256 256",version:"1.1",preserveAspectRatio:"xMidYMid",children:(0,f.jsx)("g",{children:(0,f.jsx)("path",{className:"fill-gray-400 group-hover:fill-gray-900",d:"M216.856339,16.5966031 C200.285002,8.84328665 182.566144,3.2084988 164.041564,0 C161.766523,4.11318106 159.108624,9.64549908 157.276099,14.0464379 C137.583995,11.0849896 118.072967,11.0849896 98.7430163,14.0464379 C96.9108417,9.64549908 94.1925838,4.11318106 91.8971895,0 C73.3526068,3.2084988 55.6133949,8.86399117 39.0420583,16.6376612 C5.61752293,67.146514 -3.4433191,116.400813 1.08711069,164.955721 C23.2560196,181.510915 44.7403634,191.567697 65.8621325,198.148576 C71.0772151,190.971126 75.7283628,183.341335 79.7352139,175.300261 C72.104019,172.400575 64.7949724,168.822202 57.8887866,164.667963 C59.7209612,163.310589 61.5131304,161.891452 63.2445898,160.431257 C105.36741,180.133187 151.134928,180.133187 192.754523,160.431257 C194.506336,161.891452 196.298154,163.310589 198.110326,164.667963 C191.183787,168.842556 183.854737,172.420929 176.223542,175.320965 C180.230393,183.341335 184.861538,190.991831 190.096624,198.16893 C211.238746,191.588051 232.743023,181.531619 254.911949,164.955721 C260.227747,108.668201 245.831087,59.8662432 216.856339,16.5966031 Z M85.4738752,135.09489 C72.8290281,135.09489 62.4592217,123.290155 62.4592217,108.914901 C62.4592217,94.5396472 72.607595,82.7145587 85.4738752,82.7145587 C98.3405064,82.7145587 108.709962,94.5189427 108.488529,108.914901 C108.508531,123.290155 98.3405064,135.09489 85.4738752,135.09489 Z M170.525237,135.09489 C157.88039,135.09489 147.510584,123.290155 147.510584,108.914901 C147.510584,94.5396472 157.658606,82.7145587 170.525237,82.7145587 C183.391518,82.7145587 193.761324,94.5189427 193.539891,108.914901 C193.539891,123.290155 183.391518,135.09489 170.525237,135.09489 Z",fillRule:"nonzero"})})})})]})]})]})},fa=is;var Dr=require("next/navigation"),jt=require("react"),hr=require("sonner");var be=require("react/jsx-runtime");function me({children:e,error:t,settings:a,title:r}){let{session:n,status:s}=Xe(),{push:i}=(0,Dr.useRouter)(),[o,l]=(0,jt.useState)(!1),c=()=>{l(!o)};return(0,jt.useEffect)(()=>{let u=r?`${r} | Outstatic`:"Outstatic";document.title=u},[r]),s==="unauthenticated"?(typeof window!="undefined"&&i("/outstatic"),null):(0,be.jsx)(be.Fragment,{children:(0,be.jsxs)("div",{id:"outstatic",children:[(0,be.jsx)(hr.Toaster,{richColors:!0}),s==="loading"?null:(0,be.jsxs)("div",{className:"flex h-screen flex-col bg-white text-black",children:[(0,be.jsx)(ga,R(d({},n==null?void 0:n.user),{status:s,toggleSidebar:c})),(0,be.jsxs)("div",{className:"flex md:grow flex-col-reverse justify-between md:flex-row",children:[(0,be.jsx)(fa,{isOpen:o}),(0,be.jsxs)("main",{className:"w-auto flex-auto p-5 md:p-10 bg-white h-dvh max-h-[calc(100vh-128px)] md:max-h-[calc(100vh-53px)] overflow-y-scroll scrollbar-hide",children:[t&&(0,be.jsxs)("div",{className:"mb-6 border border-red-500 p-2",children:["Something went wrong"," ",(0,be.jsx)("span",{role:"img","aria-label":"sad face",children:"\u{1F613}"})]}),e]}),a&&a]})]})]})})}var vr=require("react"),Be=require("react/jsx-runtime"),ls=({title:e,callback:t,children:a,error:r=!1})=>{let[n,s]=(0,vr.useState)(!1);return(0,Be.jsxs)("div",{className:"w-full border-b first:border-t",children:[(0,Be.jsx)("h2",{id:"accordion-collapse-heading-1 bg-red-50 ",children:(0,Be.jsxs)("button",{type:"button",className:`flex items-center justify-between w-full text-sm font-medium text-gray-900 p-4 hover:bg-gray-50 focus:outline-none focus:outline-blue-300 focus:outline-offset-[-1px] ${r?"bg-red-50":""}`,onClick:()=>{s(!n),t&&t()},children:[(0,Be.jsx)("span",{className:"capitalize",children:e}),(0,Be.jsx)("svg",{"data-accordion-icon":!0,className:`w-6 h-6 shrink-0 ${n?"":"rotate-180"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,Be.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})}),(0,Be.jsx)("div",{className:n?"block":"hidden",children:(0,Be.jsx)("div",{className:"p-4 font-light border-gray-200 border-t",children:a})})]})},At=ls;var zt=require("react"),Ur=D(require("react-datepicker"));var se=require("react/jsx-runtime"),cs={year:"numeric",month:"long",day:"numeric"},ps=e=>e.getFullYear(),ys=e=>e.getMonth(),us=Array.from({length:100},(e,t)=>new Date().getFullYear()-t),Ea=["January","February","March","April","May","June","July","August","September","October","November","December"],ds=({date:e,setDate:t,id:a,label:r})=>(0,se.jsxs)(se.Fragment,{children:[r&&(0,se.jsx)("label",{className:"block text-sm font-medium text-gray-900",htmlFor:a,children:r}),(0,se.jsx)("div",{children:(0,se.jsx)(Ur.default,{name:a,selected:e,onChange:s=>{t(s)},renderCustomHeader:({date:s,changeYear:i,changeMonth:o,decreaseMonth:l,increaseMonth:c,prevMonthButtonDisabled:u,nextMonthButtonDisabled:M})=>(0,se.jsxs)("div",{className:"react-datepicker__header",children:[(0,se.jsx)("select",{className:"react-datepicker__current-month appearance-none cursor-pointer hover:text-blue-500",value:ps(s),onChange:({target:{value:m}})=>i(Number(m)),children:us.map(m=>(0,se.jsx)("option",{value:m,children:m},m))}),(0,se.jsx)("select",{className:"react-datepicker__current-month appearance-none cursor-pointer hover:text-blue-500",value:Ea[ys(s)],onChange:({target:{value:m}})=>o(Ea.indexOf(m)),children:Ea.map(m=>(0,se.jsx)("option",{value:m,children:m},m))}),(0,se.jsx)("button",{onClick:l,disabled:u,type:"button",className:"react-datepicker__navigation react-datepicker__navigation--previous","aria-label":"Previous Month",children:(0,se.jsx)("span",{className:"react-datepicker__navigation-icon react-datepicker__navigation-icon--previous",children:"Previous Month"})}),(0,se.jsx)("button",{onClick:c,disabled:M,type:"button",className:"react-datepicker__navigation react-datepicker__navigation--next","aria-label":"Next Month",children:(0,se.jsx)("span",{className:"react-datepicker__navigation-icon react-datepicker__navigation-icon--next",children:"Next Month"})})]}),customInput:(0,zt.createElement)((0,zt.forwardRef)((s,i)=>(0,se.jsx)(U,R(d({},s),{ref:i,variant:"outline",disabled:!e,children:e?e.toLocaleDateString("en-US",cs):"Loading"})))),showTimeInput:!0,timeInputLabel:"Time:",withPortal:!0,portalId:"__next"})})]}),_r=ds;var Le=require("react/jsx-runtime"),Ss=({children:e,title:t,close:a})=>(0,Le.jsx)("div",{className:"fixed inset-x-0 z-50 flex w-full items-center justify-center overflow-y-auto overflow-x-hidden bg-[rgba(0,0,0,0.5)] inset-0 h-full",children:(0,Le.jsx)("div",{className:"relative w-full max-w-2xl p-4 md:h-auto",children:(0,Le.jsxs)("div",{className:"relative rounded-lg bg-white shadow",children:[(0,Le.jsxs)("div",{className:"flex items-start justify-between rounded-t border-b p-4",children:[(0,Le.jsx)("h3",{className:"text-xl font-semibold text-gray-900 capitalize",children:t}),(0,Le.jsx)(U,{variant:"ghost",size:"icon","data-modal-toggle":"defaultModal",onClick:a,children:(0,Le.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,Le.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e]})})}),bt=Ss;var ke=require("@apollo/client"),He=D(require("@apollo/client"));var Rt={};var bs=ke.gql`
  fragment TreeDetails on TreeEntry {
    path
    type
  }
`,ms=ke.gql`
  fragment BlobDetails on Blob {
    oid
    commitUrl
  }
`,Is=ke.gql`
  fragment RecursiveTreeDetails on Tree {
    entries {
      ...TreeDetails
      object {
        ... on Blob {
          ...BlobDetails
        }
        ... on Tree {
          entries {
            ...TreeDetails
            object {
              ... on Blob {
                ...BlobDetails
              }
              ... on Tree {
                entries {
                  ...TreeDetails
                  object {
                    ... on Blob {
                      ...BlobDetails
                    }
                    ... on Tree {
                      entries {
                        ...TreeDetails
                        object {
                          ... on Blob {
                            ...BlobDetails
                          }
                          ... on Tree {
                            entries {
                              ...TreeDetails
                              object {
                                ... on Blob {
                                  ...BlobDetails
                                }
                                ... on Tree {
                                  entries {
                                    ...TreeDetails
                                    object {
                                      ... on Blob {
                                        ...BlobDetails
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  ${bs}
  ${ms}
`,Ms=ke.gql`
  mutation createCommit($input: CreateCommitOnBranchInput!) {
    createCommitOnBranch(input: $input) {
      commit {
        oid
      }
    }
  }
`;function De(e){let t=d(d({},Rt),e);return He.useMutation(Ms,t)}var Sl=ke.gql`
  query Collections($owner: String!, $name: String!, $contentPath: String!) {
    repository(owner: $owner, name: $name) {
      id
      object(expression: $contentPath) {
        ... on Tree {
          entries {
            name
            type
          }
        }
      }
    }
  }
`;var qt=ke.gql`
  query Document($owner: String!, $name: String!, $filePath: String!) {
    repository(owner: $owner, name: $name) {
      id
      object(expression: $filePath) {
        ... on Blob {
          text
          commitUrl
        }
      }
    }
  }
`;function Ft(e){let t=d(d({},Rt),e);return He.useQuery(qt,t)}function Tr(e){let t=d(d({},Rt),e);return He.useLazyQuery(qt,t)}var gs=ke.gql`
  query Documents($owner: String!, $name: String!, $contentPath: String!) {
    repository(owner: $owner, name: $name) {
      id
      object(expression: $contentPath) {
        ... on Tree {
          entries {
            name
            object {
              ... on Blob {
                text
              }
            }
          }
        }
      }
    }
  }
`;function wr(e){let t=d(d({},Rt),e);return He.useQuery(gs,t)}var As=ke.gql`
  query GetFileInformation(
    $owner: String!
    $name: String!
    $expression: String!
  ) {
    repository(owner: $owner, name: $name) {
      id
      object(expression: $expression) {
        ... on Tree {
          commitUrl
          ...RecursiveTreeDetails
        }
      }
    }
  }
  ${Is}
`;function Nr(e){let t=d(d({},Rt),e);return He.useQuery(As,t)}var Rs=ke.gql`
  query Oid($owner: String!, $name: String!, $branch: String!) {
    repository(owner: $owner, name: $name) {
      id
      ref(qualifiedName: $branch) {
        target {
          ... on Commit {
            history(first: 1) {
              nodes {
                oid
              }
            }
          }
        }
      }
    }
  }
`;function Or(e){let t=d(d({},Rt),e);return He.useLazyQuery(Rs,t)}var Br=require("js-base64"),Ve=({message:e,owner:t,oid:a,name:r,branch:n})=>{let s=[],i=[],o=e!=null?e:"chore: Outstatic commit",l="Automatically created by Outstatic";return{setMessage:(S,y)=>{o=S!=null?S:o,l=y!=null?y:l},createInput:()=>({branch:{repositoryNameWithOwner:`${t}/${r}`,branchName:n},message:{headline:o},fileChanges:{additions:s,deletions:i},expectedHeadOid:a}),replaceFile:(S,y,p=!0)=>{let g=p===!0?(0,Br.encode)(y):y;s.push({path:S,contents:g})},removeFile:S=>{i.push({path:S})}}};var fs={"github.com":/.+\/([a-f0-9]+)$/},Ge=e=>e.indexOf("github.com")>=0?e.replace(fs["github.com"],"$1"):"";var Lr=require("react");var Es=()=>{var i;let{repoSlug:e,repoBranch:t,repoOwner:a}=N(),{session:r}=Xe(),[n]=Or({variables:{owner:a||((i=r==null?void 0:r.user)==null?void 0:i.login)||"",name:e,branch:t},fetchPolicy:"no-cache"});return(0,Lr.useCallback)(()=>w(void 0,null,function*(){var c,u,M,m,S;let{data:o,error:l}=yield n();if(l)throw l;if(((M=(u=(c=o==null?void 0:o.repository)==null?void 0:c.ref)==null?void 0:u.target)==null?void 0:M.__typename)!=="Commit")throw new Error("No valid oid found");if(typeof((S=(m=o.repository.ref.target.history.nodes)==null?void 0:m[0])==null?void 0:S.oid)!="string")throw new Error("Received a non-string oid");return o.repository.ref.target.history.nodes[0].oid}),[n])},he=Es;var kr=require("thenby"),Vr=D(require("json-stable-stringify")),tt=e=>(e.metadata=e.metadata.sort((0,kr.firstBy)("__outstatic.path")),(0,Vr.default)(e,{space:2}));var jr=require("lucide-react"),Pa=require("react");var re=require("react/jsx-runtime"),Ps=({slug:e,disabled:t=!1,onComplete:a=()=>{},collection:r,className:n})=>{var P;let[s,i]=(0,Pa.useState)(!1),[o,l]=(0,Pa.useState)(!1),{session:c}=Xe(),[u]=De(),{repoOwner:M,repoSlug:m,repoBranch:S,contentPath:y,monorepoPath:p}=N(),g=he(),{data:b}=Ft({variables:{owner:M||((P=c==null?void 0:c.user)==null?void 0:P.login)||"",name:m,filePath:`${S}:${p?p+"/":""}${y}/metadata.json`},fetchPolicy:"network-only"}),A=v=>w(void 0,null,function*(){var z,T,h,V,F;l(!0);try{let C=yield g(),H=M||((z=c==null?void 0:c.user)==null?void 0:z.login)||"",Y=Ve({message:`feat(${r}): remove ${v}`,owner:H,oid:C!=null?C:"",name:m,branch:S});if(Y.removeFile(`${p?p+"/":""}${y}/${r}/${v}.md`),((h=(T=b==null?void 0:b.repository)==null?void 0:T.object)==null?void 0:h.__typename)==="Blob"){let O=JSON.parse((V=b.repository.object.text)!=null?V:"{}");O.generated=new Date().toISOString(),O.commit=Ge(b.repository.object.commitUrl);let le=((F=O.metadata)!=null?F:[]).filter(Se=>Se.slug!==v);Y.replaceFile(`${p?p+"/":""}${y}/metadata.json`,tt(R(d({},O),{metadata:le})))}let ae=Y.createInput();yield u({variables:{input:ae}}),i(!1),a&&a()}catch(C){console.log(C)}});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)(U,{onClick:()=>i(!0),type:"button",disabled:t,className:n,title:"Delete document",size:"icon",variant:"ghost",children:[(0,re.jsx)("span",{className:"sr-only",children:"Delete document"}),(0,re.jsx)(jr.Trash2,{className:"stroke-foreground"})]}),s&&(0,re.jsxs)(bt,{title:"Delete Document",close:()=>i(!1),children:[(0,re.jsxs)("div",{className:"space-y-6 p-6 text-left",children:[(0,re.jsx)("p",{className:"text-base leading-relaxed text-gray-500",children:"Are you sure you want to delete this document?"}),(0,re.jsx)("p",{className:"text-base leading-relaxed text-gray-500",children:"This action cannot be undone."})]}),(0,re.jsxs)("div",{className:"flex items-center space-x-2 rounded-b border-t p-6",children:[(0,re.jsx)(U,{variant:"destructive",onClick:()=>{A(e)},children:o?(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)("svg",{className:"mr-3 -ml-1 h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,re.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,re.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting"]}):"Delete"}),(0,re.jsx)(U,{variant:"outline",onClick:()=>i(!1),children:"Cancel"})]})]})]})},Ht=Ps;var qr=require("react-hook-form");var ve=require("react/jsx-runtime"),zr={small:{label:"mb-1 block text-sm font-medium text-gray-900",input:'"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50'},medium:{label:"block mb-2 text-sm font-medium text-gray-900",input:'"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50'}},Cs=M=>{var m=M,{label:e,placeholder:t="",helperText:a,id:r,type:n="text",readOnly:s=!1,registerOptions:i,wrapperClass:o,className:l,inputSize:c="medium"}=m,u=G(m,["label","placeholder","helperText","id","type","readOnly","registerOptions","wrapperClass","className","inputSize"]);var p,g,b,A;let{register:S,formState:{errors:y}}=(0,qr.useFormContext)();return(0,ve.jsxs)("div",{className:o,children:[e&&(0,ve.jsx)("label",{htmlFor:r,className:`${zr[c].label} first-letter:capitalize`,children:e}),(0,ve.jsx)("div",{className:"relative",children:(0,ve.jsx)("input",R(d(d({},S(r,i)),u),{className:`${zr[c].input} ${l}`,type:n,name:r,id:r,readOnly:s,placeholder:t,"aria-describedby":r}))}),(0,ve.jsx)(ve.Fragment,{children:(((p=y[r])==null?void 0:p.message)||a)&&(0,ve.jsxs)("div",{className:"mt-1 first-letter:capitalize",children:[a&&(0,ve.jsx)("p",{className:"text-xs text-gray-500",children:a}),((g=y[r])==null?void 0:g.message)&&(0,ve.jsx)("span",{className:"text-sm text-red-500",children:(A=(b=y[r])==null?void 0:b.message)==null?void 0:A.toString()})]})})]})},Ue=Cs;var Fr=require("zustand"),at=(0,Fr.create)(e=>({files:[],addFile:t=>e(a=>({files:[...a.files,t]})),removeFile:t=>e(a=>({files:a.files.filter(r=>r.blob!==t)}))}));var Ca=require("sonner"),mt=e=>{if(e.type.includes("image/")){if(e.size/1024/1024>20){Ca.toast.error("File size too big (max 20MB).");return}}else{Ca.toast.error("File type not supported.");return}let t=URL.createObjectURL(e),a=new FileReader;return a.readAsArrayBuffer(e),a.onloadend=()=>{let r=a.result,n=Buffer.from(r,"binary");at.getState().addFile({type:"image",blob:t,filename:e.name,content:n.toString("base64")})},t};var Ne=require("react");var $=require("react/jsx-runtime");function xs(e,t,a="."){var r=Array.isArray(e)?e:e.split(a);return[...r].reduce((n,s)=>n==null?void 0:n[s],t)}var Ds=({name:e,description:t,label:a})=>{let{basePath:r}=N(),{document:n,editDocument:s}=(0,Ne.useContext)(Ye),[i,o]=(0,Ne.useState)(!1),[l,c]=(0,Ne.useState)(!1),[u,M]=(0,Ne.useState)(!1),[m,S]=(0,Ne.useState)(!0),[y,p]=(0,Ne.useState)(!1),[g,b]=(0,Ne.useState)(""),A=xs(e,n);(0,Ne.useEffect)(()=>{let v=A==null?void 0:A.replace(`${r}/${et}`,`${r}/${gt}`);b(v||""),c(!A),o(!!A)},[A]);let P=z=>w(void 0,[z],function*({currentTarget:v}){var T,h;if((T=v.files)!=null&&T.length&&((h=v.files)==null?void 0:h[0])!==null){let V=v.files[0],F=mt(V);s(e,F)}});return(0,$.jsxs)($.Fragment,{children:[y&&(0,$.jsx)("div",{className:"p-4 mb-4 text-sm text-red-700 bg-red-100 rounded-lg dark:bg-red-200 dark:text-red-800",role:"alert",children:"The image failed to load, try submitting again."}),i&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("div",{className:"mb-1 block text-sm font-medium text-gray-900",children:t}),(0,$.jsxs)("div",{className:`w-full relative bg-slate-100 ${m?"h-48":""}`,children:[m&&(0,$.jsx)("div",{className:"animate-pulse w-full h-48 bg-slate-200 absolute"}),(0,$.jsx)("img",{src:g,className:"w-full max-h-48 object-contain",onLoad:()=>{M(!1),S(!1),p(!1)},onError:()=>{S(!1),p(!0),s(e,""),M(!1)},alt:t})]}),(0,$.jsx)("div",{className:"w-full flex justify-between mt-2",children:(0,$.jsx)(U,{variant:"destructive",onClick:()=>{s(e,""),o(!1),M(!1)},children:"Remove"})})]}),u&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(Ue,{label:`${t} URL`,name:e,id:e,defaultValue:A,inputSize:"small",helperText:"Remember to save the document after adding the image URL",onBlur:v=>{v.target.value&&(S(!0),M(!1),s(e,v.target.value))}}),(0,$.jsx)("div",{className:"w-full flex justify-between mt-2",children:(0,$.jsx)(U,{variant:"outline",onClick:()=>{M(!1),c(!0)},children:"Cancel"})})]}),l&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("span",{className:"mb-1 block text-sm font-medium text-gray-900",children:a!=null?a:"Add an image"}),(0,$.jsxs)("div",{className:"w-full flex justify-between mt-2",children:[(0,$.jsx)(U,{onClick:()=>{M(!0),c(!1),o(!1),p(!1)},type:"button",children:"From link"}),(0,$.jsx)(U,{asChild:!0,className:"hover:cursor-pointer",children:(0,$.jsx)("label",{htmlFor:`${e}-upload`,children:"From file"})}),(0,$.jsx)("input",{type:"file",accept:"image/*",id:`${e}-upload`,onChange:P,className:"hidden"})]})]})]})},xa=Ds;var Gr=D(require("camelcase")),Qr=require("react"),Gt=require("react-hook-form"),$r=D(require("react-select/creatable"));var Ie=require("react/jsx-runtime"),Hr={small:{label:"mb-1 block text-sm font-medium text-gray-900",input:"w-full rounded-lg border border-gray-300 bg-gray-50 p-2 text-sm text-gray-900 outline-none focus:border-blue-500 focus:ring-blue-500"},medium:{label:"block mb-2 text-sm font-medium text-gray-900",input:"w-full text-gray-900 bg-gray-50 rounded-lg border border-gray-300 sm:text-sm outline-none focus:ring-blue-500 focus:border-blue-500"}},hs=o=>{var l=o,{label:e,helperText:t,id:a,wrapperClass:r,inputSize:n="medium",suggestions:s=[]}=l,i=G(l,["label","helperText","id","wrapperClass","inputSize","suggestions"]);var b,A,P,v;let{control:c,getValues:u,setValue:M,formState:{errors:m}}=(0,Gt.useFormContext)(),[S,y]=(0,Qr.useState)(s),p=z=>({label:z,value:(0,Gr.default)(z)}),g=z=>{let T=p(z);y(V=>[...V,T]);let h=u(a)||[];M(a,[...h,T])};return(0,Ie.jsxs)("div",{className:r,children:[e&&(0,Ie.jsx)("label",{htmlFor:a,className:`${Hr[n].label} first-letter:capitalize`,children:e}),(0,Ie.jsx)("div",{className:"relative",children:(0,Ie.jsx)(Gt.Controller,{name:a,control:c,render:({field:z})=>(0,Ie.jsx)($r.default,d(R(d({},z),{options:S,isMulti:!0,className:m.multiSelect?"is-invalid":"",styles:{control:(T,h)=>R(d({},T),{borderColor:h.isFocused?"focus:ring-blue-500":"border-gray-300 bg-gray-50",borderRadius:"0.375rem",backgroundColor:"#f9fafb",fontSize:"0.875rem"})},classNames:{menu:()=>n==="small"?"text-sm":"text-base",control:()=>Hr[n].input,valueContainer:()=>"p-2"},onCreateOption:g,isClearable:!1}),i))})}),(0,Ie.jsx)("div",{className:"flex flex-wrap"}),(0,Ie.jsx)(Ie.Fragment,{children:(((b=m[a])==null?void 0:b.message)||t)&&(0,Ie.jsxs)("div",{className:"mt-1 first-letter:capitalize",children:[t&&(0,Ie.jsx)("p",{className:"text-xs text-gray-500",children:t}),((A=m[a])==null?void 0:A.message)&&(0,Ie.jsx)("span",{className:"text-sm text-red-500",children:(v=(P=m[a])==null?void 0:P.message)==null?void 0:v.toString()})]})})]})},Qt=hs;var Wr=require("react-hook-form");var Qe=require("react/jsx-runtime");function $t(c){var u=c,{label:e,placeholder:t="",helperText:a,id:r,type:n="text",readOnly:s=!1,registerOptions:i,wrapperClass:o}=u,l=G(u,["label","placeholder","helperText","id","type","readOnly","registerOptions","wrapperClass"]);var S,y,p;let{register:M,formState:{errors:m}}=(0,Wr.useFormContext)();return(0,Qe.jsxs)("div",{className:o,children:[e&&(0,Qe.jsx)("label",{htmlFor:r,className:"mb-1 block text-sm font-medium text-gray-900",children:e}),(0,Qe.jsx)("div",{className:"relative",children:(0,Qe.jsx)("textarea",R(d(d({},M(r,i)),l),{name:r,id:r,readOnly:s,placeholder:t,"aria-describedby":r,className:"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50"}))}),(0,Qe.jsxs)("div",{className:"mt-1",children:[a&&(0,Qe.jsx)("p",{className:"text-xs text-gray-500",children:a}),((S=m[r])==null?void 0:S.message)&&(0,Qe.jsx)("span",{className:"text-sm text-red-500",children:(p=(y=m[r])==null?void 0:y.message)==null?void 0:p.toString()})]})]})}var Da=["String","Text","Number","Tags"];function Ut(e){return e&&e.dataType==="array"&&Array.isArray(e.values)}var Wt=require("lucide-react"),Kr=require("next/navigation"),Kt=require("react"),Yr=require("react-hook-form"),Jr=require("transliteration");var x=require("react/jsx-runtime"),vs={String:{component:Ue,props:{type:"text"}},Text:{component:$t,props:{}},Number:{component:Ue,props:{type:"number"}},Tags:{component:Qt,props:{suggestions:[]}}},Us=({saveFunc:e,loading:t,registerOptions:a,showDelete:r,customFields:n={}})=>{var y,p;let{register:s,formState:{errors:i}}=(0,Yr.useFormContext)(),o=(0,Kr.useRouter)(),{document:l,editDocument:c,hasChanges:u,collection:M}=(0,Kt.useContext)(Ye),[m,S]=(0,Kt.useState)(!1);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"absolute w-full items-center justify-between flex p-4 border-t z-10 bottom-0 bg-white md:hidden",children:[(0,x.jsx)(U,{variant:"ghost",size:"icon",onClick:()=>S(!m),className:`stroke-foreground ${m?"bg-accent":""}`,children:m?(0,x.jsx)(Wt.PanelRightClose,{}):(0,x.jsx)(Wt.PanelRight,{})}),(0,x.jsxs)("div",{className:"flex flex-end w-full items-center justify-end gap-4",children:[(0,x.jsx)("label",{htmlFor:"status",className:"sr-only",children:"Status"}),(0,x.jsx)(U,{asChild:!0,variant:"select",children:(0,x.jsxs)("select",R(d({},s("status",a)),{name:"status",id:"status",defaultValue:l.status,children:[(0,x.jsx)("option",{value:"draft",children:"Draft"}),(0,x.jsx)("option",{value:"published",children:"Published"})]}))}),(0,x.jsx)(U,{onClick:e,disabled:t||!u,children:t?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("svg",{className:"mr-3 -ml-1 h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,x.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,x.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving"]}):"Save"})]})]}),(0,x.jsxs)("aside",{className:`${m?"block absolute":"hidden relative"} md:block w-full border-b border-gray-300 bg-white md:w-64 md:flex-none md:flex-col md:flex-wrap md:items-start md:justify-start md:border-b-0 md:border-l pt-6 pb-16 h-full max-h-[calc(100vh-128px)] md:max-h-[calc(100vh-53px)] scrollbar-hide overflow-scroll`,children:[(0,x.jsx)("div",{className:"relative w-full items-center justify-between mb-4 flex px-4",children:(0,x.jsx)(_r,{id:"publishedAt",label:"Date",date:l.publishedAt,setDate:g=>c("publishedAt",g)})}),(0,x.jsxs)("div",{className:"hidden md:flex relative w-full items-center justify-between mb-4 px-4",children:[(0,x.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-900",children:"Status"}),(0,x.jsx)(U,{asChild:!0,variant:"select",children:(0,x.jsxs)("select",R(d({},s("status",a)),{name:"status",id:"status",defaultValue:l.status,children:[(0,x.jsx)("option",{value:"draft",children:"Draft"}),(0,x.jsx)("option",{value:"published",children:"Published"})]}))})]}),(0,x.jsxs)("div",{className:`flex w-full pb-4 px-4 ${r?"justify-between items-center":"justify-end"}`,children:[r&&(0,x.jsx)(Ht,{disabled:t,slug:l.slug,onComplete:()=>{o.push(`/outstatic/${M}`)},collection:M,className:"hover:bg-slate-200 max-h-[2.25rem]"}),(0,x.jsx)(U,{onClick:e,disabled:t||!u,children:t?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("svg",{className:"mr-3 -ml-1 h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,x.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,x.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving"]}):"Save"})]}),(0,x.jsxs)("div",{className:"w-full",children:[(0,x.jsxs)(At,{title:"Author",children:[(0,x.jsx)(Ue,{label:"Name",name:"author.name",id:"author.name",defaultValue:(p=(y=l.author)==null?void 0:y.name)!=null?p:"",inputSize:"small",wrapperClass:"mb-4"}),(0,x.jsx)(xa,{label:"Add an avatar",name:"author.picture",description:"Author Avatar"})]}),(0,x.jsx)(At,{title:"URL Slug",children:(0,x.jsx)(Ue,{label:"Write a slug (optional)",name:"slug",id:"slug",defaultValue:l.slug,inputSize:"small",registerOptions:{onChange:g=>{let b=g.target.value.slice(-1);c("slug",b===" "||b==="-"?g.target.value:(0,Jr.slugify)(g.target.value,{allowedChars:"a-zA-Z0-9"}))}}})}),(0,x.jsx)(At,{title:"Description",children:(0,x.jsx)($t,{name:"description",type:"textarea",label:"Write a description (optional)",id:"description",rows:5,className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2 text-sm text-gray-900 outline-none focus:border-blue-500 focus:ring-blue-500"})}),(0,x.jsx)(At,{title:"Cover Image",children:(0,x.jsx)(xa,{name:"coverImage",description:"Cover Image"})}),n&&Object.entries(n).map(([g,b])=>{var P;let A=vs[b.fieldType];return Ut(b)&&(A.props.suggestions=b.values),b.fieldType==="Number"&&!b.required&&(A.props=R(d({},A.props),{registerOptions:{setValueAs:v=>isNaN(v)?void 0:Number(v)}})),(0,x.jsx)(At,{title:`${b.title}${b.required?"*":""}`,error:!!((P=i[g])!=null&&P.message),children:(0,x.jsx)(A.component,d({id:g,label:b.description},A.props))},g)})]})]})]})},ha=Us;var Zr=require("react"),Xr=require("react-hook-form"),en=D(require("react-textarea-autosize")),tn=require("transliteration");var rt=require("react/jsx-runtime");function Yt(o){var l=o,{label:e,placeholder:t="",helperText:a,id:r,readOnly:n=!1,wrapperClass:s}=l,i=G(l,["label","placeholder","helperText","id","readOnly","wrapperClass"]);var S,y,p;let{register:c,formState:{errors:u},setValue:M}=(0,Xr.useFormContext)(),{editor:m}=(0,Zr.useContext)(Ye);return(0,rt.jsxs)("div",{className:s,children:[(0,rt.jsx)("div",{className:"relative",children:(0,rt.jsx)(en.default,R(d(d({},c(r,{onChange:g=>{let b=new URL(document.location.href).pathname.split("/");(b.pop()||b.pop())==="new"&&M("slug",(0,tn.slugify)(g.target.value,{allowedChars:"a-zA-Z0-9"}))}})),i),{name:r,id:r,readOnly:n,placeholder:t,"aria-describedby":r,autoFocus:!0,onKeyDown:g=>{g.key.toLowerCase()==="enter"&&(g.preventDefault(),m.commands.focus("start"))}}))}),(0,rt.jsxs)("div",{className:"mt-1",children:[a&&(0,rt.jsx)("p",{className:"text-xs text-gray-500",children:a}),((S=u[r])==null?void 0:S.message)&&(0,rt.jsx)("span",{className:"text-sm text-red-500",children:(p=(y=u[r])==null?void 0:y.message)==null?void 0:p.toString()})]})]})}var Jt=require("@dnd-kit/core"),an=require("@dnd-kit/modifiers"),nt=require("@dnd-kit/sortable"),rn=require("@dnd-kit/utilities"),nn=require("lucide-react"),ot=D(require("react-select"));var Me=require("react/jsx-runtime"),_s=e=>{let t=c=>{c.preventDefault(),c.stopPropagation()},a=R(d({},e.innerProps),{onMouseDown:t}),{attributes:r,listeners:n,setNodeRef:s,transform:i,transition:o}=(0,nt.useSortable)({id:e.data.id});i&&(i.scaleX=1,i.scaleY=1);let l={transform:rn.CSS.Transform.toString(i),transition:o};return(0,Me.jsx)("div",R(d(d({style:l,ref:s},r),n),{children:(0,Me.jsx)(ot.components.MultiValue,R(d({},e),{innerProps:a}))}))},Ts=e=>(0,Me.jsxs)("div",{className:"flex cursor-pointer items-center pl-1",children:[(0,Me.jsx)(nn.GripVertical,{size:15}),(0,Me.jsx)(ot.components.MultiValueLabel,d({},e))]}),ws=e=>{let{setNodeRef:t}=(0,Jt.useDroppable)({id:"droppable"});return(0,Me.jsx)("div",{ref:t,children:(0,Me.jsx)(ot.components.Control,d({},e))})},Ns=e=>(0,Me.jsx)(ot.components.MultiValueContainer,d({},e)),Os=e=>(0,Me.jsx)(ot.components.MultiValueRemove,R(d({},e),{innerProps:d({onPointerDown:t=>t.stopPropagation()},e.innerProps)})),Bs=({selected:e,setSelected:t,defaultValues:a,allOptions:r,onChangeList:n,onBlur:s})=>(0,Me.jsx)(Jt.DndContext,{modifiers:[an.restrictToParentElement],onDragEnd:l=>{let{active:c,over:u}=l;!c||!u||t(M=>{let m=M.findIndex(p=>p.id===c.id),S=M.findIndex(p=>p.id===u.id),y=(0,nt.arrayMove)(M,m,S);return n(y),y})},children:(0,Me.jsx)(nt.SortableContext,{items:e,strategy:nt.rectSortingStrategy,children:(0,Me.jsx)(ot.default,{isMulti:!0,defaultValue:a,options:r,value:e,onChange:l=>{t([...l]),n(l)},components:{MultiValue:_s,MultiValueLabel:Ts,MultiValueContainer:Ns,MultiValueRemove:Os,Control:ws},isClearable:!1,escapeClearsValue:!1,closeMenuOnSelect:!1,onBlur:s,autoFocus:!0,className:"border border-gray-200 rounded-md",styles:{control:l=>R(d({},l),{border:"none",boxShadow:"none","&:hover":{border:"none"}})}})})}),on=Bs;var ln=require("change-case"),va=D(require("js-cookie")),cn=require("lucide-react"),pn=D(require("next/link")),Zt=require("react");var X=require("react/jsx-runtime"),sn=[{id:"title",label:"Title",value:"title"},{id:"status",label:"Status",value:"status"},{id:"publishedAt",label:"Published at",value:"publishedAt"}],Ls=e=>{var l;let t=Object.keys(e.documents[0]).map(c=>({id:c,label:(0,ln.sentenceCase)(c),value:c})),[a,r]=(0,Zt.useState)(e.documents),[n,s]=(0,Zt.useState)((l=JSON.parse(va.default.get(`ost_${e.collection}_fields`)||"null"))!=null?l:sn),[i,o]=(0,Zt.useState)(!1);return(0,X.jsxs)("div",{children:[(0,X.jsxs)("table",{className:"w-full text-left text-sm text-gray-500",children:[(0,X.jsx)("thead",{className:"bg-gray-50 text-xs uppercase text-gray-700 border-b",children:(0,X.jsxs)("tr",{children:[n.map(c=>(0,X.jsx)("th",{scope:"col",className:"px-6 py-3",children:c.label},c.value)),(0,X.jsx)("th",{scope:"col",className:"px-6 py-2 text-right flex justify-end items-center",children:(0,X.jsxs)(U,{variant:"ghost",size:"icon",onClick:()=>o(!i),children:[(0,X.jsx)("span",{className:"sr-only",children:"Settings"}),(0,X.jsx)(cn.Settings,{})]})})]})}),(0,X.jsx)("tbody",{children:a&&a.map(c=>(0,X.jsxs)("tr",{className:"border-b bg-white hover:bg-gray-50",children:[n.map(u=>ks(u.value,c,e.collection)),(0,X.jsx)("td",{className:"pr-6 py-4 text-right",children:(0,X.jsx)(Ht,{slug:c.slug,disabled:!1,onComplete:()=>r(a.filter(u=>u.slug!==c.slug)),collection:e.collection})})]},c.slug))})]}),i&&(0,X.jsx)("div",{className:"absolute -top-12 max-w-full min-w-min capitalize right-0",children:(0,X.jsx)(on,{selected:n,setSelected:s,allOptions:t,defaultValues:sn,onChangeList:c=>{va.default.set(`ost_${e.collection}_fields`,JSON.stringify(c))},onBlur:()=>o(!1)})})]})},ks=(e,t,a)=>{let r=t[e];switch(e){case"title":return(0,X.jsx)("th",{scope:"row",className:"relative whitespace-nowrap px-6 py-4 text-base font-semibold text-gray-900 group",children:(0,X.jsx)(pn.default,{href:`/outstatic/${a}/${t.slug}`,children:(0,X.jsxs)("div",{className:"group-hover:text-blue-500",children:[r,(0,X.jsx)("div",{className:"absolute top-0 bottom-0 left-0 right-40 cursor-pointer"})]})})},"title");default:return(0,X.jsx)("td",{className:"px-6 py-4 text-base font-semibold text-gray-900",children:typeof r=="object"&&r!==null?r.map(n=>(0,X.jsx)("span",{className:"bg-gray-100 text-gray-800 font-medium me-2 px-2.5 py-0.5 rounded",children:n.label},n.label)):r},e)}},Ua=Ls;var yn=require("react/jsx-runtime"),Vs=({onClick:e,editor:t,children:a,name:r,disabled:n=!1,attributes:s={},tag:i="button",htmlFor:o})=>{let l=i,c={};return o&&(c.htmlFor=o),(0,yn.jsx)(l,R(d({onClick:u=>{u.preventDefault(),e()},title:r,className:`group border-r border-slate-300 py-4 px-4 last-of-type:border-r-0 last-of-type:rounded-tr-md last-of-type:rounded-br-md first-of-type:rounded-tl-md first-of-type:rounded-bl-md disabled:cursor-not-allowed disabled:hover:bg-gray-600 ${t.isActive(r,s)?"is-active bg-slate-200":"bg-white text-black hover:bg-slate-100"}`,disabled:n},c),{children:a}))},k=Vs;var st=require("react"),Q=require("react/jsx-runtime"),js=({editor:e,setImageSelected:t})=>{let{removeFile:a}=at(),[r,n]=(0,st.useState)(!1),[s,i]=(0,st.useState)(""),[o,l]=(0,st.useState)(!1),[c,u]=(0,st.useState)(""),M=(0,st.useCallback)(()=>{e.chain().focus().extendMarkRange("link").setLink({href:s}).run(),(s===""||s===void 0)&&e.chain().focus().extendMarkRange("link").unsetLink().run(),n(!1),e.chain().blur().run(),i("")},[e,s]),m=(0,st.useCallback)(()=>{e.chain().focus().extendMarkRange("link").unsetLink().updateAttributes("image",{alt:c}).setLink({href:e.getAttributes("link").href}).run(),l(!1),t(!0),e.chain().blur().run(),i(""),u("")},[e,c,t]),S=()=>{let y=e.getAttributes("image").src;a(y),e.chain().focus().deleteSelection().run(),t(!1)};return(0,Q.jsxs)(Q.Fragment,{children:[o&&(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(k,{onClick:()=>{l(!1),t(!0)},editor:e,name:"back",children:(0,Q.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[(0,Q.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,Q.jsx)("path",{d:"M7.828 11H20v2H7.828l5.364 5.364-1.414 1.414L4 12l7.778-7.778 1.414 1.414z"})]})}),(0,Q.jsx)("input",{id:"alt-text",name:"alt-text",required:!0,className:"w-[500px] border-r border-black py-2 px-3 outline-none",placeholder:"Insert alt text here",onChange:y=>{u(y.target.value.trim())},onKeyDown:y=>{y.key==="Enter"&&m(),y.key==="Escape"&&(l(!1),t(!0))},defaultValue:c,autoFocus:!0}),(0,Q.jsx)(k,{onClick:m,editor:e,name:"addAltText",children:"Done"})]}),r&&(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(k,{onClick:()=>{e.isActive("image")&&t(!0),n(!1)},editor:e,name:"back",children:(0,Q.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[(0,Q.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,Q.jsx)("path",{d:"M7.828 11H20v2H7.828l5.364 5.364-1.414 1.414L4 12l7.778-7.778 1.414 1.414z"})]})}),(0,Q.jsx)("input",{id:"link",name:"link",type:"url",required:!0,className:"w-[500px] border-r border-black py-2 px-3 outline-none",placeholder:"Insert link here",onChange:y=>{i(y.target.value.trim())},onKeyDown:y=>{y.key==="Enter"&&M(),y.key==="Escape"&&n(!1)},autoFocus:!0,defaultValue:s}),(0,Q.jsx)(k,{onClick:M,editor:e,name:"submitLink",children:"Done"})]}),!o&&!r&&(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(k,{onClick:()=>{i(e.getAttributes("link").href),n(!0)},editor:e,name:"link",children:(0,Q.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[(0,Q.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,Q.jsx)("path",{d:"M18.364 15.536L16.95 14.12l1.414-1.414a5 5 0 1 0-7.071-7.071L9.879 7.05 8.464 5.636 9.88 4.222a7 7 0 0 1 9.9 9.9l-1.415 1.414zm-2.828 2.828l-1.415 1.414a7 7 0 0 1-9.9-9.9l1.415-1.414L7.05 9.88l-1.414 1.414a5 5 0 1 0 7.071 7.071l1.414-1.414 1.415 1.414zm-.708-10.607l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07z"})]})}),(0,Q.jsx)(k,{onClick:()=>{u(e.getAttributes("image").alt),l(!0)},editor:e,name:"image",attributes:e.getAttributes("image").alt?{alt:e.getAttributes("image").alt}:{alt:!1},children:"Alt Text"}),(0,Q.jsx)(k,{onClick:S,editor:e,name:"remove-image",children:"Remove Image"})]})]})},_a=js;var Xt=require("@tiptap/react"),ne=require("lucide-react"),it=require("react");var j=require("react/jsx-runtime"),zs=({editor:e})=>{let[t,a]=(0,it.useState)(!1),[r,n]=(0,it.useState)(!1),[s,i]=(0,it.useState)(""),o=(0,it.useCallback)(()=>{e.chain().focus().extendMarkRange("link").setLink({href:s}).run(),(s===""||s===void 0)&&e.chain().focus().extendMarkRange("link").unsetLink().run(),n(!1),e.chain().blur().run(),i("")},[e,s]);return(0,it.useEffect)(()=>{let l=()=>{e.isActive("image")&&a(!0)};e.on("selectionUpdate",l),e.on("focus",l)},[e]),(0,j.jsx)(Xt.BubbleMenu,{editor:e,tippyOptions:{duration:100,maxWidth:500,onHidden:()=>{a(!1),n(!1)}},shouldShow:({editor:l,view:c,state:u,from:M,to:m})=>{let{doc:S,selection:y}=u,{empty:p}=y,g=!S.textBetween(M,m).length&&(0,Xt.isTextSelection)(u.selection);return!(!c.hasFocus()||p||g||l.isActive("codeBlock"))},children:(0,j.jsxs)("div",{className:"flex prose-sm rounded-md border border-stone-200 bg-white shadow-md transition-all",children:[r&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k,{onClick:()=>{n(!1)},editor:e,name:"back",children:(0,j.jsx)(ne.ArrowLeft,{size:18})}),(0,j.jsx)("input",{id:"link",name:"link",type:"url",required:!0,className:"w-[500px] border-r border-slate-200 py-2 px-3 outline-none",placeholder:"Insert link here",onChange:l=>{i(l.target.value.trim())},onKeyDown:l=>{l.key==="Enter"&&o(),l.key==="Escape"&&n(!1)},autoFocus:!0,defaultValue:s}),(0,j.jsx)(k,{onClick:o,editor:e,name:"submitLink",children:"Done"})]}),t&&(0,j.jsx)(_a,{editor:e,setImageSelected:a}),!t&&!r&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k,{onClick:()=>e.chain().focus().toggleBold().run(),editor:e,name:"bold",children:(0,j.jsx)(ne.Bold,{size:18})}),(0,j.jsx)(k,{onClick:()=>e.chain().focus().toggleItalic().run(),editor:e,name:"italic",children:(0,j.jsx)(ne.Italic,{size:18})}),(0,j.jsx)(k,{onClick:()=>{i(e.getAttributes("link").href),n(!0)},editor:e,name:"link",children:(0,j.jsx)(ne.Link,{size:18})}),(0,j.jsx)(k,{onClick:()=>e.chain().focus().toggleCode().run(),editor:e,name:"code",children:(0,j.jsx)(ne.Terminal,{size:18})}),(0,j.jsx)(k,{onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),editor:e,name:"heading",attributes:{level:2},children:(0,j.jsx)(ne.Heading2,{size:18})}),(0,j.jsx)(k,{onClick:()=>e.chain().focus().toggleHeading({level:3}).run(),editor:e,name:"heading",attributes:{level:3},children:(0,j.jsx)(ne.Heading3,{size:18})}),(0,j.jsx)(k,{onClick:()=>e.chain().focus().toggleCodeBlock({language:"javascript"}).run(),editor:e,name:"codeBlock",children:(0,j.jsx)(ne.Code2,{size:18})}),(0,j.jsx)(k,{onClick:()=>e.chain().focus().toggleBlockquote().run(),editor:e,name:"blockquote",children:(0,j.jsx)(ne.TextQuote,{size:18})}),(0,j.jsx)(k,{onClick:()=>e.chain().focus().clearNodes().run(),editor:e,name:"clear",children:(0,j.jsx)(ne.Undo2,{size:18})})]})]})})},Ta=zs;var un=require("@tiptap/react"),Re=require("lucide-react"),dn=require("react"),ie=require("react/jsx-runtime"),qs=({editor:e})=>{let t=(0,dn.useCallback)(()=>(e.isActive("tableCell")||e.isActive("tableHeader"))&&e.view.state.selection.empty,[e]);return(0,ie.jsx)(un.BubbleMenu,{editor:e,shouldShow:t,tippyOptions:{duration:100,maxWidth:500},children:(0,ie.jsxs)("div",{className:"flex prose-sm rounded-md border border-stone-200 bg-white shadow-md transition-all",children:[(0,ie.jsx)(k,{onClick:()=>e.chain().focus().addColumnBefore().run(),editor:e,name:"Add column before",children:(0,ie.jsx)(Re.PanelLeftClose,{size:18})}),(0,ie.jsx)(k,{onClick:()=>e.chain().focus().addColumnAfter().run(),editor:e,name:"Add column after",children:(0,ie.jsx)(Re.PanelRightClose,{size:18})}),(0,ie.jsx)(k,{onClick:()=>e.chain().focus().deleteColumn().run(),editor:e,name:"Delete column",children:(0,ie.jsx)(Re.ListX,{size:18,className:"-rotate-90"})}),(0,ie.jsx)(k,{onClick:()=>e.chain().focus().addRowBefore().run(),editor:e,name:"Add row before",children:(0,ie.jsx)(Re.PanelTopCloseIcon,{size:18})}),(0,ie.jsx)(k,{onClick:()=>e.chain().focus().addRowAfter().run(),editor:e,name:"Add row after",children:(0,ie.jsx)(Re.PanelBottomClose,{size:18})}),(0,ie.jsx)(k,{onClick:()=>e.chain().focus().deleteRow().run(),editor:e,name:"Delete row",children:(0,ie.jsx)(Re.ListX,{size:18})}),(0,ie.jsx)(k,{onClick:()=>e.chain().focus().toggleHeaderRow().run(),editor:e,name:"Toggle Header row",children:(0,ie.jsx)(Re.Heading,{size:18})})]})})},Sn=qs;var bn=require("@tiptap/react"),mn=require("react-hook-form"),je=require("react/jsx-runtime"),Fs=({id:e,editor:t})=>{var s,i,o;let{watch:a,formState:{errors:r}}=(0,mn.useFormContext)(),n=a("content");return(0,je.jsxs)(je.Fragment,{children:[t&&(0,je.jsx)(Ta,{editor:t}),t&&(0,je.jsx)(Sn,{editor:t}),(0,je.jsx)(bn.EditorContent,{name:"content",value:n,editor:t}),(0,je.jsx)("div",{className:"mt-1",children:((s=r[e])==null?void 0:s.message)&&(0,je.jsx)("span",{className:"text-sm text-red-500",children:(o=(i=r[e])==null?void 0:i.message)==null?void 0:o.toString()})})]})},wa=Fs;var In=require("react/jsx-runtime"),Hs={success:"text-green-700 bg-green-100",info:"text-blue-700 bg-blue-100",error:"text-red-700 bg-red-100",warning:"text-yellow-700 bg-yellow-100"},Gs=({type:e,children:t})=>(0,In.jsx)("div",{className:`inline-block p-4 mb-4 text-sm rounded-lg ${Hs[e]}`,role:"alert",children:t}),lt=Gs;var It=D(require("react"));var Mt=require("react/jsx-runtime"),_t=It.forwardRef((r,a)=>{var n=r,{className:e}=n,t=G(n,["className"]);return(0,Mt.jsx)("div",d({ref:a,className:we("rounded-xl border bg-card text-card-foreground shadow",e)},t))});_t.displayName="Card";var Qs=It.forwardRef((r,a)=>{var n=r,{className:e}=n,t=G(n,["className"]);return(0,Mt.jsx)("div",d({ref:a,className:we("flex flex-col space-y-1.5 p-6",e)},t))});Qs.displayName="CardHeader";var $s=It.forwardRef((r,a)=>{var n=r,{className:e}=n,t=G(n,["className"]);return(0,Mt.jsx)("h3",d({ref:a,className:we("font-semibold leading-none tracking-tight",e)},t))});$s.displayName="CardTitle";var Ws=It.forwardRef((r,a)=>{var n=r,{className:e}=n,t=G(n,["className"]);return(0,Mt.jsx)("p",d({ref:a,className:we("text-sm text-muted-foreground",e)},t))});Ws.displayName="CardDescription";var Tt=It.forwardRef((r,a)=>{var n=r,{className:e}=n,t=G(n,["className"]);return(0,Mt.jsx)("div",d({ref:a,className:we("p-6 pt-0",e)},t))});Tt.displayName="CardContent";var Ks=It.forwardRef((r,a)=>{var n=r,{className:e}=n,t=G(n,["className"]);return(0,Mt.jsx)("div",d({ref:a,className:we("flex items-center p-6 pt-0",e)},t))});Ks.displayName="CardFooter";var Ys=({file:e,skip:t=!1})=>{var c;let{repoOwner:a,repoSlug:r,repoBranch:n,contentPath:s,monorepoPath:i}=N(),{session:o}=Xe();return Ft({variables:{owner:a||((c=o==null?void 0:o.user)==null?void 0:c.login)||"",name:r,filePath:`${n}:${i?i+"/":""}${s}/${e}`},fetchPolicy:"network-only",skip:t})},ct=Ys;var gn=require("@hookform/resolvers/yup"),Na=D(require("camelcase")),_e=require("react"),ea=require("react-hook-form"),pt=D(require("yup"));var I=require("react/jsx-runtime"),Mn={Text:"string",String:"string",Number:"number",Tags:"array"};function Oa({collection:e}){let{contentPath:t,monorepoPath:a,session:r,repoSlug:n,repoBranch:s,repoOwner:i,setHasChanges:o}=N(),[l]=De(),c=he(),[u,M]=(0,_e.useState)({}),m=pt.object().shape({title:pt.string().matches(/^[aA-zZ\s]+$/,"Only alphabets are allowed for this field.").required("Custom field name is required."),fieldType:pt.string().oneOf([...Da]).required(),description:pt.string(),required:pt.boolean().required()}),[S,y]=(0,_e.useState)(!1),[p,g]=(0,_e.useState)(""),b=(0,ea.useForm)({mode:"onChange",resolver:(0,gn.yupResolver)(m)}),[A,P]=(0,_e.useState)(!1),[v,z]=(0,_e.useState)(!1),[T,h]=(0,_e.useState)(!1),{data:V,loading:F}=ct({file:`${e}/schema.json`}),[C,H]=(0,_e.useState)(""),[Y,ae]=(0,_e.useState)(""),O=Ae=>w(this,[Ae],function*({customFields:_,deleteField:W=!1}){var xe;let Te=yield c(),qe=JSON.stringify({title:e,type:"object",properties:d({},_)},null,2),dt=Ve({message:`feat(${e}): ${W?"delete":"add"} ${Y} field`,owner:i||((xe=r==null?void 0:r.user)==null?void 0:xe.login)||"",oid:Te!=null?Te:"",name:n,branch:s});dt.replaceFile(`${a?a+"/":""}${t}/${e}/schema.json`,qe+`
`);let oe=dt.createInput();return yield l({variables:{input:oe}})}),le=_=>w(this,null,function*(){y(!0);let dt=_,{title:W,fieldType:Ae}=dt,Te=G(dt,["title","fieldType"]),qe=(0,Na.default)(W);if(!C&&u[qe]){b.setError("title",{type:"manual",message:"Field name is already taken."}),y(!1);return}try{u[qe]=R(d({},Te),{fieldType:Ae,dataType:Mn[Ae],title:_.title}),Mn[Ae]==="array"&&(u[qe]=R(d({},u[qe]),{values:(_==null?void 0:_.values)||[]})),(yield O({customFields:u}))&&M(d({},u))}catch(oe){g("add"),console.log({error:oe})}o(!1),H(""),P(!1),y(!1)}),Se=_=>w(this,null,function*(){h(!0);try{let W=d({},u);delete W[_],(yield O({customFields:W,deleteField:!0}))&&M(W)}catch(W){g("delete"),console.log({error:W})}H(""),z(!1),h(!1),o(!1)});return(0,_e.useEffect)(()=>{var W;let _=(W=V==null?void 0:V.repository)==null?void 0:W.object;if((_==null?void 0:_.__typename)==="Blob"){let Ae=JSON.parse((_==null?void 0:_.text)||"{}");M(Ae.properties)}},[V]),(0,_e.useEffect)(()=>{let _=b.watch(()=>o(!0));return()=>_.unsubscribe()},[b]),(0,I.jsx)(me,{title:"Add Custom Fields",children:(0,I.jsxs)(ea.FormProvider,R(d({},b),{children:[(0,I.jsxs)("div",{className:"mb-8 flex h-12 items-center",children:[(0,I.jsxs)("h1",{className:"mr-12 text-2xl",children:[(0,I.jsx)("span",{className:"capitalize",children:e})," Fields"]}),Object.keys(u).length>0?(0,I.jsx)(U,{onClick:()=>{b.reset(),P(!0)},children:"Add Custom Field"}):null]}),F?null:(0,I.jsx)(I.Fragment,{children:Object.keys(u).length===0?(0,I.jsxs)("div",{className:"max-w-2xl",children:[(0,I.jsx)("div",{className:"absolute bottom-0 left-0 md:left-64 right-0 md:top-36",children:(0,I.jsx)("svg",{fill:"none",className:"h-full w-full",xmlns:"http://www.w3.org/2000/svg",children:(0,I.jsx)("path",{d:"m1555.43 194.147c-100.14 46.518-204.72 78.763-313.64 96.841-78.16 12.972-282.29 0-291.79-143.988-1.58-23.948 1-89.4705 67-127 58-32.9805 115.15-13.36095 142.5 5.5 27.35 18.861 45.02 44.5 54 73 16.37 51.951-9.22 115.124-30.65 161.874-57.09 124.562-177.31 219.357-311.976 246.789-142.617 29.052-292.036-9.369-430.683-41.444-100.166-23.173-196.003-36.724-298.229-15.203-48.046 10.115-94.9295 24.91-139.962 44.112",className:"stroke-slate-900",strokeWidth:"2"})})}),(0,I.jsx)("div",{className:"relative",children:(0,I.jsxs)("div",{className:"mb-20 max-w-2xl p-8 px-4 md:p-8 text-black bg-white rounded-lg border border-gray-200 shadow-md prose prose-base",children:[(0,I.jsx)("h3",{children:"Add Custom Fields to your collections."}),(0,I.jsx)("p",{children:"Create your first Custom Field by clicking the button below."}),(0,I.jsx)(U,{onClick:()=>{P(!0)},children:"Add Custom Field"}),(0,I.jsxs)("p",{children:["To learn more about how Custom Fields work checkout"," ",(0,I.jsx)("a",{href:"https://outstatic.com/docs/custom-fields",target:"_blank",rel:"noreferrer",children:"the docs."}),"."]})]})})]}):(0,I.jsx)(I.Fragment,{children:(0,I.jsx)("div",{className:"max-w-5xl w-full grid grid-cols-3 gap-6",children:u&&Object.entries(u).map(([_,W])=>(0,I.jsx)(_t,{children:(0,I.jsxs)(Tt,{className:"relative flex p-6 justify-between items-center max-w-sm",children:[(0,I.jsxs)("button",{type:"button",onClick:()=>{b.reset(),H(_),P(!0)},className:"text-left",children:[(0,I.jsxs)("span",{className:"block text-xl cursor-pointer font-bold tracking-tight text-gray-900 capitalize hover:text-blue-500 mb-2",children:[W.title,(0,I.jsx)("span",{className:"absolute top-0 bottom-0 left-0 right-16"})]}),(0,I.jsx)("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded",children:W.fieldType}),W.required?(0,I.jsx)("span",{className:"bg-red-100 text-red-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded",children:"required"}):null]}),(0,I.jsxs)(U,{variant:"ghost",size:"icon",className:"z-10",type:"button",onClick:()=>{z(!0),H(_)},children:[(0,I.jsx)("span",{className:"sr-only",children:"Delete content"}),(0,I.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[(0,I.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,I.jsx)("path",{d:"M17 6h5v2h-2v13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V8H2V6h5V3a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v3zm1 2H6v12h12V8zm-9 3h2v6H9v-6zm4 0h2v6h-2v-6zM9 4v2h6V4H9z"})]})]})]})},_))})})}),p?(0,I.jsx)("div",{className:"mt-8",children:(0,I.jsx)(lt,{type:"error",children:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("span",{className:"font-medium",children:"Oops!"})," We are unable to"," ",p," your custom field."]})})}):null,A&&(0,I.jsx)(bt,{title:C?`Edit ${u[C].title}`:`Add Custom Field to ${e}`,close:()=>{o(!1),H(""),P(!1)},children:(0,I.jsxs)("form",{onSubmit:b.handleSubmit(le),children:[C?(0,I.jsx)("div",{className:"pt-6 pl-6",children:(0,I.jsx)(lt,{type:"info",children:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("span",{className:"font-medium",children:"Field name"})," and"," ",(0,I.jsx)("span",{className:"font-medium",children:"Field type"})," editing is disabled to avoid data conflicts."]})})}):null,(0,I.jsxs)("div",{className:`flex p-6 text-left gap-4 ${C?"pt-0 opacity-50 cursor-not-allowed pointer-events-none hidden":""}`,children:[(0,I.jsx)(Ue,{label:"Field name",id:"title",inputSize:"medium",className:"w-full max-w-sm md:w-80",placeholder:"Ex: Category",type:"text",helperText:"The name of the field",readOnly:!!C,autoFocus:!C,defaultValue:C?u[C].title:"",registerOptions:{onChange:_=>{ae((0,Na.default)(_.target.value))}}}),(0,I.jsxs)("div",{className:"mb-5",children:[(0,I.jsx)("label",{htmlFor:"status",className:"block mb-2 text-sm font-medium text-gray-900",children:"Field type"}),(0,I.jsx)(U,{asChild:!0,variant:"select",children:(0,I.jsx)("select",R(d({},b.register("fieldType")),{name:"fieldType",id:"fieldType",className:"block cursor-pointer appearance-none rounded-lg border border-gray-300 bg-gray-50 p-2 text-sm text-gray-900 outline-none focus:border-blue-500 focus:ring-blue-500",defaultValue:C?u[C].fieldType:"String",children:Da.map(_=>(0,I.jsx)("option",{value:_,disabled:!!C,children:_},_))}))})]})]},C),(0,I.jsxs)("div",{className:"flex px-6 text-left gap-4 mb-4",children:[(0,I.jsx)(Ue,{label:"description",id:"description",inputSize:"medium",className:"w-full max-w-sm md:w-80",placeholder:"Ex: Add a category",type:"text",helperText:"This will be the label of the field",defaultValue:C?u[C].description:""}),(0,I.jsx)("fieldset",{children:(0,I.jsxs)("div",{className:"flex mt-7",children:[(0,I.jsx)("div",{className:"flex items-center h-5",children:(0,I.jsx)("input",R(d({},b.register("required")),{id:"required",type:"checkbox",className:"cursor-pointer w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 focus:ring-2",defaultChecked:C?u[C].required:!1}))}),(0,I.jsxs)("div",{className:"ml-2 text-sm",children:[(0,I.jsx)("label",{htmlFor:"required",className:"cursor-pointer text-sm font-medium text-gray-900",children:"Required field"}),(0,I.jsxs)("p",{id:"helper-checkbox-text",className:"text-xs font-normal text-gray-500",children:[(0,I.jsx)("span",{className:"capitalize",children:e})," ","documents will only be saved if this field is not empty"]})]})]})})]}),C&&u[C].fieldType==="Tags"&&u[C].dataType==="array"?(0,I.jsx)("div",{className:"flex px-6 text-left gap-4 mb-4",children:(0,I.jsx)(Qt,{label:"Your tags",id:"values",helperText:"Deleting tags will remove them from suggestions, not from existing documents.",defaultValue:u[C].values||[],noOptionsMessage:()=>null,isClearable:!1,isSearchable:!1,components:{DropdownIndicator:()=>null,IndicatorSeparator:()=>null}})}):null,(0,I.jsxs)("div",{className:"space-x-2 rounded-b border-t p-6 text-sm text-gray-700",children:["This field will be accessible on the frontend as:","  ",(0,I.jsx)("code",{className:"bg-gray-200 font-semibold",children:C||Y})]}),(0,I.jsxs)("div",{className:"flex items-center space-x-2 rounded-b border-t p-6",children:[(0,I.jsx)(U,{type:"submit",disabled:S,children:S?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("svg",{className:"mr-3 -ml-1 h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,I.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,I.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),C?"Editing":"Adding"]}):C?"Edit":"Add"}),(0,I.jsx)(U,{type:"button",variant:"outline",onClick:()=>{o(!1),H(""),P(!1)},children:"Cancel"})]})]})}),v&&(0,I.jsxs)(bt,{title:`Delete ${u[C].title} Field`,close:()=>{z(!1),H("")},children:[(0,I.jsxs)("div",{className:"space-y-6 p-6 text-left",children:[(0,I.jsxs)("p",{className:"text-base leading-relaxed text-gray-500",children:["Are you sure you want to delete the"," ",u[C].title," field?"]}),(0,I.jsx)("p",{className:"text-base leading-relaxed text-gray-500",children:"This action cannot be undone."})]}),(0,I.jsxs)("div",{className:"flex items-center space-x-2 rounded-b border-t p-6",children:[(0,I.jsx)(U,{variant:"destructive",disabled:T,onClick:()=>{h(!0),Se(C)},children:T?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("svg",{className:"mr-3 -ml-1 h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,I.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,I.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting"]}):"Delete"}),(0,I.jsx)(U,{variant:"outline",type:"button",onClick:()=>{z(!1),H("")},children:"Cancel"})]})]})]}))})}var wt=D(require("next/link")),ta=require("react");var E=require("react/jsx-runtime");function Ba(){var A;let{repoOwner:e,collections:t,session:a,repoSlug:r,repoBranch:n,contentPath:s,monorepoPath:i,removePage:o}=N(),[l,c]=(0,ta.useState)(!1),[u,M]=(0,ta.useState)(""),[m,S]=(0,ta.useState)(!1),[y]=De(),p=he(),[g]=Tr({variables:{owner:e||((A=a==null?void 0:a.user)==null?void 0:A.login)||"",name:r,filePath:`${n}:${i?i+"/":""}${s}/metadata.json`},fetchPolicy:"network-only"}),b=P=>w(this,null,function*(){g().then(z=>w(this,[z],function*({data:v}){var T,h,V,F,C;try{let H=yield p(),Y=e||((T=a==null?void 0:a.user)==null?void 0:T.login)||"",ae=Ve({message:`feat(${P}): remove ${P}`,owner:Y,oid:H!=null?H:"",name:r,branch:n});if(ae.removeFile(`${i?i+"/":""}${s}/${P}`),((V=(h=v==null?void 0:v.repository)==null?void 0:h.object)==null?void 0:V.__typename)==="Blob"){let le=JSON.parse((F=v.repository.object.text)!=null?F:"{}");le.generated=new Date().toISOString(),le.commit=Ge(v.repository.object.commitUrl);let Se=((C=le.metadata)!=null?C:[]).filter(_=>_.collection!==P);ae.replaceFile(`${i?i+"/":""}${s}/metadata.json`,tt(R(d({},le),{metadata:Se})))}let O=ae.createInput();yield y({variables:{input:O}}),c(!1),S(!1),o(P)}catch(H){}}))});return(0,E.jsxs)(me,{title:"Collections",children:[t.length===0?(0,E.jsxs)("div",{className:"max-w-2xl",children:[(0,E.jsx)("div",{className:"absolute bottom-0 left-0 md:left-64 right-0 md:top-36",children:(0,E.jsx)("svg",{fill:"none",className:"h-full w-full",xmlns:"http://www.w3.org/2000/svg",children:(0,E.jsx)("path",{d:"m1555.43 194.147c-100.14 46.518-204.72 78.763-313.64 96.841-78.16 12.972-282.29 0-291.79-143.988-1.58-23.948 1-89.4705 67-127 58-32.9805 115.15-13.36095 142.5 5.5 27.35 18.861 45.02 44.5 54 73 16.37 51.951-9.22 115.124-30.65 161.874-57.09 124.562-177.31 219.357-311.976 246.789-142.617 29.052-292.036-9.369-430.683-41.444-100.166-23.173-196.003-36.724-298.229-15.203-48.046 10.115-94.9295 24.91-139.962 44.112",className:"stroke-slate-900",strokeWidth:"2"})})}),(0,E.jsxs)("div",{className:"relative",children:[(0,E.jsx)("div",{className:"mb-8 flex h-12 items-center",children:(0,E.jsx)("h1",{className:"mr-12 text-2xl",children:"Welcome to Outstatic!"})}),(0,E.jsxs)("div",{className:"mb-20 max-w-2xl p-8 px-4 md:p-8 text-black bg-white rounded-lg border border-gray-200 shadow-md prose prose-base",children:[(0,E.jsx)("p",{children:"To get started you will need to create a new Collection. Collections are the main building block of your Outstatic website."}),(0,E.jsx)("p",{children:"Create your first Collection by clicking the button below."}),(0,E.jsx)(wt.default,{href:"/outstatic/collections/new",children:(0,E.jsx)("div",{className:"inline-block rounded-lg border px-5 py-2.5 text-sm font-medium focus:outline-none focus:ring-4 border-gray-600 bg-gray-800 text-white hover:border-gray-600 hover:bg-gray-700 focus:ring-gray-700 no-underline",children:"New Collection"})}),(0,E.jsxs)("p",{children:["To learn more about how Collections work"," ",(0,E.jsx)("a",{href:"https://outstatic.com/docs/introduction#what-are-collections",target:"_blank",rel:"noreferrer",children:"click here"}),"."]})]})]})]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:"mb-8 flex h-12 items-center",children:[(0,E.jsx)("h1",{className:"mr-12 text-2xl",children:"Collections"}),(0,E.jsx)(U,{asChild:!0,children:(0,E.jsx)(wt.default,{href:"/outstatic/collections/new",children:"New Collection"})})]}),(0,E.jsx)("div",{className:"max-w-5xl w-full grid md:grid-cols-3 gap-6",children:t.map(P=>(0,E.jsx)(_t,{children:(0,E.jsxs)(Tt,{className:"relative flex p-6 justify-between items-center",children:[(0,E.jsx)(wt.default,{href:`/outstatic/${P}`,className:"focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg",children:(0,E.jsxs)("h5",{className:"text-2xl cursor-pointer font-bold tracking-tight text-gray-900 capitalize hover:text-blue-500",children:[P,(0,E.jsx)("span",{className:"absolute top-0 bottom-0 left-0 right-16"})]})}),(0,E.jsxs)("div",{className:"z-10 flex gap-2",children:[(0,E.jsx)(U,{asChild:!0,size:"icon",variant:"ghost",children:(0,E.jsxs)(wt.default,{href:`/outstatic/collections/${P}`,children:[(0,E.jsx)("span",{className:"sr-only",children:"Edit collection"}),(0,E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[(0,E.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,E.jsx)("path",{d:"M15.7279 9.57629L14.3137 8.16207L5 17.4758V18.89H6.41421L15.7279 9.57629ZM17.1421 8.16207L18.5563 6.74786L17.1421 5.33365L15.7279 6.74786L17.1421 8.16207ZM7.24264 20.89H3V16.6474L16.435 3.21233C16.8256 2.8218 17.4587 2.8218 17.8492 3.21233L20.6777 6.04075C21.0682 6.43128 21.0682 7.06444 20.6777 7.45497L7.24264 20.89Z"})]})]})}),(0,E.jsxs)(U,{size:"icon",variant:"ghost",type:"button",onClick:()=>{c(!0),M(P)},children:[(0,E.jsx)("span",{className:"sr-only",children:"Delete content"}),(0,E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[(0,E.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,E.jsx)("path",{d:"M17 6h5v2h-2v13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V8H2V6h5V3a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v3zm1 2H6v12h12V8zm-9 3h2v6H9v-6zm4 0h2v6h-2v-6zM9 4v2h6V4H9z"})]})]})]})]})},P))})]}),l&&(0,E.jsxs)(bt,{title:"Delete Collection",close:()=>{c(!1),M("")},children:[(0,E.jsxs)("div",{className:"space-y-6 p-6 text-left",children:[(0,E.jsx)("p",{className:"text-base leading-relaxed text-gray-500",children:"Are you sure you want to delete this collection?"}),(0,E.jsx)("p",{className:"text-base leading-relaxed text-gray-500",children:"This action cannot be undone."})]}),(0,E.jsxs)("div",{className:"flex items-center space-x-2 rounded-b border-t p-6",children:[(0,E.jsx)(U,{variant:"destructive",onClick:()=>{S(!0),b(u)},children:m?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("svg",{className:"mr-3 -ml-1 h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,E.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,E.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting"]}):"Delete"}),(0,E.jsx)(U,{variant:"outline",onClick:()=>{c(!1),M("")},children:"Cancel"})]})]})]})}var An=(e,t,a)=>{let r={};Object.entries(e).forEach(([l,c])=>{isNaN(new Date(c).getMonth())||(r[l]=l===t?a:c)});let n=JSON.parse(JSON.stringify(e)),s=t.split("."),i=s.pop(),o=s.reduce((l,c)=>l[c],n);try{o[i]!==void 0&&(o[i]=a)}catch(l){console.log(`Key ${t} not found`)}return d(d({},n),r)};var La=()=>{let e=new Date().valueOf()-new Date().getTimezoneOffset()*6e3;return new Date(e)};var Rn=(e,t="")=>{let a=new RegExp(`(\\!\\[[^\\]]*\\]\\()${t}/${et.replace(/\//g,"\\/")}([^)]+)`,"g");return e.replace(a,`$1${t}/${gt}$2`)};var fn=D(require("gray-matter")),En=require("react");var Pn=({collection:e,methods:t,slug:a,editor:r,session:n,setHasChanges:s,setShowDelete:i})=>{let{basePath:o}=N(),{data:l}=ct({file:`${e}/${a}.md`,skip:a==="new"||!a});(0,En.useEffect)(()=>{var M,m,S;let c=(M=l==null?void 0:l.repository)==null?void 0:M.object;if((c==null?void 0:c.__typename)==="Blob"){let y=c.text,{data:p,content:g}=(0,fn.default)(y),b=Rn(g,o),A=p.publishedAt?new Date(p.publishedAt):La(),P=R(d({},p),{publishedAt:A,content:b,slug:a});t.reset(P),r.commands.setContent(b),r.commands.focus("start"),i(a!=="new")}else if(a){let y=t.getValues();t.reset(R(d({},y),{author:{name:(m=n==null?void 0:n.user.name)!=null?m:"",picture:(S=n==null?void 0:n.user.image)!=null?S:""},coverImage:"",publishedAt:a==="new"?La():y.publishedAt}))}let u=t.watch(()=>s(!0));return()=>u.unsubscribe()},[l,t,a,r,n])};function Cn(e){throw new Error("Reached a code that should be unreachable. This can happen, when a TS type is incorrectly defined.")}var ka=D(require("dompurify"));function Js(e,t=""){let a=new RegExp(`!\\[([^\\]]*?)\\]\\((${t}/${gt})([^\\)]+?)\\)`,"g");return e.replace(a,(n,s,i,o)=>`![${s}](${t}/${et}${o})`)}var xn=Js;var Dn=(e,t)=>{let a=Object.entries((l=>{var c=l,{content:s,publishedAt:i}=c,o=G(c,["content","publishedAt"]);return o})(e));e.publishedAt&&a.push(["publishedAt",e.publishedAt.toISOString()]);let r=`---
`;Object.entries(a).forEach(([s,i])=>{Array.isArray(i[1])?r+=`${i[0]}: ${JSON.stringify(i[1])}
`:i[1]instanceof Object?(r+=`${i[0]}:
`,Object.entries(i[1]).forEach(([o,l])=>{r+=`  ${o}: '${ka.default.sanitize(l).replaceAll("'","''")}'
`})):r+=`${i[0]}: '${ka.default.sanitize(i[1]).replaceAll("'","''")}'
`}),r+=`---

`;let n=xn(e.content,t);return r+=n,r};var hn=D(require("gray-matter")),vn=D(require("imurmurhash")),Un=require("react");function Zs({session:e,slug:t,setSlug:a,setShowDelete:r,setLoading:n,files:s,methods:i,collection:o,customFields:l,setCustomFields:c,setHasChanges:u,editor:M}){let[m]=De(),{repoOwner:S,repoSlug:y,repoBranch:p,contentPath:g,monorepoPath:b,basePath:A}=N(),P=he(),{data:v}=ct({file:"metadata.json"});return(0,Un.useCallback)(T=>w(this,null,function*(){var h,V,F,C,H;n(!0);try{let Y=i.getValues(),ae=M.storage.markdown.getMarkdown(),O=Dn(R(d({},T),{content:ae}),A),le=yield P(),Se=S||((h=e==null?void 0:e.user)==null?void 0:h.login)||"",_=Y.slug,W=t!==_&&t!=="new"?t:void 0,Ae=Ve({message:W?`chore: Updates ${_} formerly ${W}`:`chore: Updates/Creates ${_}`,owner:Se,oid:le!=null?le:"",name:y,branch:p});W&&Ae.removeFile(`${b?b+"/":""}${g}/${o}/${W}.md`),s.length>0&&s.forEach(({filename:oe,blob:xe,type:We,content:Ke})=>{if(xe&&O.search(xe)!==-1){let Dt=window.btoa(Math.random().toString()).substring(10,6),ua=oe.toLowerCase().replace(/[^a-zA-Z0-9-_\.]/g,"-").replace(/(\.[^\.]*)?$/,`-${Dt}$1`),Bt=(()=>{switch(We){case"image":return et;default:Cn(We)}})();Ae.replaceFile(`${b?b+"/":""}public/${Bt}${ua}`,Ke,!1),O=O.replace(xe,`${A}/${Bt}${ua}`)}});let{data:Te}=(0,hn.default)(O);Ae.replaceFile(`${b?b+"/":""}${g}/${o}/${_}.md`,O);let qe=!1;if(Object.entries(l).forEach(([oe,xe])=>{let We=l[oe],Ke=T[oe];if(Ut(xe)&&Ut(We)){if(!Array.isArray(Ke)){Te[oe]=[];return}Ke.forEach(Dt=>{xe.values.some(Bt=>Bt.value===Dt.value)||(We.values.push({value:Dt.value,label:Dt.label}),l[oe]=We,c(d({},l)),qe=!0)})}}),qe){let oe=JSON.stringify({title:o,type:"object",properties:d({},l)},null,2);Ae.replaceFile(`${b?b+"/":""}${g}/${o}/schema.json`,oe+`
`)}if(((F=(V=v==null?void 0:v.repository)==null?void 0:V.object)==null?void 0:F.__typename)==="Blob"){let oe=JSON.parse((C=v.repository.object.text)!=null?C:"{}");oe.generated=new Date().toISOString(),oe.commit=Ge(v.repository.object.commitUrl);let xe=((H=oe.metadata)!=null?H:[]).filter(Ke=>!(Ke.collection===o&&(Ke.slug===W||Ke.slug===_))),We=(0,vn.default)(O);xe.push(R(d({},Te),{title:Te.title,publishedAt:Te.publishedAt,status:Te.status,slug:_,collection:o,__outstatic:{hash:`${We.result()}`,commit:oe.commit,path:`${g}/${o}/${_}.md`}})),Ae.replaceFile(`${b?b+"/":""}${g}/metadata.json`,tt(R(d({},oe),{metadata:xe})))}let dt=Ae.createInput();yield m({variables:{input:dt}}),n(!1),u(!1),a(_),r(!0)}catch(Y){n(!1),console.log({error:Y})}}),[S,e,t,a,r,n,s,m,P,i,b,g,o,l,c,y,p,v,u,M])}var _n=Zs;var Kn=require("@tiptap/core"),Yn=D(require("@tiptap/extension-code-block-lowlight")),Jn=D(require("@tiptap/extension-highlight")),Zn=D(require("@tiptap/extension-horizontal-rule")),Xn=D(require("@tiptap/extension-image")),eo=D(require("@tiptap/extension-link")),to=D(require("@tiptap/extension-table")),ao=D(require("@tiptap/extension-table-cell")),ro=D(require("@tiptap/extension-table-header")),no=D(require("@tiptap/extension-table-row")),oo=D(require("@tiptap/extension-underline")),so=require("@tiptap/react"),io=D(require("@tiptap/starter-kit")),lo=D(require("lowlight")),co=require("tiptap-markdown");var aa=require("@tiptap/react"),ze=require("react/jsx-runtime"),Xs=({node:{attrs:{language:e}},updateAttributes:t,extension:a})=>(0,ze.jsxs)(aa.NodeViewWrapper,{className:"relative",children:[(0,ze.jsx)("div",{className:"absolute top-0 right-6 rounded-b-md border border-t-0 border-gray-600 px-3 py-1",children:(0,ze.jsxs)("select",{contentEditable:!1,defaultValue:e,className:"select-none bg-gradient-to-tr from-primary-300 to-primary-400 bg-clip-text font-medium text-white outline-none text-sm",onChange:r=>t({language:r.target.value}),children:[(0,ze.jsx)("option",{value:"null",children:"auto"}),(0,ze.jsx)("option",{disabled:!0,children:"\u2014"}),a.options.lowlight.listLanguages().map((r,n)=>(0,ze.jsx)("option",{value:r,children:r},n))]})}),(0,ze.jsx)("pre",{className:"text-white bg-slate-900 rounded-md p-4 pt-12",children:(0,ze.jsx)(aa.NodeViewContent,{as:"code"})})]}),Tn=Xs;var qn=require("@tiptap/core"),Fn=require("@tiptap/react"),Hn=D(require("@tiptap/suggestion")),ja=require("react"),Gn=D(require("tippy.js"));var wn=require("ai/react"),Oe=require("react"),Nn=require("sonner");var Nt=(e,{chars:t,offset:a=0})=>e.state.doc.textBetween(Math.max(0,e.state.selection.from-t),e.state.selection.from-a,`
`);var fe=require("react/jsx-runtime"),On=({items:e,command:t,setImageMenu:a,setVideoMenu:r,editor:n,range:s})=>{let[i,o]=(0,Oe.useState)(0),{hasOpenAIKey:l}=N(),{complete:c,isLoading:u}=(0,wn.useCompletion)({id:"outstatic",api:"/api/outstatic/generate",onResponse:()=>{n.chain().focus().deleteRange(s).run()},onFinish:(S,y)=>{n.commands.setTextSelection({from:s.from,to:s.from+y.length})},onError:S=>{Nn.toast.error(S.message)}}),M=(0,Oe.useCallback)(S=>{let y=e[S];if(y)if(y.title==="Continue writing"){if(u)return;c(Nt(n,{chars:5e3,offset:1}))}else y.title==="Image"?a(!0):y.title==="Video"?r(!0):t(y)},[c,u,t,n,e]);(0,Oe.useEffect)(()=>{let S=["ArrowUp","ArrowDown","Enter"],y=p=>{if(S.includes(p.key))return p.preventDefault(),p.key==="ArrowUp"?(o((i+e.length-1)%e.length),!0):p.key==="ArrowDown"?(o((i+1)%e.length),!0):p.key==="Enter"?(M(i),!0):!1};return document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}},[e,M,i]),(0,Oe.useEffect)(()=>{o(0)},[e]);let m=(0,Oe.useRef)(null);return(0,Oe.useLayoutEffect)(()=>{let S=m==null?void 0:m.current,y=S==null?void 0:S.children[i];y&&S&&ft(S,y)},[i]),e.length>0?(0,fe.jsx)("div",{id:"outstatic",children:(0,fe.jsx)("div",{id:"slash-command",ref:m,className:"z-50 h-auto max-h-[330px] w-72 overflow-y-auto rounded-md border border-stone-200 bg-white px-1 py-2 shadow-md transition-all",children:e.map((S,y)=>S.title==="Continue writing"&&!l?null:(0,fe.jsxs)("button",{className:`flex w-full items-center space-x-2 rounded-md px-2 py-1 text-left text-sm text-stone-900 hover:bg-stone-100 ${y===i?"bg-stone-100 text-stone-900":""}`,onClick:()=>M(y),children:[(0,fe.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-md border border-stone-200 bg-white",children:S.title==="Continue writing"&&u?(0,fe.jsx)("div",{children:(0,fe.jsxs)("svg",{className:"h-6 animate-spin text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"18",children:[(0,fe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,fe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):S.icon}),(0,fe.jsxs)("div",{children:[(0,fe.jsx)("p",{className:"font-medium",children:S.title}),(0,fe.jsx)("p",{className:"text-xs text-stone-500",children:S.description})]})]},y))})}):null};var ra=require("lucide-react"),Ee=require("react");var pe=require("react/jsx-runtime"),ei=e=>{try{return!!new URL(e)}catch(t){return!1}},Et=[{title:"Image Upload",description:"Upload or embed with a link.",searchTerms:["upload","picture","media"],icon:(0,pe.jsx)(ra.Upload,{size:18})},{title:"Image from URL",description:"Upload or embed with a link.",searchTerms:["photo","picture","media"],icon:(0,pe.jsx)(ra.Link,{size:18})}],ti=({editor:e,range:t,setImageMenu:a})=>{let[r,n]=(0,Ee.useState)(!1),[s,i]=(0,Ee.useState)(""),[o,l]=(0,Ee.useState)({imageUrl:"",uploadImage:""}),[c,u]=(0,Ee.useState)(0),M=()=>w(void 0,null,function*(){e.chain().focus().deleteRange(t).run();let p=document.createElement("input");p.type="file",p.accept="image/*",p.onchange=()=>w(void 0,null,function*(){var g;if((g=p.files)!=null&&g.length){let b=p.files[0],A=mt(b);A&&e.chain().focus().setImage({src:A,alt:""}).run()}}),p.click()}),m=p=>{i(p.target.value)},S=()=>{if(!ei(s))return l(p=>R(d({},p),{imageUrl:"Invalid URL"})),null;s&&(e.chain().focus().deleteRange(t).run(),e.chain().focus().setImage({src:s,alt:"",title:""}).insertContent("").run(),e.chain().blur().run()),n(!1)};(0,Ee.useEffect)(()=>{let p=["ArrowUp","ArrowDown","Enter","Escape"],g=b=>{if(p.includes(b.key))return b.preventDefault(),b.key==="ArrowUp"?(u((c+Et.length-1)%Et.length),!0):b.key==="ArrowDown"?(u((c+1)%Et.length),!0):b.key==="Enter"?(Et[c].title==="Image Upload"?M():r?S():n(!0),!0):b.key==="Escape"?(r?n(!1):(a(!1),e.chain().focus().run()),!0):!1};return document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}},[c,r]),(0,Ee.useEffect)(()=>{e.chain().blur().run()},[]),(0,Ee.useEffect)(()=>{u(0)},[Et]);let y=(0,Ee.useRef)(null);return(0,Ee.useLayoutEffect)(()=>{let p=y==null?void 0:y.current,g=p==null?void 0:p.children[c];g&&p&&ft(p,g)},[c]),(0,pe.jsx)("div",{id:"outstatic",children:r?(0,pe.jsxs)("div",{className:"flex w-[500px] rounded-sm border border-black outline-none",children:[(0,pe.jsxs)("div",{className:"relative w-[500px] border-r outline-none border-black",children:[(0,pe.jsx)("input",{type:"text",className:`w-full h-full py-2 px-3 outline-none ${o.imageUrl?"bg-red-50":"bg-white"}`,placeholder:"Insert link here",onChange:m,value:s,onFocus:()=>l(R(d({},o),{imageUrl:""})),autoFocus:!0}),o.imageUrl&&(0,pe.jsx)("span",{className:"absolute text-red-500 top-10 left-0",children:o.imageUrl})]}),(0,pe.jsx)(k,{onClick:S,editor:e,name:"back",children:"Done"})]}):(0,pe.jsx)("div",{id:"slash-command",ref:y,className:"z-50 h-auto max-h-[330px] w-72 overflow-y-auto rounded-md border border-stone-200 bg-white px-1 py-2 shadow-md transition-all",children:Et.map((p,g)=>(0,pe.jsxs)("button",{className:`flex w-full items-center space-x-2 rounded-md px-2 py-1 text-left text-sm text-stone-900 hover:bg-stone-100 ${g===c?"bg-stone-100 text-stone-900":""}`,onClick:()=>p.title==="Image Upload"?M():n(!0),onKeyDown:b=>{b.key==="Enter"&&(p.title==="Image Upload"?M():n(!0))},children:[(0,pe.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-md border border-stone-200 bg-white",children:p.icon}),(0,pe.jsxs)("div",{children:[(0,pe.jsx)("p",{className:"font-medium",children:p.title}),(0,pe.jsx)("p",{className:"text-xs text-stone-500",children:p.description})]})]},g))})})},Bn=ti;var na=require("lucide-react"),Pe=require("react");var Va=require("sonner");function Ln(e){if(e.type.includes("video/")){if(e.size/1024/1024>50){Va.toast.error("File size too big (max 50MB).");return}}else{Va.toast.error("File type not supported.");return}let t=URL.createObjectURL(e),a=new FileReader;return a.readAsArrayBuffer(e),a.onloadend=()=>{let r=a.result,n=Buffer.from(r,"binary");at.getState().addFile({type:"video",blob:t,filename:e.name,content:n.toString("base64")})},t}function kn(e){return new Promise((t,a)=>{let r=document.createElement("video");r.src=e,r.muted=!0,r.addEventListener("loadedmetadata",()=>{r.currentTime=0,r.addEventListener("seeked",()=>{let n=document.createElement("canvas");n.width=r.videoWidth,n.height=r.videoHeight,n.getContext("2d").drawImage(r,0,0,n.width,n.height);let i=n.toDataURL("image/png");t(i)}),r.addEventListener("error",n=>{a(n)})}),r.addEventListener("error",n=>{a(n)})})}var ye=require("react/jsx-runtime"),ai=e=>{try{return!!new URL(e)}catch(t){return!1}},Pt=[{title:"Video Upload",description:"Upload or embed with a link.",searchTerms:["upload","video","media"],icon:(0,ye.jsx)(na.Upload,{size:18})},{title:"Video from URL",description:"Upload or embed with a link.",searchTerms:["video","media"],icon:(0,ye.jsx)(na.Link,{size:18})}],ri=({editor:e,range:t,setVideoMenu:a})=>{let[r,n]=(0,Pe.useState)(!1),[s,i]=(0,Pe.useState)(""),[o,l]=(0,Pe.useState)({videoUrl:"",uploadVideo:""}),[c,u]=(0,Pe.useState)(0),M=()=>w(void 0,null,function*(){e.chain().focus().deleteRange(t).run();let p=document.createElement("input");p.type="file",p.accept="video/mp4,video/x-m4v,video/*",p.onchange=()=>w(void 0,null,function*(){var g;if((g=p.files)!=null&&g.length){let b=p.files[0],A=Ln(b),P=yield kn(A);A&&e.chain().focus().setImage({src:P,alt:""}).run()}}),p.click()}),m=p=>{i(p.target.value)},S=()=>{if(!ai(s))return l(p=>R(d({},p),{videoUrl:"Invalid URL"})),null;s&&(e.chain().focus().deleteRange(t).run(),e.chain().focus().insertContent("").run(),e.chain().blur().run()),n(!1)};(0,Pe.useEffect)(()=>{let p=["ArrowUp","ArrowDown","Enter","Escape"],g=b=>{if(p.includes(b.key))return b.preventDefault(),b.key==="ArrowUp"?(u((c+Pt.length-1)%Pt.length),!0):b.key==="ArrowDown"?(u((c+1)%Pt.length),!0):b.key==="Enter"?(Pt[c].title==="Video Upload"?M():r?S():n(!0),!0):b.key==="Escape"?(r?n(!1):(a(!1),e.chain().focus().run()),!0):!1};return document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}},[c,r]),(0,Pe.useEffect)(()=>{e.chain().blur().run()},[]),(0,Pe.useEffect)(()=>{u(0)},[Pt]);let y=(0,Pe.useRef)(null);return(0,Pe.useLayoutEffect)(()=>{let p=y==null?void 0:y.current,g=p==null?void 0:p.children[c];g&&p&&ft(p,g)},[c]),(0,ye.jsx)("div",{id:"outstatic",children:r?(0,ye.jsxs)("div",{className:"flex w-[500px] rounded-sm border border-black outline-none",children:[(0,ye.jsxs)("div",{className:"relative w-[500px] border-r outline-none border-black",children:[(0,ye.jsx)("input",{type:"text",className:`w-full h-full py-2 px-3 outline-none ${o.videoUrl?"bg-red-50":"bg-white"}`,placeholder:"Insert link here",onChange:m,value:s,onFocus:()=>l(R(d({},o),{videoUrl:""})),autoFocus:!0}),o.videoUrl&&(0,ye.jsx)("span",{className:"absolute text-red-500 top-10 left-0",children:o.videoUrl})]}),(0,ye.jsx)(k,{onClick:S,editor:e,name:"back",children:"Done"})]}):(0,ye.jsx)("div",{id:"slash-command",ref:y,className:"z-50 h-auto max-h-[330px] w-72 overflow-y-auto rounded-md border border-stone-200 bg-white px-1 py-2 shadow-md transition-all",children:Pt.map((p,g)=>(0,ye.jsxs)("button",{className:`flex w-full items-center space-x-2 rounded-md px-2 py-1 text-left text-sm text-stone-900 hover:bg-stone-100 ${g===c?"bg-stone-100 text-stone-900":""}`,onClick:()=>p.title==="Video Upload"?M():n(!0),onKeyDown:b=>{b.key==="Enter"&&(p.title==="Video Upload"?M():n(!0))},children:[(0,ye.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-md border border-stone-200 bg-white",children:p.icon}),(0,ye.jsxs)("div",{children:[(0,ye.jsx)("p",{className:"font-medium",children:p.title}),(0,ye.jsx)("p",{className:"text-xs text-stone-500",children:p.description})]})]},g))})})},Vn=ri;var K=require("lucide-react"),ge=require("react/jsx-runtime"),jn=[{title:"Continue writing",description:"Use AI to expand your thoughts.",icon:(0,ge.jsx)(K.Edit3,{size:18})},{title:"Text",description:"Just start typing with plain text.",searchTerms:["p","paragraph"],icon:(0,ge.jsx)(K.Text,{size:18}),command:({editor:e,range:t})=>{e.chain().focus().deleteRange(t).toggleNode("paragraph","paragraph").run()}},{title:"Heading 1",description:"Big section heading.",searchTerms:["title","big","large","h1"],icon:(0,ge.jsx)(K.Heading1,{size:18}),command:({editor:e,range:t})=>{e.chain().focus().deleteRange(t).setNode("heading",{level:1}).run()}},{title:"Heading 2",description:"Medium section heading.",searchTerms:["subtitle","medium","h2"],icon:(0,ge.jsx)(K.Heading2,{size:18}),command:({editor:e,range:t})=>{e.chain().focus().deleteRange(t).setNode("heading",{level:2}).run()}},{title:"Heading 3",description:"Small section heading.",searchTerms:["subtitle","small","h3"],icon:(0,ge.jsx)(K.Heading3,{size:18}),command:({editor:e,range:t})=>{e.chain().focus().deleteRange(t).setNode("heading",{level:3}).run()}},{title:"Bullet List",description:"Create a simple bullet list.",searchTerms:["unordered","point"],icon:(0,ge.jsx)(K.List,{size:18}),command:({editor:e,range:t})=>{e.chain().focus().deleteRange(t).toggleBulletList().run()}},{title:"Numbered List",description:"Create a list with numbering.",searchTerms:["ordered"],icon:(0,ge.jsx)(K.ListOrdered,{size:18}),command:({editor:e,range:t})=>{e.chain().focus().deleteRange(t).toggleOrderedList().run()}},{title:"Quote",description:"Capture a quote.",searchTerms:["blockquote"],icon:(0,ge.jsx)(K.TextQuote,{size:18}),command:({editor:e,range:t})=>e.chain().focus().deleteRange(t).toggleNode("paragraph","paragraph").toggleBlockquote().run()},{title:"Code",description:"Capture a code snippet.",searchTerms:["codeblock"],icon:(0,ge.jsx)(K.Code,{size:18}),command:({editor:e,range:t})=>e.chain().focus().deleteRange(t).toggleCodeBlock().run()},{title:"Image",description:"Upload or embed with a link.",searchTerms:["photo","picture","media"],icon:(0,ge.jsx)(K.Image,{size:18})},{title:"Video",description:"Upload or embed with a link.",searchTerms:["video","media"],icon:(0,ge.jsx)(K.PlaySquare,{size:18})},{title:"YouTube Embed",description:"Embed a YouTube video.",searchTerms:["video","youtube","media"],icon:(0,ge.jsx)(K.Youtube,{size:18})},{title:"Table",description:"Insert a table.",searchTerms:["table","cell","row"],icon:(0,ge.jsx)(K.TableIcon,{size:18}),command:({editor:e,range:t})=>{e.chain().focus().deleteRange(t).insertTable({rows:3,cols:3,withHeaderRow:!0}).run()}}],ni=(e,t)=>e.filter(a=>{let r=a.title.toLowerCase().includes(t),n=a.description.toLowerCase().includes(t),s=a.searchTerms&&a.searchTerms.some(i=>i.includes(t));return!!(r||n||s)}),zn=e=>{let{query:t}=e;if(typeof t!="string"||t.length===0)return jn;let a=t.toLowerCase();return ni(jn,a)};var oa=require("react/jsx-runtime"),oi=qn.Extension.create({name:"slash-command",addOptions(){return{suggestion:{char:"/",command:({editor:e,range:t,props:a})=>{a.command({editor:e,range:t})}}}},addProseMirrorPlugins(){return[(0,Hn.default)(d({editor:this.editor},this.options.suggestion))]}}),ft=(e,t)=>{let a=e.offsetHeight,r=t?t.offsetHeight:0,n=t.offsetTop,s=n+r;n<e.scrollTop?e.scrollTop-=e.scrollTop-n+5:s>a+e.scrollTop&&(e.scrollTop+=s-a-e.scrollTop+5)},si=({items:e,command:t,editor:a,range:r})=>{let[n,s]=(0,ja.useState)(!1),[i,o]=(0,ja.useState)(!1);return e.length>0?n?(0,oa.jsx)(Bn,{editor:a,setImageMenu:s,range:r}):i?(0,oa.jsx)(Vn,{editor:a,setVideoMenu:o,range:r}):(0,oa.jsx)(On,{items:e,command:t,setImageMenu:s,setVideoMenu:o,editor:a,range:r}):null},ii=()=>{let e=null,t=null;return{onStart:a=>{e=new Fn.ReactRenderer(si,{props:a,editor:a.editor}),t=(0,Gn.default)("body",{getReferenceClientRect:a.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"})},onUpdate:a=>{e==null||e.updateProps(a),t&&t[0].setProps({getReferenceClientRect:a.clientRect})},onKeyDown:a=>{var r;return a.event.key==="Escape"?(t==null||t[0].hide(),!0):(r=e==null?void 0:e.ref)==null?void 0:r.onKeyDown(a)},onExit:()=>{var a;(a=t==null?void 0:t[0])==null||a.destroy(),e==null||e.destroy()}}},li=oi.configure({suggestion:{items:zn,render:ii}}),Qn=li;var $n=require("@tiptap/core");var ci=e=>({tr:t,state:a})=>{let{selection:r}=a,{$anchor:n}=r,s=n.node(n.depth);if(!s||s.isText)return!1;let i=s.attrs.class||"",o=i.split(" "),l=o.includes(e),c;l?c=o.filter(M=>M!==e).join(" "):c=`${i} ${e}`.trim();let u=R(d({},s.attrs),{class:c});return t.setNodeMarkup(n.before(n.depth),null,u),!0},Wn=$n.Extension.create({name:"toggleClass",addGlobalAttributes(){return[{types:["heading","paragraph"],attributes:{class:{default:"",renderHTML:e=>({class:`${e.class}`})}}}]},addCommands(){return{toggleClass:e=>({commands:t})=>t.command(ci(e))}}});var po=[io.default.configure({bulletList:{HTMLAttributes:{class:"list-disc list-outside leading-3 -mt-2"}},orderedList:{HTMLAttributes:{class:"list-decimal list-outside leading-3 -mt-2"}},listItem:{HTMLAttributes:{class:"leading-normal -mb-2"}},blockquote:{HTMLAttributes:{class:"border-l-4 border-stone-700"}},codeBlock:!1,code:{HTMLAttributes:{class:"rounded-md bg-stone-200 px-1.5 py-1 font-mono font-medium text-stone-900",spellcheck:"false"}},horizontalRule:!1,dropcursor:{color:"#DBEAFE",width:4}}),Wn,Zn.default.extend({addInputRules(){return[new Kn.InputRule({find:/^(?:---|-|___\s|\*\*\*\s)$/,handler:({state:e,range:t})=>{let a={},{tr:r}=e,n=t.from,s=t.to;r.insert(n-1,this.type.create(a)).delete(r.mapping.map(n),r.mapping.map(s))}})]}}).configure({HTMLAttributes:{class:"mt-4 mb-6 border-t border-stone-300"}}),Qn,oo.default,Jn.default.configure({multicolor:!0}),co.Markdown.configure({html:!1,linkify:!1,transformPastedText:!0}),Xn.default.extend({renderHTML({HTMLAttributes:e}){return["img",R(d({},e),{onError:`this.classList.add("image-error");this.alt="Couldn't load image.";`})]}}).configure({inline:!0}),eo.default.configure({openOnClick:!1}),Yn.default.extend({addNodeView(){return(0,so.ReactNodeViewRenderer)(Tn)}}).configure({lowlight:lo.default}),to.default.configure({resizable:!0}),no.default,ro.default,ao.default];var yo={attributes:{class:"prose-lg prose-stone prose-headings:font-display font-default focus:outline-none max-w-full"},handleDOMEvents:{keydown:(e,t)=>{if(["ArrowUp","ArrowDown","Enter"].includes(t.key)&&document.querySelector("#slash-command"))return!0}},handlePaste:(e,t)=>{var a;if(t.clipboardData&&t.clipboardData.files&&t.clipboardData.files[0]){t.preventDefault();let r=Array.from(((a=t.clipboardData)==null?void 0:a.items)||[]);for(let n of r)if(n.type.indexOf("image")===0){let{schema:s}=e.state,i=t.clipboardData.files[0],o=mt(i),l=s.nodes.image.create({src:o,alt:""}),c=e.state.tr.replaceSelectionWith(l);return e.dispatch(c),!0}}return!1},handleDrop:(e,t,a,r)=>{if(!r&&t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files[0]){if(t.preventDefault(),t.dataTransfer.files[0]!==void 0){let n=t.dataTransfer.files[0],s=mt(n),{schema:i}=e.state,o=i.nodes.image.create({src:s,alt:""}),l=e.state.tr.replaceSelectionWith(o);return e.dispatch(l),!0}return!1}}};var uo=D(require("@tiptap/extension-placeholder")),So=require("@tiptap/react"),bo=require("ai/react"),yt=require("react"),sa=require("sonner"),mo=require("use-debounce");var pi=t=>{var e=G(t,[]);let{hasOpenAIKey:a}=N(),{setValue:r,trigger:n}=e,s=(0,yt.useRef)(null),i=(0,mo.useDebouncedCallback)(y=>w(void 0,[y],function*({editor:S}){let p=S.getHTML();r("content",p&&!S.isEmpty?p:""),w(void 0,null,function*(){return yield n("content")})}),750),o=(0,So.useEditor)({extensions:[...po,uo.default.configure({placeholder:({editor:S,node:y})=>S.isActive("tableCell")||S.isActive("tableHeader")?"":y.type.name==="heading"?`Heading ${y.attrs.level}`:`Press '/' for commands${a?", or '++' for AI autocomplete...":""}`,includeChildren:!0})],editorProps:yo,onUpdate({editor:S}){let y=S.state.selection,p=Nt(S,{chars:2});if(a&&p==="++"&&!u){S.commands.deleteRange({from:y.from-2,to:y.from});let g=Nt(S,{chars:5e3});g===""?sa.toast.error("Write some content so the AI can continue."):l(g)}else i({editor:S})}});(0,yt.useEffect)(()=>{s.current=o},[o]);let{complete:l,completion:c,isLoading:u,stop:M}=(0,bo.useCompletion)({id:"outstatic",api:"/api/outstatic/generate",onFinish:(S,y)=>{s.current&&s.current.commands.setTextSelection({from:s.current.state.selection.from-y.length,to:s.current.state.selection.from})},onError:S=>{sa.toast.error(S.message)}}),m=(0,yt.useRef)("");return(0,yt.useEffect)(()=>{o==null||o.commands.toggleClass("completing")},[u]),(0,yt.useEffect)(()=>{let S=c.slice(m.current.length);m.current=c;try{o==null||o.commands.insertContent(S)}catch(y){console.log(`error adding content: ${S}`)}},[u,o,c]),(0,yt.useEffect)(()=>{let S=p=>{(p.key==="Escape"||p.metaKey&&p.key==="z")&&(M(),p.key==="Escape"&&(o==null||o.commands.deleteRange({from:o.state.selection.from-c.length,to:o.state.selection.from}),sa.toast.message("AI writing cancelled.")))},y=p=>{p.preventDefault(),p.stopPropagation(),M(),window.confirm("AI writing paused. Continue?")&&l((o==null?void 0:o.getText())||"")};return u?(document.addEventListener("keydown",S),window.addEventListener("mousedown",y)):(document.removeEventListener("keydown",S),window.removeEventListener("mousedown",y)),()=>{document.removeEventListener("keydown",S),window.removeEventListener("mousedown",y)}},[M,u,o,l,c.length]),{editor:o}},Io=pi;var ue=D(require("yup"));var Mo=/^([a-z0-9]+-)*[a-z0-9]+$/;var go={title:ue.string().required("Title is required."),publishedAt:ue.date().required("Date is required."),content:ue.string().required("Content is required."),status:ue.string().equals(["published","draft"]).required("Status is missing."),author:ue.object().shape({name:ue.string(),picture:ue.string()}),slug:ue.string().matches(/^(?!new$)/,'The word "new" is not a valid slug.').matches(Mo,"Slug must contain only lowercase letters, numbers, and hyphens, and cannot start or end with a hyphen.").max(200,"Slugs can be a maximum of 200 characters.").required(),description:ue.string(),coverImage:ue.string()},Ao=ue.object().shape(go),Ro=e=>{let t={};for(let[r,n]of Object.entries(e.properties))t[r]=ue[n.dataType](),n.required&&(t[r]=t[r].required(`${n.title} is a required field.`)),n.dataType==="number"&&(t[r]=t[r].typeError(`${n.title} is a required field.`)),n.dataType==="array"&&n.required&&(t[r]=t[r].min(1,`${n.title} is a required field.`));return ue.object().shape(d(d({},go),t))};var fo=require("@hookform/resolvers/yup"),Eo=D(require("next/head")),Po=require("next/navigation"),Co=require("pluralize"),$e=require("react"),ia=require("react-hook-form");var ce=require("react/jsx-runtime");function za({collection:e}){let t=(0,Po.usePathname)(),[a,r]=(0,$e.useState)(t.split("/").pop()||`/${e}/new`),[n,s]=(0,$e.useState)(!1),{hasChanges:i,setHasChanges:o,basePath:l,session:c}=N(),[u,M]=(0,$e.useState)(!1),[m,S]=(0,$e.useState)(Ao),y=(0,ia.useForm)({resolver:(0,fo.yupResolver)(m)}),{editor:p}=Io(d({},y)),[g,b]=(0,$e.useState)({}),A=at(T=>T.files),P=(T,h)=>{let V=y.getValues(),F=An(V,T,h);y.reset(F)},{data:v}=ct({file:`${e}/schema.json`}),z=_n({session:c,slug:a,setSlug:r,setShowDelete:M,setLoading:s,files:A,methods:y,collection:e,customFields:g,setCustomFields:b,setHasChanges:o,editor:p});return(0,$e.useEffect)(()=>{window.history.replaceState({},"",`${l}/outstatic/${e}/${a}`)},[a]),Pn({collection:e,methods:y,slug:a,editor:p,session:c,setHasChanges:o,setShowDelete:M}),(0,$e.useEffect)(()=>{var h;let T=(h=v==null?void 0:v.repository)==null?void 0:h.object;if((T==null?void 0:T.__typename)==="Blob"){let V=JSON.parse((T==null?void 0:T.text)||"{}"),F=Ro(V);S(F),b(V.properties)}},[v]),(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)(Eo.default,{children:[(0,ce.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,ce.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""}),(0,ce.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&display=swap",rel:"stylesheet"})]}),(0,ce.jsx)(Ye.Provider,{value:{editor:p,document:y.getValues(),editDocument:P,hasChanges:i,collection:e},children:(0,ce.jsx)(ia.FormProvider,R(d({},y),{children:(0,ce.jsx)(me,{title:y.getValues("title"),settings:(0,ce.jsx)(ha,{loading:n,saveFunc:y.handleSubmit(z),showDelete:u,customFields:g}),children:(0,ce.jsxs)("form",{className:"m-auto max-w-[700px] space-y-4",children:[(0,ce.jsx)(Yt,{id:"title",className:"w-full resize-none outline-none bg-white text-5xl scrollbar-hide min-h-[55px] overflow-hidden",placeholder:`Your ${(0,Co.singular)(e)} title`}),(0,ce.jsx)("div",{className:"min-h-full prose prose-xl",children:(0,ce.jsx)(wa,{editor:p,id:"content"})})]})})}))})]})}var xo=D(require("gray-matter")),qa=D(require("next/link")),Do=require("next/navigation"),la=require("pluralize");var ee=require("react/jsx-runtime"),yi={year:"numeric",month:"long",day:"numeric"};function Fa({collection:e}){var S,y,p,g,b;let t=(0,Do.useRouter)(),{repoOwner:a,repoSlug:r,repoBranch:n,contentPath:s,monorepoPath:i,session:o}=N(),{data:l,error:c,loading:u}=wr({variables:{owner:a||((S=o==null?void 0:o.user)==null?void 0:S.login)||"",name:r||"",contentPath:`${n}:${i?i+"/":""}${s}/${e}`||""},fetchPolicy:"network-only",onError:({graphQLErrors:A})=>{var P;return A&&((P=A==null?void 0:A[0])==null?void 0:P.type)==="NOT_FOUND"&&t.push("/api/outstatic/signout"),null}}),M=[],m=((p=(y=l==null?void 0:l.repository)==null?void 0:y.object)==null?void 0:p.__typename)==="Tree"&&((b=(g=l==null?void 0:l.repository)==null?void 0:g.object)==null?void 0:b.entries);return m&&(m.forEach(A=>{var P,v,z;if(A.name.slice(-3)===".md"){let{data:T}=(0,xo.default)(((P=A==null?void 0:A.object)==null?void 0:P.__typename)==="Blob"&&((v=A==null?void 0:A.object)!=null&&v.text)?(z=A==null?void 0:A.object)==null?void 0:z.text:""),h=d({},T);delete h.coverImage,M.push(R(d({},h),{author:h.author.name||"",publishedAt:new Date(h.publishedAt).toLocaleDateString("en-US",yi),slug:A.name.replace(".md","")}))}}),M.sort((A,P)=>Number(P.publishedAt)-Number(A.publishedAt))),(0,ee.jsxs)(me,{error:c,title:e[0].toUpperCase()+e.slice(1),children:[(0,ee.jsxs)("div",{className:"mb-8 flex h-12 items-center capitalize",children:[(0,ee.jsx)("h1",{className:"mr-12 text-2xl",children:e}),(0,ee.jsx)(U,{asChild:!0,children:(0,ee.jsxs)(qa.default,{href:`/outstatic/${e}/new`,children:["New ",(0,la.singular)(e)]})})]}),M.length>0&&(0,ee.jsx)("div",{className:"relative shadow-md sm:rounded-lg",children:(0,ee.jsx)(Ua,{documents:M,collection:e})}),M.length===0&&!u&&(0,ee.jsxs)("div",{className:"max-w-2xl",children:[(0,ee.jsx)("div",{className:"absolute bottom-0 left-0 md:left-64 right-0 md:top-36",children:(0,ee.jsx)("svg",{fill:"none",className:"h-full w-full",xmlns:"http://www.w3.org/2000/svg",children:(0,ee.jsx)("path",{d:"m1555.43 194.147c-100.14 46.518-204.72 78.763-313.64 96.841-78.16 12.972-282.29 0-291.79-143.988-1.58-23.948 1-89.4705 67-127 58-32.9805 115.15-13.36095 142.5 5.5 27.35 18.861 45.02 44.5 54 73 16.37 51.951-9.22 115.124-30.65 161.874-57.09 124.562-177.31 219.357-311.976 246.789-142.617 29.052-292.036-9.369-430.683-41.444-100.166-23.173-196.003-36.724-298.229-15.203-48.046 10.115-94.9295 24.91-139.962 44.112",className:"stroke-slate-900",strokeWidth:"2"})})}),(0,ee.jsx)("div",{className:"relative",children:(0,ee.jsxs)("div",{className:"mb-20 max-w-2xl p-8 px-4 md:p-8 text-black bg-white rounded-lg border border-gray-200 shadow-md prose prose-base",children:[(0,ee.jsx)("h3",{children:"This collection has no documents yet."}),(0,ee.jsxs)("p",{children:["Create your first"," ",(0,ee.jsx)("span",{className:"capitalize font-semibold",children:(0,la.singular)(e)})," ","by clicking the button below."]}),(0,ee.jsx)(U,{asChild:!0,children:(0,ee.jsxs)(qa.default,{href:`/outstatic/${e}/new`,className:"no-underline capitalize",children:["New ",(0,la.singular)(e)]})}),(0,ee.jsxs)("p",{children:["To learn more about how documents work"," ",(0,ee.jsx)("a",{href:"https://outstatic.com/docs/introduction#whats-a-document",target:"_blank",rel:"noreferrer",children:"click here"}),"."]})]})})]})]})}var de=require("react/jsx-runtime"),ui={something:"Something went wrong. Please try again.","repository-not-found":(0,de.jsxs)(de.Fragment,{children:["We couldn't access your repository. ",(0,de.jsx)("br",{}),"Please, check out our"," ",(0,de.jsx)("a",{className:"underline",target:"_blank",href:"https://outstatic.com/docs/faqs#troubleshooting-login-and-repository-access-issues",children:"troubleshooting guide"}),"."]}),"not-collaborator":(0,de.jsxs)(de.Fragment,{children:["You're not a collaborator of this repository. ",(0,de.jsx)("br",{}),"Please, check out our"," ",(0,de.jsx)("a",{className:"underline",target:"_blank",href:"https://outstatic.com/docs/faqs#troubleshooting-login-and-repository-access-issues",children:"troubleshooting guide"}),"."]}),redirect_uri_mismatch:(0,de.jsxs)(de.Fragment,{children:["The redirect_uri MUST match the registered callback URL for this application. ",(0,de.jsx)("br",{}),(0,de.jsx)("br",{}),"For more information:"," ",(0,de.jsx)("a",{className:"underline",target:"_blank",href:"https://docs.github.com/apps/managing-oauth-apps/troubleshooting-authorization-request-errors/#redirect-uri-mismatch",children:"GitHub Apps troubleshooting"}),"."]})},Ha=ui;var Ga=D(require("clsx")),ho=D(require("next/link")),vo=require("next/navigation"),Uo=require("react"),q=require("react/jsx-runtime");function Qa(){let t=(0,vo.useSearchParams)().get("error"),[a,r]=(0,Uo.useState)(!1);return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)("div",{id:"outstatic",children:[(0,q.jsx)("div",{className:"absolute left-0 z-0 h-screen w-full overflow-hidden bg-white md:-top-10",children:(0,q.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 1200 365",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,q.jsx)("path",{d:"M-276.32 159.182C-232.477 130.613 -193.037 95.4797 -149.142 66.8773C-123.398 50.1026 -99.0091 30.5473 -69.5694 19.7442C-38.5686 8.36831 -2.85928 -3.31376 37.4064 4.54405C65.5725 10.0406 93.927 20.2194 125.473 43.3305C150.292 61.5127 166.609 84.5943 185.936 114.255C220.569 167.405 225.81 223.228 224.615 265.934C223.2 316.536 198.5 341.652 158.621 340.382C121.027 339.185 71.9868 320.328 45.0005 250.638C8.63388 156.723 111.095 159.937 149.344 159.325C235.509 157.945 334.997 185.056 433.145 218.102C547.034 256.448 651.041 336.753 780 356C940 384.5 1235.5 330.311 1237.95 70.5232",stroke:"#1E293B",className:(0,Ga.default)("stroke-2 md:stroke-1",a&&"animate-draw"),strokeLinecap:"round",strokeDasharray:"4000"})})}),(0,q.jsx)("main",{className:"relative z-10 flex h-screen items-center justify-center p-4",children:(0,q.jsxs)("div",{className:"relative flex flex-col items-center justify-center",children:[t&&Ha[t]?(0,q.jsx)("div",{className:"absolute -top-4 -translate-y-full",children:(0,q.jsx)(lt,{type:"error",children:Ha[t]})}):null,(0,q.jsx)("h1",{className:"mb-8 text-center text-xl font-semibold text-white",children:(0,q.jsx)("svg",{fill:"none",height:"32",viewBox:"0 0 775 135",width:"200",xmlns:"http://www.w3.org/2000/svg","aria-label":"Outstatic",children:(0,q.jsxs)("g",{fill:"#1e293b",children:[(0,q.jsx)("path",{d:"m63.9963 134.869c-11.3546 0-21.0957-1.913-29.2232-5.738-8.008-3.824-14.522-8.904-19.5419-15.239-5.02-6.454-8.72517-13.565-11.11562-21.3344-2.39045-7.769-3.585673-15.5379-3.585673-23.3069 0-7.5299 1.254983-15.1196 3.764953-22.769 2.62949-7.769 6.51394-14.8805 11.65344-21.3347 5.259-6.4543 11.773-11.6535 19.5419-15.59772 7.8885-3.94424 17.0917-5.91636 27.6097-5.91636 10.996 0 20.4383 1.97212 28.3268 5.91636 8.008 3.94422 14.5813 9.20322 19.7213 15.77692 5.139 6.4542 8.964 13.5061 11.474 21.1555 2.63 7.6494 3.944 15.2391 3.944 22.769 0 7.4104-1.314 15.0001-3.944 22.769-2.51 7.6495-6.394 14.7613-11.653 21.3343-5.14 6.455-11.5941 11.654-19.363 15.598-7.769 3.944-16.9722 5.917-27.6097 5.917zm.8964-9.323c6.9323 0 12.9084-1.554 17.9284-4.662 5.1394-3.107 9.3227-7.231 12.5498-12.37 3.3467-5.259 5.7971-10.9962 7.3511-17.2114 1.553-6.3347 2.33-12.6096 2.33-18.8248 0-7.6494-.896-15-2.689-22.0519-1.793-7.1713-4.5419-13.5658-8.2471-19.1833-3.5856-5.7371-8.0677-10.2192-13.4462-13.4463-5.3785-3.3466-11.5937-5.0199-18.6455-5.0199-6.9323 0-12.9682 1.6135-18.1077 4.8406-5.1394 3.2271-9.3227 7.4702-12.5498 12.7292-3.2271 5.1394-5.6773 10.8765-7.3506 17.2112-1.5538 6.2152-2.3307 12.4901-2.3307 18.8248 0 6.2151.8366 12.7889 2.5099 19.7212 1.6734 6.9323 4.2431 13.3865 7.7092 19.3626 3.4662 5.976 7.8885 10.817 13.267 14.522 5.4981 3.705 12.0718 5.558 19.7212 5.558z"}),(0,q.jsx)("path",{d:"m179.299 134.869c-6.693 0-12.251-1.255-16.673-3.765-4.303-2.51-7.53-6.634-9.681-12.371-2.152-5.857-3.227-13.566-3.227-23.1276v-28.1475c0-2.0319 0-4.1235 0-6.2749.119-2.271.358-4.4821.717-6.6335-2.032.1195-4.183.239-6.454.3585-2.271 0-4.303.0598-6.096.1793v-9.502h4.303c5.976 0 10.458-.5379 13.446-1.6136s5.08-2.2111 6.275-3.4064h6.813v54.6815c0 9.4422 1.314 16.4942 3.944 21.1552 2.629 4.662 7.052 6.933 13.267 6.813 4.064 0 7.948-1.195 11.653-3.586 3.825-2.39 6.933-5.199 9.323-8.426v-42.4901c0-2.6295.06-5.0797.179-7.3507.12-2.3904.359-4.6613.718-6.8127-2.152.1195-4.363.239-6.634.3585-2.271 0-4.363.0598-6.275.1793v-9.502h5.199c5.259 0 9.383-.5379 12.371-1.6136s5.139-2.2111 6.454-3.4064h6.813l-.179 65.9767c0 1.912-.06 4.542-.18 7.888-.119 3.227-.298 6.096-.538 8.606 2.032-.12 4.124-.239 6.275-.359 2.271-.119 4.363-.179 6.275-.179v9.502h-28.506c-.239-1.912-.478-3.705-.717-5.379-.119-1.673-.299-3.286-.538-4.84-3.705 3.466-8.008 6.514-12.908 9.143-4.901 2.63-10.04 3.945-15.419 3.945z"}),(0,q.jsx)("path",{d:"m283.918 134.869c-2.988 0-5.976-.419-8.964-1.255-2.988-.718-5.797-2.212-8.426-4.483-2.51-2.39-4.482-5.796-5.916-10.219-1.435-4.422-2.152-10.279-2.152-17.57l.359-48.9439h-13.267v-10.0399c3.227-.1196 6.514-1.3148 9.86-3.5857 3.347-2.2709 6.275-5.3187 8.785-9.1435 2.51-3.8247 4.243-7.9482 5.199-12.3705h8.427v25.0997h27.609v9.3227l-27.609.3586-.359 47.8687c0 4.5418.359 8.5458 1.076 12.0118.837 3.347 2.151 5.976 3.944 7.889 1.913 1.793 4.482 2.689 7.709 2.689 2.749 0 5.558-.837 8.427-2.51 2.988-1.673 5.796-4.422 8.426-8.247l6.096 5.378c-2.869 4.184-5.737 7.471-8.606 9.861-2.868 2.39-5.618 4.124-8.247 5.199-2.629 1.195-5.02 1.913-7.171 2.152-2.152.358-3.885.538-5.2.538z"}),(0,q.jsx)("path",{d:"m358.946 134.869c-5.618 0-10.817-.777-15.598-2.331-4.781-1.434-8.605-3.168-11.474-5.199l.538 5.916h-9.502l-.897-30.837h7.53c.239 4.423 1.614 8.427 4.124 12.012 2.51 3.586 5.737 6.395 9.681 8.427 4.064 2.031 8.426 3.047 13.088 3.047 2.749 0 5.438-.418 8.068-1.255 2.629-.956 4.84-2.33 6.633-4.123 1.793-1.913 2.689-4.243 2.689-6.992 0-2.988-.956-5.439-2.868-7.351-1.793-2.032-4.303-3.825-7.53-5.378-3.108-1.5542-6.693-3.108-10.757-4.6618-3.586-1.4342-7.231-2.9282-10.936-4.482-3.586-1.5538-6.933-3.4064-10.04-5.5578-3.108-2.1514-5.558-4.7809-7.351-7.8885-1.793-3.2271-2.689-7.1714-2.689-11.8327 0-2.749.538-5.6773 1.613-8.7849 1.076-3.2271 2.809-6.1554 5.2-8.7849 2.39-2.749 5.617-4.9602 9.681-6.6335 4.064-1.7928 9.084-2.6893 15.06-2.6893 3.227 0 6.812.5379 10.757 1.6136 4.063 1.0757 7.828 2.9283 11.295 5.5578l-.18-6.2749h9.502v31.5539h-7.709c-.358-4.1833-1.494-8.0678-3.406-11.6535-1.793-3.5856-4.363-6.5139-7.709-8.7849-3.347-2.2709-7.411-3.4064-12.192-3.4064-4.661 0-8.486 1.1953-11.474 3.5857-2.868 2.2709-4.303 5.1395-4.303 8.6056 0 3.4662 1.076 6.275 3.227 8.4264 2.271 2.1514 5.2 4.004 8.785 5.5578 3.586 1.5537 7.47 3.1075 11.654 4.6613 5.02 2.0319 9.741 4.2431 14.163 6.6335 4.422 2.3905 8.008 5.3785 10.757 8.9642s4.124 8.1273 4.124 13.6253c0 5.976-1.554 10.996-4.662 15.06-2.988 3.944-6.872 6.873-11.653 8.785s-9.861 2.869-15.239 2.869z"}),(0,q.jsx)("path",{d:"m439.216 134.869c-2.988 0-5.976-.419-8.964-1.255-2.988-.718-5.797-2.212-8.427-4.483-2.51-2.39-4.482-5.796-5.916-10.219-1.434-4.422-2.151-10.279-2.151-17.57l.358-48.9439h-13.267v-10.0399c3.227-.1196 6.514-1.3148 9.861-3.5857 3.346-2.2709 6.275-5.3187 8.785-9.1435 2.51-3.8247 4.243-7.9482 5.199-12.3705h8.426v25.0997h27.61v9.3227l-27.61.3586-.358 47.8687c0 4.5418.358 8.5458 1.075 12.0118.837 3.347 2.152 5.976 3.945 7.889 1.912 1.793 4.482 2.689 7.709 2.689 2.749 0 5.558-.837 8.426-2.51 2.988-1.673 5.797-4.422 8.426-8.247l6.096 5.378c-2.869 4.184-5.737 7.471-8.606 9.861-2.868 2.39-5.617 4.124-8.247 5.199-2.629 1.195-5.02 1.913-7.171 2.152-2.151.358-3.884.538-5.199.538z"}),(0,q.jsx)("path",{d:"m528.944 132c-.239-1.912-.418-3.586-.537-5.02-.12-1.434-.299-2.928-.538-4.482-4.064 4.064-8.427 7.171-13.088 9.323-4.661 2.032-9.502 3.048-14.522 3.048-8.606 0-15.119-2.092-19.542-6.275-4.303-4.303-6.454-9.622-6.454-15.957 0-5.498 1.614-10.279 4.841-14.3423 3.227-4.0638 7.47-7.3507 12.729-9.8606 5.259-2.6295 10.996-4.5419 17.211-5.7371 6.215-1.3148 12.311-1.9721 18.287-1.9721v-10.5778c0-3.8247-.359-7.3506-1.076-10.5777-.717-3.3466-2.211-6.0359-4.482-8.0678-2.151-2.1514-5.558-3.2271-10.219-3.2271-3.108-.1195-6.215.4781-9.323 1.7929-3.107 1.1952-5.498 3.2271-7.171 6.0956.956.9562 1.554 2.0917 1.793 3.4064.358 1.1952.538 2.3307.538 3.4064 0 1.6733-.718 3.5857-2.152 5.7371-1.434 2.0318-3.884 2.988-7.35 2.8685-2.869 0-5.08-.9562-6.634-2.8685-1.434-2.0319-2.151-4.3626-2.151-6.9921 0-4.3028 1.553-8.1275 4.661-11.4741 3.227-3.3467 7.59-5.9762 13.088-7.8885 5.498-1.9124 11.653-2.8686 18.466-2.8686 10.279 0 17.928 2.6893 22.948 8.0678 5.14 5.3785 7.709 13.8646 7.709 25.4583v12.3705c0 3.9443-.059 7.8885-.179 11.8328v12.55c0 1.793-.06 3.825-.179 6.095-.12 2.271-.299 4.662-.538 7.172 2.032-.12 4.124-.239 6.275-.359 2.151-.119 4.183-.179 6.096-.179v9.502zm-1.613-43.0281c-3.825.2391-7.769.7769-11.833 1.6136-3.944.8366-7.53 2.0916-10.757 3.7649s-5.856 3.8247-7.888 6.4546c-1.913 2.629-2.869 5.796-2.869 9.502.239 4.063 1.554 7.051 3.944 8.964 2.51 1.912 5.439 2.868 8.785 2.868 4.184 0 7.889-.777 11.116-2.33 3.227-1.674 6.394-3.945 9.502-6.813-.12-1.315-.179-2.63-.179-3.944 0-1.435 0-2.929 0-4.482 0-1.076 0-3.048 0-5.9168.119-2.988.179-6.2151.179-9.6813z"}),(0,q.jsx)("path",{d:"m602.217 134.869c-2.988 0-5.976-.419-8.964-1.255-2.988-.718-5.797-2.212-8.427-4.483-2.51-2.39-4.482-5.796-5.916-10.219-1.434-4.422-2.151-10.279-2.151-17.57l.358-48.9439h-13.267v-10.0399c3.227-.1196 6.514-1.3148 9.861-3.5857 3.346-2.2709 6.275-5.3187 8.785-9.1435 2.51-3.8247 4.243-7.9482 5.199-12.3705h8.426v25.0997h27.61v9.3227l-27.61.3586-.358 47.8687c0 4.5418.358 8.5458 1.075 12.0118.837 3.347 2.152 5.976 3.945 7.889 1.912 1.793 4.482 2.689 7.709 2.689 2.749 0 5.558-.837 8.426-2.51 2.988-1.673 5.797-4.422 8.426-8.247l6.096 5.378c-2.868 4.184-5.737 7.471-8.606 9.861-2.868 2.39-5.617 4.124-8.247 5.199-2.629 1.195-5.02 1.913-7.171 2.152-2.151.358-3.884.538-5.199.538z"}),(0,q.jsx)("path",{d:"m639.057 124.47c3.585 0 6.095-.837 7.53-2.51 1.434-1.673 2.271-4.004 2.51-6.992.358-2.988.538-6.454.538-10.398v-37.1121c0-2.0319.059-4.0638.179-6.0957.119-2.1514.299-4.4223.538-6.8127-2.032.1195-4.184.239-6.455.3585-2.27 0-4.362.0598-6.275.1793v-9.502c5.379 0 9.622-.2391 12.73-.7172 3.227-.5976 5.677-1.2549 7.35-1.9721 1.793-.7171 3.108-1.494 3.945-2.3307h6.812v69.2037c0 2.151-.059 4.362-.179 6.633-.119 2.152-.299 4.363-.538 6.634 1.913-.12 3.825-.179 5.737-.179 2.032-.12 3.885-.24 5.558-.359v9.502h-39.98zm19.183-100.3988c-3.107 0-5.737-1.1354-7.888-3.4063-2.152-2.3905-3.227-5.259-3.227-8.6057 0-3.34658 1.135-6.15536 3.406-8.42628 2.271-2.39045 4.841-3.5856788 7.709-3.5856788 3.108 0 5.677 1.1952288 7.709 3.5856788 2.152 2.27092 3.227 5.0797 3.227 8.42628 0 3.3467-1.075 6.2152-3.227 8.6057-2.032 2.2709-4.601 3.4063-7.709 3.4063z"}),(0,q.jsx)("path",{d:"m735.314 134.869c-8.008 0-15.359-1.793-22.052-5.379-6.693-3.705-12.072-8.964-16.136-15.777-3.944-6.813-5.916-15.0598-5.916-24.7411 0-6.4542 1.136-12.6096 3.407-18.4662 2.27-5.9761 5.438-11.2949 9.502-15.9562 4.183-4.6614 9.083-8.3068 14.701-10.9363 5.737-2.7491 12.072-4.1236 19.004-4.1236 7.052 0 13.088 1.0757 18.108 3.2271 5.019 2.1514 8.844 4.9602 11.474 8.4264 2.749 3.4661 4.123 7.2311 4.123 11.2948 0 2.8686-.837 5.3785-2.51 7.5299-1.673 2.1515-4.064 3.2272-7.171 3.2272-3.466.1195-5.917-.8965-7.351-3.0479-1.434-2.2709-2.151-4.3625-2.151-6.2749 0-1.0757.179-2.2709.538-3.5857.358-1.4342 1.016-2.6892 1.972-3.7649-.956-2.51-2.51-4.3626-4.662-5.5578-2.151-1.1952-4.362-1.9721-6.633-2.3307s-4.183-.5379-5.737-.5379c-7.291.1196-13.446 3.2869-18.466 9.5021-4.901 6.0956-7.351 14.9403-7.351 26.5339 0 7.4104 1.076 14.0439 3.227 19.9008 2.271 5.856 5.558 10.518 9.861 13.984s9.442 5.259 15.418 5.378c5.379 0 10.578-1.374 15.598-4.123 5.02-2.869 9.083-6.454 12.191-10.757l5.737 5.02c-3.466 5.378-7.47 9.621-12.012 12.729-4.422 3.107-8.964 5.319-13.625 6.633-4.542 1.315-8.905 1.973-13.088 1.973z"})]})})}),(0,q.jsxs)("div",{className:"mb-20 flex max-w-2xl flex-col items-center rounded-lg border border-gray-200 bg-white p-8 px-4 text-center text-black shadow-md md:p-8",children:[(0,q.jsx)("p",{className:"mb-5",children:"Sign in with GitHub to access your\xA0dashboard."}),(0,q.jsxs)(ho.default,{href:"/api/outstatic/login",onClick:()=>r(!0),className:(0,Ga.default)("mr-2 mb-2 inline-flex items-center rounded-lg bg-[#24292F] px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-[#24292F]/90 focus:outline-none focus:ring-4 focus:ring-[#24292F]/50",a&&"animate-pulse"),children:[(0,q.jsx)("svg",{className:"mr-2 -ml-1 h-4 w-4","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"github",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512",children:(0,q.jsx)("path",{fill:"currentColor",d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})}),"Sign in with GitHub"]})]})]})})]})})}var _o=require("js-base64");var To=({owner:e,oid:t,remove:a=!1,repoSlug:r,repoBranch:n,contentPath:s,monorepoPath:i,collection:o})=>{let l={},c=[],u=[];a?(u.push({path:`${i?i+"/":""}${s}/${o}`}),l=R(d({},l),{deletions:u})):(c.push({path:`${i?i+"/":""}${s}/${o}/.gitkeep`,contents:(0,_o.encode)("")}),l={additions:c});let M=a?`feat(content): remove ${o}`:`feat(content): create ${o}`;return{input:{branch:{repositoryNameWithOwner:`${e}/${r}`,branchName:n},message:{headline:M},fileChanges:l,expectedHeadOid:t}}};var wo=require("@hookform/resolvers/yup"),No=D(require("next/link")),Oo=require("next/navigation"),Ct=require("react"),ca=require("react-hook-form"),Bo=require("transliteration"),pa=D(require("yup"));var te=require("react/jsx-runtime");function $a(){let{pages:e,contentPath:t,monorepoPath:a,session:r,repoSlug:n,repoBranch:s,repoOwner:i,addPage:o,hasChanges:l,setHasChanges:c}=N(),u=(0,Oo.useRouter)(),[M]=De(),m=he(),[S,y]=(0,Ct.useState)(""),p=new RegExp(`^(?!${e.join("$|")}$)`,"i"),g=pa.object().shape({name:pa.string().matches(p,`${S} is already taken.`).required("Collection name is required.")}),[b,A]=(0,Ct.useState)(!1),[P,v]=(0,Ct.useState)(!1),z=(0,ca.useForm)({resolver:(0,wo.yupResolver)(g)}),T=V=>w(this,[V],function*({name:h}){var F;A(!0),c(!1);try{let C=yield m(),H=i||((F=r==null?void 0:r.user)==null?void 0:F.login)||"",Y=(0,Bo.slugify)(h,{allowedChars:"a-zA-Z0-9"}),ae=To({owner:H,oid:C,repoSlug:n,repoBranch:s,contentPath:t,monorepoPath:a,collection:Y});(yield M({variables:ae}))&&(o(Y),A(!1),u.push(`/outstatic/${Y}`))}catch(C){A(!1),c(!1),v(!0),console.log({error:C})}});return(0,Ct.useEffect)(()=>{let h=z.watch(()=>c(!0));return()=>h.unsubscribe()},[z]),(0,te.jsx)(ca.FormProvider,R(d({},z),{children:(0,te.jsxs)(me,{title:"New Collection",children:[(0,te.jsx)("div",{className:"mb-8 flex h-12 items-center",children:(0,te.jsx)("h1",{className:"mr-12 text-2xl",children:"Create a Collection"})}),P?(0,te.jsxs)(lt,{type:"error",children:[(0,te.jsx)("span",{className:"font-medium",children:"Oops!"})," We couldn't create your collection. Please, make sure your settings are correct by"," ",(0,te.jsx)(No.default,{href:"/outstatic/settings",children:(0,te.jsx)("span",{className:"underline",children:"clicking here"})})," ","."]}):null,(0,te.jsxs)("form",{className:"max-w-5xl w-full flex mb-4 items-start",onSubmit:z.handleSubmit(T),children:[(0,te.jsx)(Ue,{label:"Collection Name",id:"name",inputSize:"medium",className:"w-full max-w-sm md:w-80",placeholder:"Ex: Posts",type:"text",helperText:"We suggest naming the collection in plural form, ex: Docs",registerOptions:{onChange:h=>{y(h.target.value)},onBlur:h=>{z.setValue("name",h.target.value)}}}),(0,te.jsx)(U,{type:"submit",disabled:b||!l,className:"ml-1 mt-7 mb-5",children:b?(0,te.jsxs)(te.Fragment,{children:[(0,te.jsxs)("svg",{className:"mr-3 -ml-1 h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,te.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,te.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving"]}):"Save"})]}),S&&(0,te.jsxs)(lt,{type:"info",children:["The collection will appear as"," ",(0,te.jsx)("span",{className:"font-semibold capitalize",children:S})," ","on the sidebar."]})]})}))}var Lo=(e,t)=>{let a=[],r=e.length,n=0;for(;n<r;)a.push(e.slice(n,n+=t));return a};var ko=D(require("gray-matter")),Vo=D(require("imurmurhash")),ut=require("react");var ya=require("react/jsx-runtime"),di=e=>/\.md(x|oc)?$/.test(e),jo=r=>{var n=r,{rebuild:e,onComplete:t}=n,a=G(n,["rebuild","onComplete"]);var v;let[s,i]=(0,ut.useState)(0),[o,l]=(0,ut.useState)(0),c=kt(),u=he(),[M]=De(),{repoOwner:m,repoSlug:S,repoBranch:y,contentPath:p,monorepoPath:g}=N(),b=[g,p].filter(Boolean).join("/"),{data:A}=Nr({variables:{owner:m,name:S,expression:`${y}:${b}`},skip:!e}),P=(0,ut.useMemo)(()=>{var V,F,C,H,Y,ae;let z=JSON.parse(JSON.stringify((F=(V=A==null?void 0:A.repository)==null?void 0:V.object)!=null?F:{})),T=[],h="entries"in z?(C=z.entries)!=null?C:[]:[];for(;h.length>0;){let O=h.pop();((H=O==null?void 0:O.object)==null?void 0:H.__typename)==="Tree"?h.push(...(Y=O.object.entries)!=null?Y:[]):((ae=O==null?void 0:O.object)==null?void 0:ae.__typename)==="Blob"&&di(O.path)&&T.push({path:O.path,oid:`${O.object.oid}`,commit:Ge(`${O.object.commitUrl}`)})}return T},[A]);return(0,ut.useEffect)(()=>{let z=h=>w(void 0,null,function*(){var F,C,H,Y,ae;let V=yield c.query({query:qt,variables:{owner:m,name:S,filePath:`${y}:${h.path}`}});if(((C=(F=V.data.repository)==null?void 0:F.object)==null?void 0:C.__typename)==="Blob"){let O=(0,ko.default)((H=V.data.repository.object.text)!=null?H:""),le=(0,Vo.default)((Y=V.data.repository.object.text)!=null?Y:"");return R(d({},O.data),{slug:(ae=O.data.slug)!=null?ae:h.path.replace(/^.+\/(.+)\.(md|mdoc|mdx)?/,"$1"),__outstatic:{commit:h.commit,hash:`${le.result()}`,path:g?h.path.replace(g,""):h.path}})}});(()=>w(void 0,null,function*(){var Y,ae;i(Math.max(P.length,1));let V=Lo(P,5),F=[],C=u();for(;V.length>0;){let O=V.pop();if(!O)continue;yield Promise.allSettled(O.map(Se=>w(void 0,null,function*(){let _=yield z(Se);F.push(R(d({},_),{collection:Se.path.replace(b,"").replace(/^\/+/,"").replace(/\/.+$/,"")})),l(W=>W+1)})))}let H=yield C;if(F.length>0&&H){let le={commit:Ge(((ae=(Y=A==null?void 0:A.repository)==null?void 0:Y.object)==null?void 0:ae.__typename)==="Tree"?A.repository.object.commitUrl:""),generated:new Date().toUTCString(),metadata:F.filter(Boolean)},Se=Ve({message:"chore: Updates metadata DB",owner:m,name:S,branch:y,oid:H});Se.replaceFile(`${g?g+"/":""}${p}/metadata.json`,tt(le));let _=Se.createInput();try{yield M({variables:{input:_}})}catch(W){console.error(W)}}}))().catch(console.error)},[c,(v=A==null?void 0:A.repository)==null?void 0:v.object,P,y,m,S,b,u,p,g,M]),(0,ut.useEffect)(()=>{o===s&&t&&t()},[t,o,s]),e?(0,ya.jsxs)("div",R(d({},a),{children:[o,"\xA0/\xA0",s]})):(0,ya.jsx)("div",d({},a))};var zo=require("react"),J=require("react/jsx-runtime");function Wa(){let[e,t]=(0,zo.useState)(!1),{repoSlug:a,repoBranch:r,contentPath:n}=N();return(0,J.jsxs)(me,{title:"Settings",children:[(0,J.jsx)("div",{className:"mb-8 flex h-12 items-center",children:(0,J.jsx)("h1",{className:"mr-12 text-2xl",children:"Settings"})}),(0,J.jsxs)("div",{className:"max-w-lg",children:[(0,J.jsxs)("div",{className:"mb-8 max-w-2xl p-8 px-4 md:p-8 text-black bg-white rounded-lg border border-gray-200 shadow-md prose prose-base",children:[(0,J.jsx)("h2",{children:"Metadata"}),(0,J.jsxs)("div",{className:"flex flex-row items-center",children:[(0,J.jsx)(U,{disabled:e,onClick:()=>t(!0),children:e?"Rebuilding...":"Rebuild Metadata"}),(0,J.jsx)(jo,{className:"pl-2",rebuild:e,onComplete:()=>t(!1)})]}),(0,J.jsx)("p",{className:"text-sm",children:"If you've made changes outside of outstatic, or if you are seeing posts with incorrect metadata, you can rebuild your metadata and automatically deploy those changes to your site."})]}),(0,J.jsxs)("div",{className:"mb-8 max-w-2xl p-8 px-4 md:p-8 text-black bg-white rounded-lg border border-gray-200 shadow-md prose prose-base",children:[(0,J.jsx)("h2",{children:"Environment"}),(0,J.jsxs)("div",{children:[(0,J.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900",children:"Repository"}),(0,J.jsx)("input",{className:"cursor-not-allowed block p-2 w-full text-gray-900 bg-gray-50 rounded-lg border border-gray-300 sm:text-sm outline-none",value:a,readOnly:!0})]}),(0,J.jsxs)("div",{className:"mt-4",children:[(0,J.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900",children:"Branch"}),(0,J.jsx)("input",{className:"cursor-not-allowed block p-2 w-full text-gray-900 bg-gray-50 rounded-lg border border-gray-300 sm:text-sm outline-none",value:r,readOnly:!0})]}),(0,J.jsxs)("div",{className:"mt-4",children:[(0,J.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900",children:"Content Path"}),(0,J.jsx)("input",{className:"cursor-not-allowed block p-2 w-full text-gray-900 bg-gray-50 rounded-lg border border-gray-300 sm:text-sm outline-none",value:`${n}`,readOnly:!0})]}),(0,J.jsxs)("p",{className:"text-sm",children:["These values come from your Outstatic environment. To learn more about how to update these values,"," ",(0,J.jsx)("a",{href:"https://outstatic.com/docs/environment-variables",target:"_blank",rel:"noreferrer",className:"underline font-semibold",children:"click here"}),"."]})]})]})]})}var Ot={required:{OST_GITHUB_ID:!1,OST_GITHUB_SECRET:!1},optional:{OST_CONTENT_PATH:!1,OST_REPO_OWNER:!1}},Si=function(){let e={hasMissingEnvVars:!1,envVars:{required:{},optional:{}}};return process.env.OST_REPO_SLUG?Ot.required.OST_REPO_SLUG=!0:process.env.VERCEL_GIT_REPO_SLUG?Ot.required.VERCEL_GIT_REPO_SLUG=!0:Ot.required.OST_REPO_SLUG=!1,Object.entries(Ot.required).forEach(([t])=>{e.envVars.required[t]=!!process.env[t],process.env[t]||(e.hasMissingEnvVars=!0)}),Object.entries(Ot.optional).forEach(([t])=>{e.envVars.optional[t]=!!process.env[t]}),e}();var B=require("react/jsx-runtime");function Ka({variables:e}){return(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)("div",{id:"outstatic",children:[(0,B.jsx)("div",{className:"absolute bottom-10 w-full left-0 overflow-hidden z-0 md:-top-10 bg-white",children:(0,B.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 1200 365",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,B.jsx)("path",{d:"M-276.32 159.182C-232.477 130.613 -193.037 95.4797 -149.142 66.8773C-123.398 50.1026 -99.0091 30.5473 -69.5694 19.7442C-38.5686 8.36831 -2.85928 -3.31376 37.4064 4.54405C65.5725 10.0406 93.927 20.2194 125.473 43.3305C150.292 61.5127 166.609 84.5943 185.936 114.255C220.569 167.405 225.81 223.228 224.615 265.934C223.2 316.536 198.5 341.652 158.621 340.382C121.027 339.185 71.9868 320.328 45.0005 250.638C8.63388 156.723 111.095 159.937 149.344 159.325C235.509 157.945 334.997 185.056 433.145 218.102C547.034 256.448 651.041 336.753 780 356C940 384.5 1235.5 330.311 1237.95 70.5232",stroke:"#1E293B",className:"stroke-2 md:stroke-1",strokeLinecap:"round"})})}),(0,B.jsxs)("main",{className:"relative flex h-screen flex-col items-center justify-center z-10 p-4",children:[(0,B.jsx)("h1",{className:"mb-8 text-center text-xl font-semibold text-white",children:(0,B.jsx)("svg",{fill:"none",height:"32",viewBox:"0 0 775 135",width:"200",xmlns:"http://www.w3.org/2000/svg","aria-label":"Outstatic",children:(0,B.jsxs)("g",{fill:"#1e293b",children:[(0,B.jsx)("path",{d:"m63.9963 134.869c-11.3546 0-21.0957-1.913-29.2232-5.738-8.008-3.824-14.522-8.904-19.5419-15.239-5.02-6.454-8.72517-13.565-11.11562-21.3344-2.39045-7.769-3.585673-15.5379-3.585673-23.3069 0-7.5299 1.254983-15.1196 3.764953-22.769 2.62949-7.769 6.51394-14.8805 11.65344-21.3347 5.259-6.4543 11.773-11.6535 19.5419-15.59772 7.8885-3.94424 17.0917-5.91636 27.6097-5.91636 10.996 0 20.4383 1.97212 28.3268 5.91636 8.008 3.94422 14.5813 9.20322 19.7213 15.77692 5.139 6.4542 8.964 13.5061 11.474 21.1555 2.63 7.6494 3.944 15.2391 3.944 22.769 0 7.4104-1.314 15.0001-3.944 22.769-2.51 7.6495-6.394 14.7613-11.653 21.3343-5.14 6.455-11.5941 11.654-19.363 15.598-7.769 3.944-16.9722 5.917-27.6097 5.917zm.8964-9.323c6.9323 0 12.9084-1.554 17.9284-4.662 5.1394-3.107 9.3227-7.231 12.5498-12.37 3.3467-5.259 5.7971-10.9962 7.3511-17.2114 1.553-6.3347 2.33-12.6096 2.33-18.8248 0-7.6494-.896-15-2.689-22.0519-1.793-7.1713-4.5419-13.5658-8.2471-19.1833-3.5856-5.7371-8.0677-10.2192-13.4462-13.4463-5.3785-3.3466-11.5937-5.0199-18.6455-5.0199-6.9323 0-12.9682 1.6135-18.1077 4.8406-5.1394 3.2271-9.3227 7.4702-12.5498 12.7292-3.2271 5.1394-5.6773 10.8765-7.3506 17.2112-1.5538 6.2152-2.3307 12.4901-2.3307 18.8248 0 6.2151.8366 12.7889 2.5099 19.7212 1.6734 6.9323 4.2431 13.3865 7.7092 19.3626 3.4662 5.976 7.8885 10.817 13.267 14.522 5.4981 3.705 12.0718 5.558 19.7212 5.558z"}),(0,B.jsx)("path",{d:"m179.299 134.869c-6.693 0-12.251-1.255-16.673-3.765-4.303-2.51-7.53-6.634-9.681-12.371-2.152-5.857-3.227-13.566-3.227-23.1276v-28.1475c0-2.0319 0-4.1235 0-6.2749.119-2.271.358-4.4821.717-6.6335-2.032.1195-4.183.239-6.454.3585-2.271 0-4.303.0598-6.096.1793v-9.502h4.303c5.976 0 10.458-.5379 13.446-1.6136s5.08-2.2111 6.275-3.4064h6.813v54.6815c0 9.4422 1.314 16.4942 3.944 21.1552 2.629 4.662 7.052 6.933 13.267 6.813 4.064 0 7.948-1.195 11.653-3.586 3.825-2.39 6.933-5.199 9.323-8.426v-42.4901c0-2.6295.06-5.0797.179-7.3507.12-2.3904.359-4.6613.718-6.8127-2.152.1195-4.363.239-6.634.3585-2.271 0-4.363.0598-6.275.1793v-9.502h5.199c5.259 0 9.383-.5379 12.371-1.6136s5.139-2.2111 6.454-3.4064h6.813l-.179 65.9767c0 1.912-.06 4.542-.18 7.888-.119 3.227-.298 6.096-.538 8.606 2.032-.12 4.124-.239 6.275-.359 2.271-.119 4.363-.179 6.275-.179v9.502h-28.506c-.239-1.912-.478-3.705-.717-5.379-.119-1.673-.299-3.286-.538-4.84-3.705 3.466-8.008 6.514-12.908 9.143-4.901 2.63-10.04 3.945-15.419 3.945z"}),(0,B.jsx)("path",{d:"m283.918 134.869c-2.988 0-5.976-.419-8.964-1.255-2.988-.718-5.797-2.212-8.426-4.483-2.51-2.39-4.482-5.796-5.916-10.219-1.435-4.422-2.152-10.279-2.152-17.57l.359-48.9439h-13.267v-10.0399c3.227-.1196 6.514-1.3148 9.86-3.5857 3.347-2.2709 6.275-5.3187 8.785-9.1435 2.51-3.8247 4.243-7.9482 5.199-12.3705h8.427v25.0997h27.609v9.3227l-27.609.3586-.359 47.8687c0 4.5418.359 8.5458 1.076 12.0118.837 3.347 2.151 5.976 3.944 7.889 1.913 1.793 4.482 2.689 7.709 2.689 2.749 0 5.558-.837 8.427-2.51 2.988-1.673 5.796-4.422 8.426-8.247l6.096 5.378c-2.869 4.184-5.737 7.471-8.606 9.861-2.868 2.39-5.618 4.124-8.247 5.199-2.629 1.195-5.02 1.913-7.171 2.152-2.152.358-3.885.538-5.2.538z"}),(0,B.jsx)("path",{d:"m358.946 134.869c-5.618 0-10.817-.777-15.598-2.331-4.781-1.434-8.605-3.168-11.474-5.199l.538 5.916h-9.502l-.897-30.837h7.53c.239 4.423 1.614 8.427 4.124 12.012 2.51 3.586 5.737 6.395 9.681 8.427 4.064 2.031 8.426 3.047 13.088 3.047 2.749 0 5.438-.418 8.068-1.255 2.629-.956 4.84-2.33 6.633-4.123 1.793-1.913 2.689-4.243 2.689-6.992 0-2.988-.956-5.439-2.868-7.351-1.793-2.032-4.303-3.825-7.53-5.378-3.108-1.5542-6.693-3.108-10.757-4.6618-3.586-1.4342-7.231-2.9282-10.936-4.482-3.586-1.5538-6.933-3.4064-10.04-5.5578-3.108-2.1514-5.558-4.7809-7.351-7.8885-1.793-3.2271-2.689-7.1714-2.689-11.8327 0-2.749.538-5.6773 1.613-8.7849 1.076-3.2271 2.809-6.1554 5.2-8.7849 2.39-2.749 5.617-4.9602 9.681-6.6335 4.064-1.7928 9.084-2.6893 15.06-2.6893 3.227 0 6.812.5379 10.757 1.6136 4.063 1.0757 7.828 2.9283 11.295 5.5578l-.18-6.2749h9.502v31.5539h-7.709c-.358-4.1833-1.494-8.0678-3.406-11.6535-1.793-3.5856-4.363-6.5139-7.709-8.7849-3.347-2.2709-7.411-3.4064-12.192-3.4064-4.661 0-8.486 1.1953-11.474 3.5857-2.868 2.2709-4.303 5.1395-4.303 8.6056 0 3.4662 1.076 6.275 3.227 8.4264 2.271 2.1514 5.2 4.004 8.785 5.5578 3.586 1.5537 7.47 3.1075 11.654 4.6613 5.02 2.0319 9.741 4.2431 14.163 6.6335 4.422 2.3905 8.008 5.3785 10.757 8.9642s4.124 8.1273 4.124 13.6253c0 5.976-1.554 10.996-4.662 15.06-2.988 3.944-6.872 6.873-11.653 8.785s-9.861 2.869-15.239 2.869z"}),(0,B.jsx)("path",{d:"m439.216 134.869c-2.988 0-5.976-.419-8.964-1.255-2.988-.718-5.797-2.212-8.427-4.483-2.51-2.39-4.482-5.796-5.916-10.219-1.434-4.422-2.151-10.279-2.151-17.57l.358-48.9439h-13.267v-10.0399c3.227-.1196 6.514-1.3148 9.861-3.5857 3.346-2.2709 6.275-5.3187 8.785-9.1435 2.51-3.8247 4.243-7.9482 5.199-12.3705h8.426v25.0997h27.61v9.3227l-27.61.3586-.358 47.8687c0 4.5418.358 8.5458 1.075 12.0118.837 3.347 2.152 5.976 3.945 7.889 1.912 1.793 4.482 2.689 7.709 2.689 2.749 0 5.558-.837 8.426-2.51 2.988-1.673 5.797-4.422 8.426-8.247l6.096 5.378c-2.869 4.184-5.737 7.471-8.606 9.861-2.868 2.39-5.617 4.124-8.247 5.199-2.629 1.195-5.02 1.913-7.171 2.152-2.151.358-3.884.538-5.199.538z"}),(0,B.jsx)("path",{d:"m528.944 132c-.239-1.912-.418-3.586-.537-5.02-.12-1.434-.299-2.928-.538-4.482-4.064 4.064-8.427 7.171-13.088 9.323-4.661 2.032-9.502 3.048-14.522 3.048-8.606 0-15.119-2.092-19.542-6.275-4.303-4.303-6.454-9.622-6.454-15.957 0-5.498 1.614-10.279 4.841-14.3423 3.227-4.0638 7.47-7.3507 12.729-9.8606 5.259-2.6295 10.996-4.5419 17.211-5.7371 6.215-1.3148 12.311-1.9721 18.287-1.9721v-10.5778c0-3.8247-.359-7.3506-1.076-10.5777-.717-3.3466-2.211-6.0359-4.482-8.0678-2.151-2.1514-5.558-3.2271-10.219-3.2271-3.108-.1195-6.215.4781-9.323 1.7929-3.107 1.1952-5.498 3.2271-7.171 6.0956.956.9562 1.554 2.0917 1.793 3.4064.358 1.1952.538 2.3307.538 3.4064 0 1.6733-.718 3.5857-2.152 5.7371-1.434 2.0318-3.884 2.988-7.35 2.8685-2.869 0-5.08-.9562-6.634-2.8685-1.434-2.0319-2.151-4.3626-2.151-6.9921 0-4.3028 1.553-8.1275 4.661-11.4741 3.227-3.3467 7.59-5.9762 13.088-7.8885 5.498-1.9124 11.653-2.8686 18.466-2.8686 10.279 0 17.928 2.6893 22.948 8.0678 5.14 5.3785 7.709 13.8646 7.709 25.4583v12.3705c0 3.9443-.059 7.8885-.179 11.8328v12.55c0 1.793-.06 3.825-.179 6.095-.12 2.271-.299 4.662-.538 7.172 2.032-.12 4.124-.239 6.275-.359 2.151-.119 4.183-.179 6.096-.179v9.502zm-1.613-43.0281c-3.825.2391-7.769.7769-11.833 1.6136-3.944.8366-7.53 2.0916-10.757 3.7649s-5.856 3.8247-7.888 6.4546c-1.913 2.629-2.869 5.796-2.869 9.502.239 4.063 1.554 7.051 3.944 8.964 2.51 1.912 5.439 2.868 8.785 2.868 4.184 0 7.889-.777 11.116-2.33 3.227-1.674 6.394-3.945 9.502-6.813-.12-1.315-.179-2.63-.179-3.944 0-1.435 0-2.929 0-4.482 0-1.076 0-3.048 0-5.9168.119-2.988.179-6.2151.179-9.6813z"}),(0,B.jsx)("path",{d:"m602.217 134.869c-2.988 0-5.976-.419-8.964-1.255-2.988-.718-5.797-2.212-8.427-4.483-2.51-2.39-4.482-5.796-5.916-10.219-1.434-4.422-2.151-10.279-2.151-17.57l.358-48.9439h-13.267v-10.0399c3.227-.1196 6.514-1.3148 9.861-3.5857 3.346-2.2709 6.275-5.3187 8.785-9.1435 2.51-3.8247 4.243-7.9482 5.199-12.3705h8.426v25.0997h27.61v9.3227l-27.61.3586-.358 47.8687c0 4.5418.358 8.5458 1.075 12.0118.837 3.347 2.152 5.976 3.945 7.889 1.912 1.793 4.482 2.689 7.709 2.689 2.749 0 5.558-.837 8.426-2.51 2.988-1.673 5.797-4.422 8.426-8.247l6.096 5.378c-2.868 4.184-5.737 7.471-8.606 9.861-2.868 2.39-5.617 4.124-8.247 5.199-2.629 1.195-5.02 1.913-7.171 2.152-2.151.358-3.884.538-5.199.538z"}),(0,B.jsx)("path",{d:"m639.057 124.47c3.585 0 6.095-.837 7.53-2.51 1.434-1.673 2.271-4.004 2.51-6.992.358-2.988.538-6.454.538-10.398v-37.1121c0-2.0319.059-4.0638.179-6.0957.119-2.1514.299-4.4223.538-6.8127-2.032.1195-4.184.239-6.455.3585-2.27 0-4.362.0598-6.275.1793v-9.502c5.379 0 9.622-.2391 12.73-.7172 3.227-.5976 5.677-1.2549 7.35-1.9721 1.793-.7171 3.108-1.494 3.945-2.3307h6.812v69.2037c0 2.151-.059 4.362-.179 6.633-.119 2.152-.299 4.363-.538 6.634 1.913-.12 3.825-.179 5.737-.179 2.032-.12 3.885-.24 5.558-.359v9.502h-39.98zm19.183-100.3988c-3.107 0-5.737-1.1354-7.888-3.4063-2.152-2.3905-3.227-5.259-3.227-8.6057 0-3.34658 1.135-6.15536 3.406-8.42628 2.271-2.39045 4.841-3.5856788 7.709-3.5856788 3.108 0 5.677 1.1952288 7.709 3.5856788 2.152 2.27092 3.227 5.0797 3.227 8.42628 0 3.3467-1.075 6.2152-3.227 8.6057-2.032 2.2709-4.601 3.4063-7.709 3.4063z"}),(0,B.jsx)("path",{d:"m735.314 134.869c-8.008 0-15.359-1.793-22.052-5.379-6.693-3.705-12.072-8.964-16.136-15.777-3.944-6.813-5.916-15.0598-5.916-24.7411 0-6.4542 1.136-12.6096 3.407-18.4662 2.27-5.9761 5.438-11.2949 9.502-15.9562 4.183-4.6614 9.083-8.3068 14.701-10.9363 5.737-2.7491 12.072-4.1236 19.004-4.1236 7.052 0 13.088 1.0757 18.108 3.2271 5.019 2.1514 8.844 4.9602 11.474 8.4264 2.749 3.4661 4.123 7.2311 4.123 11.2948 0 2.8686-.837 5.3785-2.51 7.5299-1.673 2.1515-4.064 3.2272-7.171 3.2272-3.466.1195-5.917-.8965-7.351-3.0479-1.434-2.2709-2.151-4.3625-2.151-6.2749 0-1.0757.179-2.2709.538-3.5857.358-1.4342 1.016-2.6892 1.972-3.7649-.956-2.51-2.51-4.3626-4.662-5.5578-2.151-1.1952-4.362-1.9721-6.633-2.3307s-4.183-.5379-5.737-.5379c-7.291.1196-13.446 3.2869-18.466 9.5021-4.901 6.0956-7.351 14.9403-7.351 26.5339 0 7.4104 1.076 14.0439 3.227 19.9008 2.271 5.856 5.558 10.518 9.861 13.984s9.442 5.259 15.418 5.378c5.379 0 10.578-1.374 15.598-4.123 5.02-2.869 9.083-6.454 12.191-10.757l5.737 5.02c-3.466 5.378-7.47 9.621-12.012 12.729-4.422 3.107-8.964 5.319-13.625 6.633-4.542 1.315-8.905 1.973-13.088 1.973z"})]})})}),(0,B.jsxs)("div",{className:"mb-20 max-w-2xl p-8 px-4 md:p-8 text-black bg-white rounded-lg border border-gray-200 shadow-md",children:[(0,B.jsx)("p",{className:"mb-5",children:"Before you can access your admin area, make sure the following environment variables are set up:"}),(0,B.jsx)("ul",{className:"mb-5",children:Object.entries(e.required).map(([t,a])=>(0,B.jsxs)("li",{className:"mb-1",children:[`${a?"\u2705":"\u274C"} Variable`," ",(0,B.jsx)("span",{className:"font-semibold",children:t})," ",`is ${a?"set.":"missing!"}`]},t))}),!e.optional.OST_CONTENT_PATH&&(0,B.jsxs)("p",{className:"mb-5 p-2 bg-blue-100 rounded",children:["Optional variable"," ",(0,B.jsx)("span",{className:"font-semibold",children:"OST_CONTENT_PATH"})," defines where your content is saved.",(0,B.jsx)("br",{}),"Defaulting to ",(0,B.jsx)("code",{children:"outstatic/content"})]}),!e.optional.OST_REPO_OWNER&&(0,B.jsxs)("p",{className:"mb-5 p-2 bg-blue-100 rounded",children:["Optional variable"," ",(0,B.jsx)("span",{className:"font-semibold",children:"OST_REPO_OWNER"})," is not set.",(0,B.jsx)("br",{}),"Defaulting to your GitHub username."]}),(0,B.jsx)("p",{children:"You may need to restart Next.js to apply the changes."})]})]})]})})}var Ce=require("react/jsx-runtime"),bi={settings:(0,Ce.jsx)(Wa,{}),collections:void 0},mi=({ostData:e,params:t})=>{var p,g;let[a,r]=(0,xt.useState)((e==null?void 0:e.pages)||[]),[n,s]=(0,xt.useState)((e==null?void 0:e.collections)||[]),i=kt(e==null?void 0:e.initialApolloState,void 0,e==null?void 0:e.basePath),[o,l]=(0,xt.useState)(!1);if((0,xt.useEffect)(()=>{let b=A=>{o&&(A.preventDefault(),A.returnValue="")};return window.addEventListener("beforeunload",b),()=>{window.removeEventListener("beforeunload",b)}},[o]),e.missingEnvVars)return(0,Ce.jsx)(Ka,{variables:e.missingEnvVars});let c=b=>{a.includes(b)||n.includes(b)||(r([...a,b]),s([...n,b]))},u=b=>{r(a.filter(A=>A!==b)),s(n.filter(A=>A!==b)),console.log("removePage",b)},{session:M}=e;if(!M)return(0,Ce.jsx)(Qa,{});let m=((p=t==null?void 0:t.ost)==null?void 0:p[0])||"",S=((g=t==null?void 0:t.ost)==null?void 0:g[1])||"";if(m&&!a.includes(m))return(0,Ce.jsx)(Ia,{});let y=m&&n.includes(m);return(0,Ce.jsx)(Xa,R(d({},e),{pages:a,collections:n,addPage:c,removePage:u,hasChanges:o,setHasChanges:l,children:(0,Ce.jsxs)(qo.ApolloProvider,{client:i,children:[!m&&(0,Ce.jsx)(Ba,{}),S&&y&&(0,Ce.jsx)(za,{collection:m}),!S&&y?(0,Ce.jsx)(Fa,{collection:m}):bi[m],m==="collections"&&n.includes(S)&&(0,Ce.jsx)(Oa,{collection:S})||!!S&&!y&&(0,Ce.jsx)($a,{})]})}))};0&&(module.exports={OstClient});
